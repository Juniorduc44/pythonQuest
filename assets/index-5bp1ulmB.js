var Eo=n=>{throw TypeError(n)};var Kr=(n,e,t)=>e.has(n)||Eo("Cannot "+t);var k=(n,e,t)=>(Kr(n,e,"read from private field"),t?t.call(n):e.get(n)),Z=(n,e,t)=>e.has(n)?Eo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),J=(n,e,t,r)=>(Kr(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),pe=(n,e,t)=>(Kr(n,e,"access private method"),t);var Kn=(n,e,t,r)=>({set _(s){J(n,e,s,t)},get _(){return k(n,e,r)}});import{j as c,u as Ie,S as fs,P as ce,c as Fn,B as Qc,a as gn,b as vr,d as hn,e as ne,R as Xc,f as Zc,g as Nn,h as ed,X as qi,D as td,i as nd,k as rd,L as zi,C as Hi,Z as Wi,T as sd,l as od,m as id,M as ad,n as br,o as ld,p as cd,q as dd,A as ud,r as hd,s as fd,t as pd,v as ps,w as md,K as Ki,x as Ao,U as ar,y as jo,z as Gn,G as Gr,E as Vr,F as Jr,H as At,I as Ot,J as gd,N as Gi,O as Vi,Q as Ji,V as Yi,W as Qi,Y as Xi,_ as yd,$ as vd,a0 as bd,a1 as No,a2 as wd,a3 as Ro}from"./ui-BTXLlI6L.js";import{a as Bs,r as g,b as T,G as xd,R as _d,g as Cd,c as Ee}from"./vendor-7ZAa7xAN.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var Zi,Oo=Bs;Zi=Oo.createRoot,Oo.hydrateRoot;const kd=1,Sd=1e6;let Yr=0;function Td(){return Yr=(Yr+1)%Number.MAX_SAFE_INTEGER,Yr.toString()}const Qr=new Map,Io=n=>{if(Qr.has(n))return;const e=setTimeout(()=>{Qr.delete(n),Pn({type:"REMOVE_TOAST",toastId:n})},Sd);Qr.set(n,e)},Pd=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,kd)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Io(t):n.toasts.forEach(r=>{Io(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},sr=[];let or={toasts:[]};function Pn(n){or=Pd(or,n),sr.forEach(e=>{e(or)})}function Ed({...n}){const e=Td(),t=s=>Pn({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Pn({type:"DISMISS_TOAST",toastId:e});return Pn({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function Ad(){const[n,e]=g.useState(or);return g.useEffect(()=>(sr.push(e),()=>{const t=sr.indexOf(e);t>-1&&sr.splice(t,1)}),[n]),{...n,toast:Ed,dismiss:t=>Pn({type:"DISMISS_TOAST",toastId:t})}}function jd(n,e=[]){let t=[];function r(o,i){const a=g.createContext(i),l=t.length;t=[...t,i];function d(f){const{scope:h,children:m,...y}=f,v=(h==null?void 0:h[n][l])||a,p=g.useMemo(()=>y,Object.values(y));return c.jsx(v.Provider,{value:p,children:m})}function u(f,h){const m=(h==null?void 0:h[n][l])||a,y=g.useContext(m);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const s=()=>{const o=t.map(i=>g.createContext(i));return function(a){const l=(a==null?void 0:a[n])||o;return g.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[r,Nd(s,...e)]}function Nd(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:d})=>{const f=l(o)[`__scope${d}`];return{...a,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return t.scopeName=e.scopeName,t}function qs(n){const e=n+"CollectionProvider",[t,r]=jd(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),i=m=>{const{scope:y,children:v}=m,p=T.useRef(null),b=T.useRef(new Map).current;return c.jsx(s,{scope:y,itemMap:b,collectionRef:p,children:v})};i.displayName=e;const a=n+"CollectionSlot",l=T.forwardRef((m,y)=>{const{scope:v,children:p}=m,b=o(a,v),x=Ie(y,b.collectionRef);return c.jsx(fs,{ref:x,children:p})});l.displayName=a;const d=n+"CollectionItemSlot",u="data-radix-collection-item",f=T.forwardRef((m,y)=>{const{scope:v,children:p,...b}=m,x=T.useRef(null),w=Ie(y,x),_=o(d,v);return T.useEffect(()=>(_.itemMap.set(x,{ref:x,...b}),()=>void _.itemMap.delete(x))),c.jsx(fs,{[u]:"",ref:w,children:p})});f.displayName=d;function h(m){const y=o(n+"CollectionConsumer",m);return T.useCallback(()=>{const p=y.collectionRef.current;if(!p)return[];const b=Array.from(p.querySelectorAll(`[${u}]`));return Array.from(y.itemMap.values()).sort((_,C)=>b.indexOf(_.ref.current)-b.indexOf(C.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:l,ItemSlot:f},h,r]}var Rd="VisuallyHidden",wr=g.forwardRef((n,e)=>c.jsx(ce.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));wr.displayName=Rd;var Od=wr,zs="ToastProvider",[Hs,Id,Ld]=qs("Toast"),[ea,_v]=Fn("Toast",[Ld]),[$d,xr]=ea(zs),ta=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:i}=n,[a,l]=g.useState(null),[d,u]=g.useState(0),f=g.useRef(!1),h=g.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${zs}\`. Expected non-empty \`string\`.`),c.jsx(Hs.Provider,{scope:e,children:c.jsx($d,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:d,viewport:a,onViewportChange:l,onToastAdd:g.useCallback(()=>u(m=>m+1),[]),onToastRemove:g.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:i})})};ta.displayName=zs;var na="ToastViewport",Dd=["F8"],ms="toast.viewportPause",gs="toast.viewportResume",ra=g.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=Dd,label:s="Notifications ({hotkey})",...o}=n,i=xr(na,t),a=Id(t),l=g.useRef(null),d=g.useRef(null),u=g.useRef(null),f=g.useRef(null),h=Ie(e,f,i.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=i.toastCount>0;g.useEffect(()=>{const p=b=>{var w;r.length!==0&&r.every(_=>b[_]||b.code===_)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[r]),g.useEffect(()=>{const p=l.current,b=f.current;if(y&&p&&b){const x=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent(ms);b.dispatchEvent(S),i.isClosePausedRef.current=!0}},w=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(gs);b.dispatchEvent(S),i.isClosePausedRef.current=!1}},_=S=>{!p.contains(S.relatedTarget)&&w()},C=()=>{p.contains(document.activeElement)||w()};return p.addEventListener("focusin",x),p.addEventListener("focusout",_),p.addEventListener("pointermove",x),p.addEventListener("pointerleave",C),window.addEventListener("blur",x),window.addEventListener("focus",w),()=>{p.removeEventListener("focusin",x),p.removeEventListener("focusout",_),p.removeEventListener("pointermove",x),p.removeEventListener("pointerleave",C),window.removeEventListener("blur",x),window.removeEventListener("focus",w)}}},[y,i.isClosePausedRef]);const v=g.useCallback(({tabbingDirection:p})=>{const x=a().map(w=>{const _=w.ref.current,C=[_,...Yd(_)];return p==="forwards"?C:C.reverse()});return(p==="forwards"?x.reverse():x).flat()},[a]);return g.useEffect(()=>{const p=f.current;if(p){const b=x=>{var C,S,I;const w=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!w){const N=document.activeElement,D=x.shiftKey;if(x.target===p&&D){(C=d.current)==null||C.focus();return}const L=v({tabbingDirection:D?"backwards":"forwards"}),H=L.findIndex(R=>R===N);Xr(L.slice(H+1))?x.preventDefault():D?(S=d.current)==null||S.focus():(I=u.current)==null||I.focus()}};return p.addEventListener("keydown",b),()=>p.removeEventListener("keydown",b)}},[a,v]),c.jsxs(Qc,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&c.jsx(ys,{ref:d,onFocusFromOutsideViewport:()=>{const p=v({tabbingDirection:"forwards"});Xr(p)}}),c.jsx(Hs.Slot,{scope:t,children:c.jsx(ce.ol,{tabIndex:-1,...o,ref:h})}),y&&c.jsx(ys,{ref:u,onFocusFromOutsideViewport:()=>{const p=v({tabbingDirection:"backwards"});Xr(p)}})]})});ra.displayName=na;var sa="ToastFocusProxy",ys=g.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,o=xr(sa,t);return c.jsx(wr,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:i=>{var d;const a=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(a))&&r()}})});ys.displayName=sa;var _r="Toast",Md="toast.swipeStart",Fd="toast.swipeMove",Ud="toast.swipeCancel",Bd="toast.swipeEnd",oa=g.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:o,...i}=n,[a=!0,l]=gn({prop:r,defaultProp:s,onChange:o});return c.jsx(vr,{present:t||a,children:c.jsx(Hd,{open:a,...i,ref:e,onClose:()=>l(!1),onPause:hn(n.onPause),onResume:hn(n.onResume),onSwipeStart:ne(n.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ne(n.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ne(n.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ne(n.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});oa.displayName=_r;var[qd,zd]=ea(_r,{onClose(){}}),Hd=g.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:o,onClose:i,onEscapeKeyDown:a,onPause:l,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...y}=n,v=xr(_r,t),[p,b]=g.useState(null),x=Ie(e,R=>b(R)),w=g.useRef(null),_=g.useRef(null),C=s||v.duration,S=g.useRef(0),I=g.useRef(C),N=g.useRef(0),{onToastAdd:D,onToastRemove:U}=v,B=hn(()=>{var O;(p==null?void 0:p.contains(document.activeElement))&&((O=v.viewport)==null||O.focus()),i()}),L=g.useCallback(R=>{!R||R===1/0||(window.clearTimeout(N.current),S.current=new Date().getTime(),N.current=window.setTimeout(B,R))},[B]);g.useEffect(()=>{const R=v.viewport;if(R){const O=()=>{L(I.current),d==null||d()},j=()=>{const z=new Date().getTime()-S.current;I.current=I.current-z,window.clearTimeout(N.current),l==null||l()};return R.addEventListener(ms,j),R.addEventListener(gs,O),()=>{R.removeEventListener(ms,j),R.removeEventListener(gs,O)}}},[v.viewport,C,l,d,L]),g.useEffect(()=>{o&&!v.isClosePausedRef.current&&L(C)},[o,C,v.isClosePausedRef,L]),g.useEffect(()=>(D(),()=>U()),[D,U]);const H=g.useMemo(()=>p?ha(p):null,[p]);return v.viewport?c.jsxs(c.Fragment,{children:[H&&c.jsx(Wd,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:H}),c.jsx(qd,{scope:t,onClose:B,children:Bs.createPortal(c.jsx(Hs.ItemSlot,{scope:t,children:c.jsx(Xc,{asChild:!0,onEscapeKeyDown:ne(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||B(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(ce.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ne(n.onKeyDown,R=>{R.key==="Escape"&&(a==null||a(R.nativeEvent),R.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:ne(n.onPointerDown,R=>{R.button===0&&(w.current={x:R.clientX,y:R.clientY})}),onPointerMove:ne(n.onPointerMove,R=>{if(!w.current)return;const O=R.clientX-w.current.x,j=R.clientY-w.current.y,z=!!_.current,P=["left","right"].includes(v.swipeDirection),$=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,te=P?$(0,O):0,F=P?0:$(0,j),Q=R.pointerType==="touch"?10:2,X={x:te,y:F},W={originalEvent:R,delta:X};z?(_.current=X,Vn(Fd,f,W,{discrete:!1})):Lo(X,v.swipeDirection,Q)?(_.current=X,Vn(Md,u,W,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(O)>Q||Math.abs(j)>Q)&&(w.current=null)}),onPointerUp:ne(n.onPointerUp,R=>{const O=_.current,j=R.target;if(j.hasPointerCapture(R.pointerId)&&j.releasePointerCapture(R.pointerId),_.current=null,w.current=null,O){const z=R.currentTarget,P={originalEvent:R,delta:O};Lo(O,v.swipeDirection,v.swipeThreshold)?Vn(Bd,m,P,{discrete:!0}):Vn(Ud,h,P,{discrete:!0}),z.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),Wd=n=>{const{__scopeToast:e,children:t,...r}=n,s=xr(_r,e),[o,i]=g.useState(!1),[a,l]=g.useState(!1);return Vd(()=>i(!0)),g.useEffect(()=>{const d=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(d)},[]),a?null:c.jsx(Zc,{asChild:!0,children:c.jsx(wr,{...r,children:o&&c.jsxs(c.Fragment,{children:[s.label," ",t]})})})},Kd="ToastTitle",ia=g.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return c.jsx(ce.div,{...r,ref:e})});ia.displayName=Kd;var Gd="ToastDescription",aa=g.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return c.jsx(ce.div,{...r,ref:e})});aa.displayName=Gd;var la="ToastAction",ca=g.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?c.jsx(ua,{altText:t,asChild:!0,children:c.jsx(Ws,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${la}\`. Expected non-empty \`string\`.`),null)});ca.displayName=la;var da="ToastClose",Ws=g.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=zd(da,t);return c.jsx(ua,{asChild:!0,children:c.jsx(ce.button,{type:"button",...r,ref:e,onClick:ne(n.onClick,s.onClose)})})});Ws.displayName=da;var ua=g.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return c.jsx(ce.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function ha(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Jd(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const i=r.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...ha(r))}}),e}function Vn(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?ed(s,o):s.dispatchEvent(o)}var Lo=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),o=r>s;return e==="left"||e==="right"?o&&r>t:!o&&s>t};function Vd(n=()=>{}){const e=hn(n);Nn(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function Jd(n){return n.nodeType===n.ELEMENT_NODE}function Yd(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Xr(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Qd=ta,fa=ra,pa=oa,ma=ia,ga=aa,ya=ca,va=Ws;function ba(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=ba(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function wa(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=ba(n))&&(r&&(r+=" "),r+=e);return r}const $o=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Do=wa,Ks=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return Do(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:o}=e,i=Object.keys(s).map(d=>{const u=t==null?void 0:t[d],f=o==null?void 0:o[d];if(u===null)return null;const h=$o(u)||$o(f);return s[d][h]}),a=t&&Object.entries(t).reduce((d,u)=>{let[f,h]=u;return h===void 0||(d[f]=h),d},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:f,className:h,...m}=u;return Object.entries(m).every(y=>{let[v,p]=y;return Array.isArray(p)?p.includes({...o,...a}[v]):{...o,...a}[v]===p})?[...d,f,h]:d},[]);return Do(n,i,l,t==null?void 0:t.class,t==null?void 0:t.className)},Gs="-",Xd=n=>{const e=eu(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:i=>{const a=i.split(Gs);return a[0]===""&&a.length!==1&&a.shift(),xa(a,e)||Zd(i)},getConflictingClassGroupIds:(i,a)=>{const l=t[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},xa=(n,e)=>{var i;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?xa(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(Gs);return(i=e.validators.find(({validator:a})=>a(o)))==null?void 0:i.classGroupId},Mo=/^\[(.+)\]$/,Zd=n=>{if(Mo.test(n)){const e=Mo.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},eu=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return nu(Object.entries(n.classGroups),t).forEach(([o,i])=>{vs(i,r,o,e)}),r},vs=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:Fo(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(tu(s)){vs(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,i])=>{vs(i,Fo(e,o),t,r)})})},Fo=(n,e)=>{let t=n;return e.split(Gs).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},tu=n=>n.isThemeGetter,nu=(n,e)=>e?n.map(([t,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,a])=>[e+i,a])):o);return[t,s]}):n,ru=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(o,i)=>{t.set(o,i),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let i=t.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return s(o,i),i},set(o,i){t.has(o)?t.set(o,i):s(o,i)}}},_a="!",su=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],o=e.length,i=a=>{const l=[];let d=0,u=0,f;for(let p=0;p<a.length;p++){let b=a[p];if(d===0){if(b===s&&(r||a.slice(p,p+o)===e)){l.push(a.slice(u,p)),u=p+o;continue}if(b==="/"){f=p;continue}}b==="["?d++:b==="]"&&d--}const h=l.length===0?a:a.substring(u),m=h.startsWith(_a),y=m?h.substring(1):h,v=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:v}};return t?a=>t({className:a,parseClassName:i}):i},ou=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},iu=n=>({cache:ru(n.cacheSize),parseClassName:su(n),...Xd(n)}),au=/\s+/,lu=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=[],i=n.trim().split(au);let a="";for(let l=i.length-1;l>=0;l-=1){const d=i[l],{modifiers:u,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=t(d);let y=!!m,v=r(y?h.substring(0,m):h);if(!v){if(!y){a=d+(a.length>0?" "+a:a);continue}if(v=r(h),!v){a=d+(a.length>0?" "+a:a);continue}y=!1}const p=ou(u).join(":"),b=f?p+_a:p,x=b+v;if(o.includes(x))continue;o.push(x);const w=s(v,y);for(let _=0;_<w.length;++_){const C=w[_];o.push(b+C)}a=d+(a.length>0?" "+a:a)}return a};function cu(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Ca(e))&&(r&&(r+=" "),r+=t);return r}const Ca=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Ca(n[r]))&&(t&&(t+=" "),t+=e);return t};function du(n,...e){let t,r,s,o=i;function i(l){const d=e.reduce((u,f)=>f(u),n());return t=iu(d),r=t.cache.get,s=t.cache.set,o=a,a(l)}function a(l){const d=r(l);if(d)return d;const u=lu(l,t);return s(l,u),u}return function(){return o(cu.apply(null,arguments))}}const ie=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},ka=/^\[(?:([a-z-]+):)?(.+)\]$/i,uu=/^\d+\/\d+$/,hu=new Set(["px","full","screen"]),fu=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pu=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mu=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gu=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yu=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,et=n=>Xt(n)||hu.has(n)||uu.test(n),ct=n=>yn(n,"length",Su),Xt=n=>!!n&&!Number.isNaN(Number(n)),Zr=n=>yn(n,"number",Xt),_n=n=>!!n&&Number.isInteger(Number(n)),vu=n=>n.endsWith("%")&&Xt(n.slice(0,-1)),V=n=>ka.test(n),dt=n=>fu.test(n),bu=new Set(["length","size","percentage"]),wu=n=>yn(n,bu,Sa),xu=n=>yn(n,"position",Sa),_u=new Set(["image","url"]),Cu=n=>yn(n,_u,Pu),ku=n=>yn(n,"",Tu),Cn=()=>!0,yn=(n,e,t)=>{const r=ka.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},Su=n=>pu.test(n)&&!mu.test(n),Sa=()=>!1,Tu=n=>gu.test(n),Pu=n=>yu.test(n),Eu=()=>{const n=ie("colors"),e=ie("spacing"),t=ie("blur"),r=ie("brightness"),s=ie("borderColor"),o=ie("borderRadius"),i=ie("borderSpacing"),a=ie("borderWidth"),l=ie("contrast"),d=ie("grayscale"),u=ie("hueRotate"),f=ie("invert"),h=ie("gap"),m=ie("gradientColorStops"),y=ie("gradientColorStopPositions"),v=ie("inset"),p=ie("margin"),b=ie("opacity"),x=ie("padding"),w=ie("saturate"),_=ie("scale"),C=ie("sepia"),S=ie("skew"),I=ie("space"),N=ie("translate"),D=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",V,e],L=()=>[V,e],H=()=>["",et,ct],R=()=>["auto",Xt,V],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],j=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",V],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[Xt,V];return{cacheSize:500,separator:":",theme:{colors:[Cn],spacing:[et,ct],blur:["none","",dt,V],brightness:F(),borderColor:[n],borderRadius:["none","","full",dt,V],borderSpacing:L(),borderWidth:H(),contrast:F(),grayscale:$(),hueRotate:F(),invert:$(),gap:L(),gradientColorStops:[n],gradientColorStopPositions:[vu,ct],inset:B(),margin:B(),opacity:F(),padding:L(),saturate:F(),scale:F(),sepia:$(),skew:F(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",V]}],container:["container"],columns:[{columns:[dt]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),V]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_n,V]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",V]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",_n,V]}],"grid-cols":[{"grid-cols":[Cn]}],"col-start-end":[{col:["auto",{span:["full",_n,V]},V]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[Cn]}],"row-start-end":[{row:["auto",{span:[_n,V]},V]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",V]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",V]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",V,e]}],"min-w":[{"min-w":[V,e,"min","max","fit"]}],"max-w":[{"max-w":[V,e,"none","full","min","max","fit","prose",{screen:[dt]},dt]}],h:[{h:[V,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[V,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[V,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[V,e,"auto","min","max","fit"]}],"font-size":[{text:["base",dt,ct]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zr]}],"font-family":[{font:[Cn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",V]}],"line-clamp":[{"line-clamp":["none",Xt,Zr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",et,V]}],"list-image":[{"list-image":["none",V]}],"list-style-type":[{list:["none","disc","decimal",V]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",et,ct]}],"underline-offset":[{"underline-offset":["auto",et,V]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",V]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",V]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),xu]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",wu]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Cu]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...j(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:j()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...j()]}],"outline-offset":[{"outline-offset":[et,V]}],"outline-w":[{outline:[et,ct]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[et,ct]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",dt,ku]}],"shadow-color":[{shadow:[Cn]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",dt,V]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",V]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",V]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",V]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[_n,V]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",V]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",V]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",V]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[et,ct,Zr]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Au=du(Eu);function ee(...n){return Au(wa(n))}const ju=Qd,Ta=g.forwardRef(({className:n,...e},t)=>c.jsx(fa,{ref:t,className:ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));Ta.displayName=fa.displayName;const Nu=Ks("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Pa=g.forwardRef(({className:n,variant:e,...t},r)=>c.jsx(pa,{ref:r,className:ee(Nu({variant:e}),n),...t}));Pa.displayName=pa.displayName;const Ru=g.forwardRef(({className:n,...e},t)=>c.jsx(ya,{ref:t,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));Ru.displayName=ya.displayName;const Ea=g.forwardRef(({className:n,...e},t)=>c.jsx(va,{ref:t,className:ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:c.jsx(qi,{className:"h-4 w-4"})}));Ea.displayName=va.displayName;const Aa=g.forwardRef(({className:n,...e},t)=>c.jsx(ma,{ref:t,className:ee("text-sm font-semibold",n),...e}));Aa.displayName=ma.displayName;const ja=g.forwardRef(({className:n,...e},t)=>c.jsx(ga,{ref:t,className:ee("text-sm opacity-90",n),...e}));ja.displayName=ga.displayName;function Ou(){const{toasts:n}=Ad();return c.jsxs(ju,{children:[n.map(function({id:e,title:t,description:r,action:s,...o}){return c.jsxs(Pa,{...o,children:[c.jsxs("div",{className:"grid gap-1",children:[t&&c.jsx(Aa,{children:t}),r&&c.jsx(ja,{children:r})]}),s,c.jsx(Ea,{})]},e)}),c.jsx(Ta,{})]})}var Uo=["light","dark"],Iu="(prefers-color-scheme: dark)",Lu=g.createContext(void 0),$u={setTheme:n=>{},themes:[]},Du=()=>{var n;return(n=g.useContext(Lu))!=null?n:$u};g.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:i,attrs:a,nonce:l})=>{let d=o==="system",u=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=s?Uo.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(y,v=!1,p=!0)=>{let b=i?i[y]:y,x=v?y+"|| ''":`'${b}'`,w="";return s&&p&&!v&&Uo.includes(y)&&(w+=`d.style.colorScheme = '${y}';`),t==="class"?v||b?w+=`c.add(${x})`:w+="null":b&&(w+=`d[s](n,${x})`),w},m=n?`!function(){${u}${h(n)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${Iu}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}${d?"":"else{"+h(o,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}else{${h(o,!1,!1)};}${f}}catch(t){}}();`;return g.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var Mu=n=>{switch(n){case"success":return Bu;case"info":return zu;case"warning":return qu;case"error":return Hu;default:return null}},Fu=Array(12).fill(0),Uu=({visible:n})=>T.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},T.createElement("div",{className:"sonner-spinner"},Fu.map((e,t)=>T.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),Bu=T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},T.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),qu=T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},T.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),zu=T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},T.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Hu=T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},T.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Wu=()=>{let[n,e]=T.useState(document.hidden);return T.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},bs=1,Ku=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,s=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:bs++,o=this.toasts.find(a=>a.id===s),i=n.dismissible===void 0?!0:n.dismissible;return o?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...n,id:s,title:t}),{...a,...n,id:s,dismissible:i,title:t}):a):this.addToast({title:t,...r,dismissible:i,id:s}),s},this.dismiss=n=>(n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),s=t!==void 0;return r.then(async o=>{if(Vu(o)&&!o.ok){s=!1;let i=typeof e.error=="function"?await e.error(`HTTP error! status: ${o.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${o.status}`):e.description;this.create({id:t,type:"error",message:i,description:a})}else if(e.success!==void 0){s=!1;let i=typeof e.success=="function"?await e.success(o):e.success,a=typeof e.description=="function"?await e.description(o):e.description;this.create({id:t,type:"success",message:i,description:a})}}).catch(async o=>{if(e.error!==void 0){s=!1;let i=typeof e.error=="function"?await e.error(o):e.error,a=typeof e.description=="function"?await e.description(o):e.description;this.create({id:t,type:"error",message:i,description:a})}}).finally(()=>{var o;s&&(this.dismiss(t),t=void 0),(o=e.finally)==null||o.call(e)}),t},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||bs++;return this.create({jsx:n(t),id:t,...e}),t},this.subscribers=[],this.toasts=[]}},Ce=new Ku,Gu=(n,e)=>{let t=(e==null?void 0:e.id)||bs++;return Ce.addToast({title:n,...e,id:t}),t},Vu=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",Ju=Gu,Yu=()=>Ce.toasts;Object.assign(Ju,{success:Ce.success,info:Ce.info,warning:Ce.warning,error:Ce.error,custom:Ce.custom,message:Ce.message,promise:Ce.promise,dismiss:Ce.dismiss,loading:Ce.loading},{getHistory:Yu});function Qu(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}Qu(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Jn(n){return n.label!==void 0}var Xu=3,Zu="32px",eh=4e3,th=356,nh=14,rh=20,sh=200;function oh(...n){return n.filter(Boolean).join(" ")}var ih=n=>{var e,t,r,s,o,i,a,l,d,u;let{invert:f,toast:h,unstyled:m,interacting:y,setHeights:v,visibleToasts:p,heights:b,index:x,toasts:w,expanded:_,removeToast:C,defaultRichColors:S,closeButton:I,style:N,cancelButtonStyle:D,actionButtonStyle:U,className:B="",descriptionClassName:L="",duration:H,position:R,gap:O,loadingIcon:j,expandByDefault:z,classNames:P,icons:$,closeButtonAriaLabel:te="Close toast",pauseWhenPageIsHidden:F,cn:Q}=n,[X,W]=T.useState(!1),[E,A]=T.useState(!1),[M,q]=T.useState(!1),[de,fe]=T.useState(!1),[Xe,De]=T.useState(0),[Ae,Me]=T.useState(0),at=T.useRef(null),Fe=T.useRef(null),Bt=x===0,Ze=x+1<=p,ue=h.type,qt=h.dismissible!==!1,Hc=h.className||"",Wc=h.descriptionClassName||"",Hn=T.useMemo(()=>b.findIndex(G=>G.toastId===h.id)||0,[b,h.id]),Kc=T.useMemo(()=>{var G;return(G=h.closeButton)!=null?G:I},[h.closeButton,I]),Co=T.useMemo(()=>h.duration||H||eh,[h.duration,H]),Hr=T.useRef(0),zt=T.useRef(0),ko=T.useRef(0),Ht=T.useRef(null),[So,Gc]=R.split("-"),To=T.useMemo(()=>b.reduce((G,oe,re)=>re>=Hn?G:G+oe.height,0),[b,Hn]),Po=Wu(),Vc=h.invert||f,Wr=ue==="loading";zt.current=T.useMemo(()=>Hn*O+To,[Hn,To]),T.useEffect(()=>{W(!0)},[]),T.useLayoutEffect(()=>{if(!X)return;let G=Fe.current,oe=G.style.height;G.style.height="auto";let re=G.getBoundingClientRect().height;G.style.height=oe,Me(re),v(Ue=>Ue.find(Be=>Be.toastId===h.id)?Ue.map(Be=>Be.toastId===h.id?{...Be,height:re}:Be):[{toastId:h.id,height:re,position:h.position},...Ue])},[X,h.title,h.description,v,h.id]);let lt=T.useCallback(()=>{A(!0),De(zt.current),v(G=>G.filter(oe=>oe.toastId!==h.id)),setTimeout(()=>{C(h)},sh)},[h,C,v,zt]);T.useEffect(()=>{if(h.promise&&ue==="loading"||h.duration===1/0||h.type==="loading")return;let G,oe=Co;return _||y||F&&Po?(()=>{if(ko.current<Hr.current){let re=new Date().getTime()-Hr.current;oe=oe-re}ko.current=new Date().getTime()})():oe!==1/0&&(Hr.current=new Date().getTime(),G=setTimeout(()=>{var re;(re=h.onAutoClose)==null||re.call(h,h),lt()},oe)),()=>clearTimeout(G)},[_,y,z,h,Co,lt,h.promise,ue,F,Po]),T.useEffect(()=>{let G=Fe.current;if(G){let oe=G.getBoundingClientRect().height;return Me(oe),v(re=>[{toastId:h.id,height:oe,position:h.position},...re]),()=>v(re=>re.filter(Ue=>Ue.toastId!==h.id))}},[v,h.id]),T.useEffect(()=>{h.delete&&lt()},[lt,h.delete]);function Jc(){return $!=null&&$.loading?T.createElement("div",{className:"sonner-loader","data-visible":ue==="loading"},$.loading):j?T.createElement("div",{className:"sonner-loader","data-visible":ue==="loading"},j):T.createElement(Uu,{visible:ue==="loading"})}return T.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Fe,className:Q(B,Hc,P==null?void 0:P.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,P==null?void 0:P.default,P==null?void 0:P[ue],(t=h==null?void 0:h.classNames)==null?void 0:t[ue]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:S,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":X,"data-promise":!!h.promise,"data-removed":E,"data-visible":Ze,"data-y-position":So,"data-x-position":Gc,"data-index":x,"data-front":Bt,"data-swiping":M,"data-dismissible":qt,"data-type":ue,"data-invert":Vc,"data-swipe-out":de,"data-expanded":!!(_||z&&X),style:{"--index":x,"--toasts-before":x,"--z-index":w.length-x,"--offset":`${E?Xe:zt.current}px`,"--initial-height":z?"auto":`${Ae}px`,...N,...h.style},onPointerDown:G=>{Wr||!qt||(at.current=new Date,De(zt.current),G.target.setPointerCapture(G.pointerId),G.target.tagName!=="BUTTON"&&(q(!0),Ht.current={x:G.clientX,y:G.clientY}))},onPointerUp:()=>{var G,oe,re,Ue;if(de||!qt)return;Ht.current=null;let Be=Number(((G=Fe.current)==null?void 0:G.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Wn=new Date().getTime()-((oe=at.current)==null?void 0:oe.getTime()),Yc=Math.abs(Be)/Wn;if(Math.abs(Be)>=rh||Yc>.11){De(zt.current),(re=h.onDismiss)==null||re.call(h,h),lt(),fe(!0);return}(Ue=Fe.current)==null||Ue.style.setProperty("--swipe-amount","0px"),q(!1)},onPointerMove:G=>{var oe;if(!Ht.current||!qt)return;let re=G.clientY-Ht.current.y,Ue=G.clientX-Ht.current.x,Be=(So==="top"?Math.min:Math.max)(0,re),Wn=G.pointerType==="touch"?10:2;Math.abs(Be)>Wn?(oe=Fe.current)==null||oe.style.setProperty("--swipe-amount",`${re}px`):Math.abs(Ue)>Wn&&(Ht.current=null)}},Kc&&!h.jsx?T.createElement("button",{"aria-label":te,"data-disabled":Wr,"data-close-button":!0,onClick:Wr||!qt?()=>{}:()=>{var G;lt(),(G=h.onDismiss)==null||G.call(h,h)},className:Q(P==null?void 0:P.closeButton,(s=h==null?void 0:h.classNames)==null?void 0:s.closeButton)},T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},T.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),T.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||T.isValidElement(h.title)?h.jsx||h.title:T.createElement(T.Fragment,null,ue||h.icon||h.promise?T.createElement("div",{"data-icon":"",className:Q(P==null?void 0:P.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Jc():null,h.type!=="loading"?h.icon||($==null?void 0:$[ue])||Mu(ue):null):null,T.createElement("div",{"data-content":"",className:Q(P==null?void 0:P.content,(i=h==null?void 0:h.classNames)==null?void 0:i.content)},T.createElement("div",{"data-title":"",className:Q(P==null?void 0:P.title,(a=h==null?void 0:h.classNames)==null?void 0:a.title)},h.title),h.description?T.createElement("div",{"data-description":"",className:Q(L,Wc,P==null?void 0:P.description,(l=h==null?void 0:h.classNames)==null?void 0:l.description)},h.description):null),T.isValidElement(h.cancel)?h.cancel:h.cancel&&Jn(h.cancel)?T.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||D,onClick:G=>{var oe,re;Jn(h.cancel)&&qt&&((re=(oe=h.cancel).onClick)==null||re.call(oe,G),lt())},className:Q(P==null?void 0:P.cancelButton,(d=h==null?void 0:h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,T.isValidElement(h.action)?h.action:h.action&&Jn(h.action)?T.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||U,onClick:G=>{var oe,re;Jn(h.action)&&(G.defaultPrevented||((re=(oe=h.action).onClick)==null||re.call(oe,G),lt()))},className:Q(P==null?void 0:P.actionButton,(u=h==null?void 0:h.classNames)==null?void 0:u.actionButton)},h.action.label):null))};function Bo(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var ah=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:i,offset:a,theme:l="light",richColors:d,duration:u,style:f,visibleToasts:h=Xu,toastOptions:m,dir:y=Bo(),gap:v=nh,loadingIcon:p,icons:b,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:w,cn:_=oh}=n,[C,S]=T.useState([]),I=T.useMemo(()=>Array.from(new Set([t].concat(C.filter(F=>F.position).map(F=>F.position)))),[C,t]),[N,D]=T.useState([]),[U,B]=T.useState(!1),[L,H]=T.useState(!1),[R,O]=T.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),j=T.useRef(null),z=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=T.useRef(null),$=T.useRef(!1),te=T.useCallback(F=>{var Q;(Q=C.find(X=>X.id===F.id))!=null&&Q.delete||Ce.dismiss(F.id),S(X=>X.filter(({id:W})=>W!==F.id))},[C]);return T.useEffect(()=>Ce.subscribe(F=>{if(F.dismiss){S(Q=>Q.map(X=>X.id===F.id?{...X,delete:!0}:X));return}setTimeout(()=>{xd.flushSync(()=>{S(Q=>{let X=Q.findIndex(W=>W.id===F.id);return X!==-1?[...Q.slice(0,X),{...Q[X],...F},...Q.slice(X+1)]:[F,...Q]})})})}),[]),T.useEffect(()=>{if(l!=="system"){O(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?O("dark"):O("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:F})=>{O(F?"dark":"light")})},[l]),T.useEffect(()=>{C.length<=1&&B(!1)},[C]),T.useEffect(()=>{let F=Q=>{var X,W;r.every(E=>Q[E]||Q.code===E)&&(B(!0),(X=j.current)==null||X.focus()),Q.code==="Escape"&&(document.activeElement===j.current||(W=j.current)!=null&&W.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[r]),T.useEffect(()=>{if(j.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,$.current=!1)}},[j.current]),C.length?T.createElement("section",{"aria-label":`${x} ${z}`,tabIndex:-1},I.map((F,Q)=>{var X;let[W,E]=F.split("-");return T.createElement("ol",{key:F,dir:y==="auto"?Bo():y,tabIndex:-1,ref:j,className:i,"data-sonner-toaster":!0,"data-theme":R,"data-y-position":W,"data-x-position":E,style:{"--front-toast-height":`${((X=N[0])==null?void 0:X.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||Zu,"--width":`${th}px`,"--gap":`${v}px`,...f},onBlur:A=>{$.current&&!A.currentTarget.contains(A.relatedTarget)&&($.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:A=>{A.target instanceof HTMLElement&&A.target.dataset.dismissible==="false"||$.current||($.current=!0,P.current=A.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{L||B(!1)},onPointerDown:A=>{A.target instanceof HTMLElement&&A.target.dataset.dismissible==="false"||H(!0)},onPointerUp:()=>H(!1)},C.filter(A=>!A.position&&Q===0||A.position===F).map((A,M)=>{var q,de;return T.createElement(ih,{key:A.id,icons:b,index:M,toast:A,defaultRichColors:d,duration:(q=m==null?void 0:m.duration)!=null?q:u,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:e,visibleToasts:h,closeButton:(de=m==null?void 0:m.closeButton)!=null?de:o,interacting:L,position:F,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:te,toasts:C.filter(fe=>fe.position==A.position),heights:N.filter(fe=>fe.position==A.position),setHeights:D,expandByDefault:s,gap:v,loadingIcon:p,expanded:U,pauseWhenPageIsHidden:w,cn:_})}))})):null};const lh=({...n})=>{const{theme:e="system"}=Du();return c.jsx(ah,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})},ch=["top","right","bottom","left"],kt=Math.min,Se=Math.max,lr=Math.round,Yn=Math.floor,St=n=>({x:n,y:n}),dh={left:"right",right:"left",bottom:"top",top:"bottom"},uh={start:"end",end:"start"};function ws(n,e,t){return Se(n,kt(e,t))}function st(n,e){return typeof n=="function"?n(e):n}function ot(n){return n.split("-")[0]}function vn(n){return n.split("-")[1]}function Vs(n){return n==="x"?"y":"x"}function Js(n){return n==="y"?"height":"width"}function Tt(n){return["top","bottom"].includes(ot(n))?"y":"x"}function Ys(n){return Vs(Tt(n))}function hh(n,e,t){t===void 0&&(t=!1);const r=vn(n),s=Ys(n),o=Js(s);let i=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=cr(i)),[i,cr(i)]}function fh(n){const e=cr(n);return[xs(n),e,xs(e)]}function xs(n){return n.replace(/start|end/g,e=>uh[e])}function ph(n,e,t){const r=["left","right"],s=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?o:i;default:return[]}}function mh(n,e,t,r){const s=vn(n);let o=ph(ot(n),t==="start",r);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map(xs)))),o}function cr(n){return n.replace(/left|right|bottom|top/g,e=>dh[e])}function gh(n){return{top:0,right:0,bottom:0,left:0,...n}}function Na(n){return typeof n!="number"?gh(n):{top:n,right:n,bottom:n,left:n}}function dr(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function qo(n,e,t){let{reference:r,floating:s}=n;const o=Tt(e),i=Ys(e),a=Js(i),l=ot(e),d=o==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-s.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(vn(e)){case"start":m[i]-=h*(t&&d?-1:1);break;case"end":m[i]+=h*(t&&d?-1:1);break}return m}const yh=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=t,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let d=await i.getElementRects({reference:n,floating:e,strategy:s}),{x:u,y:f}=qo(d,r,l),h=r,m={},y=0;for(let v=0;v<a.length;v++){const{name:p,fn:b}=a[v],{x,y:w,data:_,reset:C}=await b({x:u,y:f,initialPlacement:r,placement:h,strategy:s,middlewareData:m,rects:d,platform:i,elements:{reference:n,floating:e}});u=x??u,f=w??f,m={...m,[p]:{...m[p],..._}},C&&y<=50&&(y++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(d=C.rects===!0?await i.getElementRects({reference:n,floating:e,strategy:s}):C.rects),{x:u,y:f}=qo(d,h,l)),v=-1)}return{x:u,y:f,placement:h,strategy:s,middlewareData:m}};async function Rn(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:l}=n,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=st(e,n),y=Na(m),p=a[h?f==="floating"?"reference":"floating":f],b=dr(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(p)))==null||t?p:p.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:d,rootBoundary:u,strategy:l})),x=f==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),_=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},C=dr(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(b.top-C.top+y.top)/_.y,bottom:(C.bottom-b.bottom+y.bottom)/_.y,left:(b.left-C.left+y.left)/_.x,right:(C.right-b.right+y.right)/_.x}}const vh=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=e,{element:d,padding:u=0}=st(n,e)||{};if(d==null)return{};const f=Na(u),h={x:t,y:r},m=Ys(s),y=Js(m),v=await i.getDimensions(d),p=m==="y",b=p?"top":"left",x=p?"bottom":"right",w=p?"clientHeight":"clientWidth",_=o.reference[y]+o.reference[m]-h[m]-o.floating[y],C=h[m]-o.reference[m],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let I=S?S[w]:0;(!I||!await(i.isElement==null?void 0:i.isElement(S)))&&(I=a.floating[w]||o.floating[y]);const N=_/2-C/2,D=I/2-v[y]/2-1,U=kt(f[b],D),B=kt(f[x],D),L=U,H=I-v[y]-B,R=I/2-v[y]/2+N,O=ws(L,R,H),j=!l.arrow&&vn(s)!=null&&R!==O&&o.reference[y]/2-(R<L?U:B)-v[y]/2<0,z=j?R<L?R-L:R-H:0;return{[m]:h[m]+z,data:{[m]:O,centerOffset:R-O-z,...j&&{alignmentOffset:z}},reset:j}}}),bh=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:d}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...p}=st(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const b=ot(s),x=Tt(a),w=ot(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(d.floating)),C=h||(w||!v?[cr(a)]:fh(a)),S=y!=="none";!h&&S&&C.push(...mh(a,v,y,_));const I=[a,...C],N=await Rn(e,p),D=[];let U=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&D.push(N[b]),f){const R=hh(s,i,_);D.push(N[R[0]],N[R[1]])}if(U=[...U,{placement:s,overflows:D}],!D.every(R=>R<=0)){var B,L;const R=(((B=o.flip)==null?void 0:B.index)||0)+1,O=I[R];if(O)return{data:{index:R,overflows:U},reset:{placement:O}};let j=(L=U.filter(z=>z.overflows[0]<=0).sort((z,P)=>z.overflows[1]-P.overflows[1])[0])==null?void 0:L.placement;if(!j)switch(m){case"bestFit":{var H;const z=(H=U.filter(P=>{if(S){const $=Tt(P.placement);return $===x||$==="y"}return!0}).map(P=>[P.placement,P.overflows.filter($=>$>0).reduce(($,te)=>$+te,0)]).sort((P,$)=>P[1]-$[1])[0])==null?void 0:H[0];z&&(j=z);break}case"initialPlacement":j=a;break}if(s!==j)return{reset:{placement:j}}}return{}}}};function zo(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Ho(n){return ch.some(e=>n[e]>=0)}const wh=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=st(n,e);switch(r){case"referenceHidden":{const o=await Rn(e,{...s,elementContext:"reference"}),i=zo(o,t.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Ho(i)}}}case"escaped":{const o=await Rn(e,{...s,altBoundary:!0}),i=zo(o,t.floating);return{data:{escapedOffsets:i,escaped:Ho(i)}}}default:return{}}}}};async function xh(n,e){const{placement:t,platform:r,elements:s}=n,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=ot(t),a=vn(t),l=Tt(t)==="y",d=["left","top"].includes(i)?-1:1,u=o&&l?-1:1,f=st(e,n);let{mainAxis:h,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*u,y:h*d}:{x:h*d,y:m*u}}const _h=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:o,placement:i,middlewareData:a}=e,l=await xh(e,n);return i===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}},Ch=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:p=>{let{x:b,y:x}=p;return{x:b,y:x}}},...l}=st(n,e),d={x:t,y:r},u=await Rn(e,l),f=Tt(ot(s)),h=Vs(f);let m=d[h],y=d[f];if(o){const p=h==="y"?"top":"left",b=h==="y"?"bottom":"right",x=m+u[p],w=m-u[b];m=ws(x,m,w)}if(i){const p=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=y+u[p],w=y-u[b];y=ws(x,y,w)}const v=a.fn({...e,[h]:m,[f]:y});return{...v,data:{x:v.x-t,y:v.y-r,enabled:{[h]:o,[f]:i}}}}}},kh=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:o,middlewareData:i}=e,{offset:a=0,mainAxis:l=!0,crossAxis:d=!0}=st(n,e),u={x:t,y:r},f=Tt(s),h=Vs(f);let m=u[h],y=u[f];const v=st(a,e),p=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const w=h==="y"?"height":"width",_=o.reference[h]-o.floating[w]+p.mainAxis,C=o.reference[h]+o.reference[w]-p.mainAxis;m<_?m=_:m>C&&(m=C)}if(d){var b,x;const w=h==="y"?"width":"height",_=["top","left"].includes(ot(s)),C=o.reference[f]-o.floating[w]+(_&&((b=i.offset)==null?void 0:b[f])||0)+(_?0:p.crossAxis),S=o.reference[f]+o.reference[w]+(_?0:((x=i.offset)==null?void 0:x[f])||0)-(_?p.crossAxis:0);y<C?y=C:y>S&&(y=S)}return{[h]:m,[f]:y}}}},Sh=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:o,platform:i,elements:a}=e,{apply:l=()=>{},...d}=st(n,e),u=await Rn(e,d),f=ot(s),h=vn(s),m=Tt(s)==="y",{width:y,height:v}=o.floating;let p,b;f==="top"||f==="bottom"?(p=f,b=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(b=f,p=h==="end"?"top":"bottom");const x=v-u.top-u.bottom,w=y-u.left-u.right,_=kt(v-u[p],x),C=kt(y-u[b],w),S=!e.middlewareData.shift;let I=_,N=C;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(N=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=x),S&&!h){const U=Se(u.left,0),B=Se(u.right,0),L=Se(u.top,0),H=Se(u.bottom,0);m?N=y-2*(U!==0||B!==0?U+B:Se(u.left,u.right)):I=v-2*(L!==0||H!==0?L+H:Se(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:I});const D=await i.getDimensions(a.floating);return y!==D.width||v!==D.height?{reset:{rects:!0}}:{}}}};function Cr(){return typeof window<"u"}function bn(n){return Ra(n)?(n.nodeName||"").toLowerCase():"#document"}function Te(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Qe(n){var e;return(e=(Ra(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Ra(n){return Cr()?n instanceof Node||n instanceof Te(n).Node:!1}function Le(n){return Cr()?n instanceof Element||n instanceof Te(n).Element:!1}function Ye(n){return Cr()?n instanceof HTMLElement||n instanceof Te(n).HTMLElement:!1}function Wo(n){return!Cr()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Te(n).ShadowRoot}function Un(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=$e(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function Th(n){return["table","td","th"].includes(bn(n))}function kr(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Qs(n){const e=Xs(),t=Le(n)?$e(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function Ph(n){let e=Pt(n);for(;Ye(e)&&!fn(e);){if(Qs(e))return e;if(kr(e))return null;e=Pt(e)}return null}function Xs(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function fn(n){return["html","body","#document"].includes(bn(n))}function $e(n){return Te(n).getComputedStyle(n)}function Sr(n){return Le(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Pt(n){if(bn(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Wo(n)&&n.host||Qe(n);return Wo(e)?e.host:e}function Oa(n){const e=Pt(n);return fn(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ye(e)&&Un(e)?e:Oa(e)}function On(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=Oa(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),i=Te(s);if(o){const a=_s(i);return e.concat(i,i.visualViewport||[],Un(s)?s:[],a&&t?On(a):[])}return e.concat(s,On(s,[],t))}function _s(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Ia(n){const e=$e(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ye(n),o=s?n.offsetWidth:t,i=s?n.offsetHeight:r,a=lr(t)!==o||lr(r)!==i;return a&&(t=o,r=i),{width:t,height:r,$:a}}function Zs(n){return Le(n)?n:n.contextElement}function Zt(n){const e=Zs(n);if(!Ye(e))return St(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:o}=Ia(e);let i=(o?lr(t.width):t.width)/r,a=(o?lr(t.height):t.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const Eh=St(0);function La(n){const e=Te(n);return!Xs()||!e.visualViewport?Eh:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Ah(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Te(n)?!1:e}function Ft(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=Zs(n);let i=St(1);e&&(r?Le(r)&&(i=Zt(r)):i=Zt(n));const a=Ah(o,t,r)?La(o):St(0);let l=(s.left+a.x)/i.x,d=(s.top+a.y)/i.y,u=s.width/i.x,f=s.height/i.y;if(o){const h=Te(o),m=r&&Le(r)?Te(r):r;let y=h,v=_s(y);for(;v&&r&&m!==y;){const p=Zt(v),b=v.getBoundingClientRect(),x=$e(v),w=b.left+(v.clientLeft+parseFloat(x.paddingLeft))*p.x,_=b.top+(v.clientTop+parseFloat(x.paddingTop))*p.y;l*=p.x,d*=p.y,u*=p.x,f*=p.y,l+=w,d+=_,y=Te(v),v=_s(y)}}return dr({width:u,height:f,x:l,y:d})}function jh(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const o=s==="fixed",i=Qe(r),a=e?kr(e.floating):!1;if(r===i||a&&o)return t;let l={scrollLeft:0,scrollTop:0},d=St(1);const u=St(0),f=Ye(r);if((f||!f&&!o)&&((bn(r)!=="body"||Un(i))&&(l=Sr(r)),Ye(r))){const h=Ft(r);d=Zt(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-l.scrollLeft*d.x+u.x,y:t.y*d.y-l.scrollTop*d.y+u.y}}function Nh(n){return Array.from(n.getClientRects())}function Cs(n,e){const t=Sr(n).scrollLeft;return e?e.left+t:Ft(Qe(n)).left+t}function Rh(n){const e=Qe(n),t=Sr(n),r=n.ownerDocument.body,s=Se(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Se(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-t.scrollLeft+Cs(n);const a=-t.scrollTop;return $e(r).direction==="rtl"&&(i+=Se(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}function Oh(n,e){const t=Te(n),r=Qe(n),s=t.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const d=Xs();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:a,y:l}}function Ih(n,e){const t=Ft(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,o=Ye(n)?Zt(n):St(1),i=n.clientWidth*o.x,a=n.clientHeight*o.y,l=s*o.x,d=r*o.y;return{width:i,height:a,x:l,y:d}}function Ko(n,e,t){let r;if(e==="viewport")r=Oh(n,t);else if(e==="document")r=Rh(Qe(n));else if(Le(e))r=Ih(e,t);else{const s=La(n);r={...e,x:e.x-s.x,y:e.y-s.y}}return dr(r)}function $a(n,e){const t=Pt(n);return t===e||!Le(t)||fn(t)?!1:$e(t).position==="fixed"||$a(t,e)}function Lh(n,e){const t=e.get(n);if(t)return t;let r=On(n,[],!1).filter(a=>Le(a)&&bn(a)!=="body"),s=null;const o=$e(n).position==="fixed";let i=o?Pt(n):n;for(;Le(i)&&!fn(i);){const a=$e(i),l=Qs(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Un(i)&&!l&&$a(n,i))?r=r.filter(u=>u!==i):s=a,i=Pt(i)}return e.set(n,r),r}function $h(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const i=[...t==="clippingAncestors"?kr(e)?[]:Lh(e,this._c):[].concat(t),r],a=i[0],l=i.reduce((d,u)=>{const f=Ko(e,u,s);return d.top=Se(f.top,d.top),d.right=kt(f.right,d.right),d.bottom=kt(f.bottom,d.bottom),d.left=Se(f.left,d.left),d},Ko(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Dh(n){const{width:e,height:t}=Ia(n);return{width:e,height:t}}function Mh(n,e,t){const r=Ye(e),s=Qe(e),o=t==="fixed",i=Ft(n,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=St(0);if(r||!r&&!o)if((bn(e)!=="body"||Un(s))&&(a=Sr(e)),r){const m=Ft(e,!0,o,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&(l.x=Cs(s));let d=0,u=0;if(s&&!r&&!o){const m=s.getBoundingClientRect();u=m.top+a.scrollTop,d=m.left+a.scrollLeft-Cs(s,m)}const f=i.left+a.scrollLeft-l.x-d,h=i.top+a.scrollTop-l.y-u;return{x:f,y:h,width:i.width,height:i.height}}function es(n){return $e(n).position==="static"}function Go(n,e){if(!Ye(n)||$e(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Qe(n)===t&&(t=t.ownerDocument.body),t}function Da(n,e){const t=Te(n);if(kr(n))return t;if(!Ye(n)){let s=Pt(n);for(;s&&!fn(s);){if(Le(s)&&!es(s))return s;s=Pt(s)}return t}let r=Go(n,e);for(;r&&Th(r)&&es(r);)r=Go(r,e);return r&&fn(r)&&es(r)&&!Qs(r)?t:r||Ph(n)||t}const Fh=async function(n){const e=this.getOffsetParent||Da,t=this.getDimensions,r=await t(n.floating);return{reference:Mh(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Uh(n){return $e(n).direction==="rtl"}const Bh={convertOffsetParentRelativeRectToViewportRelativeRect:jh,getDocumentElement:Qe,getClippingRect:$h,getOffsetParent:Da,getElementRects:Fh,getClientRects:Nh,getDimensions:Dh,getScale:Zt,isElement:Le,isRTL:Uh};function qh(n,e){let t=null,r;const s=Qe(n);function o(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:d,top:u,width:f,height:h}=n.getBoundingClientRect();if(a||e(),!f||!h)return;const m=Yn(u),y=Yn(s.clientWidth-(d+f)),v=Yn(s.clientHeight-(u+h)),p=Yn(d),x={rootMargin:-m+"px "+-y+"px "+-v+"px "+-p+"px",threshold:Se(0,kt(1,l))||1};let w=!0;function _(C){const S=C[0].intersectionRatio;if(S!==l){if(!w)return i();S?i(!1,S):r=setTimeout(()=>{i(!1,1e-7)},1e3)}w=!1}try{t=new IntersectionObserver(_,{...x,root:s.ownerDocument})}catch{t=new IntersectionObserver(_,x)}t.observe(n)}return i(!0),o}function zh(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,d=Zs(n),u=s||o?[...d?On(d):[],...On(e)]:[];u.forEach(b=>{s&&b.addEventListener("scroll",t,{passive:!0}),o&&b.addEventListener("resize",t)});const f=d&&a?qh(d,t):null;let h=-1,m=null;i&&(m=new ResizeObserver(b=>{let[x]=b;x&&x.target===d&&m&&(m.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(e)})),t()}),d&&!l&&m.observe(d),m.observe(e));let y,v=l?Ft(n):null;l&&p();function p(){const b=Ft(n);v&&(b.x!==v.x||b.y!==v.y||b.width!==v.width||b.height!==v.height)&&t(),v=b,y=requestAnimationFrame(p)}return t(),()=>{var b;u.forEach(x=>{s&&x.removeEventListener("scroll",t),o&&x.removeEventListener("resize",t)}),f==null||f(),(b=m)==null||b.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const Hh=_h,Wh=Ch,Kh=bh,Gh=Sh,Vh=wh,Vo=vh,Jh=kh,Yh=(n,e,t)=>{const r=new Map,s={platform:Bh,...t},o={...s.platform,_c:r};return yh(n,e,{...s,platform:o})};var ir=typeof document<"u"?g.useLayoutEffect:g.useEffect;function ur(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!ur(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const o=s[r];if(!(o==="_owner"&&n.$$typeof)&&!ur(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function Ma(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Jo(n,e){const t=Ma(n);return Math.round(e*t)/t}function ts(n){const e=g.useRef(n);return ir(()=>{e.current=n}),e}function Qh(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:d}=n,[u,f]=g.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[h,m]=g.useState(r);ur(h,r)||m(r);const[y,v]=g.useState(null),[p,b]=g.useState(null),x=g.useCallback(P=>{P!==S.current&&(S.current=P,v(P))},[]),w=g.useCallback(P=>{P!==I.current&&(I.current=P,b(P))},[]),_=o||y,C=i||p,S=g.useRef(null),I=g.useRef(null),N=g.useRef(u),D=l!=null,U=ts(l),B=ts(s),L=ts(d),H=g.useCallback(()=>{if(!S.current||!I.current)return;const P={placement:e,strategy:t,middleware:h};B.current&&(P.platform=B.current),Yh(S.current,I.current,P).then($=>{const te={...$,isPositioned:L.current!==!1};R.current&&!ur(N.current,te)&&(N.current=te,Bs.flushSync(()=>{f(te)}))})},[h,e,t,B,L]);ir(()=>{d===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(P=>({...P,isPositioned:!1})))},[d]);const R=g.useRef(!1);ir(()=>(R.current=!0,()=>{R.current=!1}),[]),ir(()=>{if(_&&(S.current=_),C&&(I.current=C),_&&C){if(U.current)return U.current(_,C,H);H()}},[_,C,H,U,D]);const O=g.useMemo(()=>({reference:S,floating:I,setReference:x,setFloating:w}),[x,w]),j=g.useMemo(()=>({reference:_,floating:C}),[_,C]),z=g.useMemo(()=>{const P={position:t,left:0,top:0};if(!j.floating)return P;const $=Jo(j.floating,u.x),te=Jo(j.floating,u.y);return a?{...P,transform:"translate("+$+"px, "+te+"px)",...Ma(j.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:$,top:te}},[t,a,j.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:H,refs:O,elements:j,floatingStyles:z}),[u,H,O,j,z])}const Xh=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?Vo({element:r.current,padding:s}).fn(t):{}:r?Vo({element:r,padding:s}).fn(t):{}}}},Zh=(n,e)=>({...Hh(n),options:[n,e]}),ef=(n,e)=>({...Wh(n),options:[n,e]}),tf=(n,e)=>({...Jh(n),options:[n,e]}),nf=(n,e)=>({...Kh(n),options:[n,e]}),rf=(n,e)=>({...Gh(n),options:[n,e]}),sf=(n,e)=>({...Vh(n),options:[n,e]}),of=(n,e)=>({...Xh(n),options:[n,e]});var af="Arrow",Fa=g.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...o}=n;return c.jsx(ce.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});Fa.displayName=af;var lf=Fa;function cf(n,e=[]){let t=[];function r(o,i){const a=g.createContext(i),l=t.length;t=[...t,i];function d(f){const{scope:h,children:m,...y}=f,v=(h==null?void 0:h[n][l])||a,p=g.useMemo(()=>y,Object.values(y));return c.jsx(v.Provider,{value:p,children:m})}function u(f,h){const m=(h==null?void 0:h[n][l])||a,y=g.useContext(m);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const s=()=>{const o=t.map(i=>g.createContext(i));return function(a){const l=(a==null?void 0:a[n])||o;return g.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[r,df(s,...e)]}function df(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:d})=>{const f=l(o)[`__scope${d}`];return{...a,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return t.scopeName=e.scopeName,t}function uf(n){const[e,t]=g.useState(void 0);return Nn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const l=o.borderBoxSize,d=Array.isArray(l)?l[0]:l;i=d.inlineSize,a=d.blockSize}else i=n.offsetWidth,a=n.offsetHeight;t({width:i,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Ua="Popper",[Ba,qa]=cf(Ua),[Cv,za]=Ba(Ua),Ha="PopperAnchor",Wa=g.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,o=za(Ha,t),i=g.useRef(null),a=Ie(e,i);return g.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:c.jsx(ce.div,{...s,ref:a})});Wa.displayName=Ha;var eo="PopperContent",[hf,ff]=Ba(eo),Ka=g.forwardRef((n,e)=>{var M,q,de,fe,Xe,De;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...v}=n,p=za(eo,t),[b,x]=g.useState(null),w=Ie(e,Ae=>x(Ae)),[_,C]=g.useState(null),S=uf(_),I=(S==null?void 0:S.width)??0,N=(S==null?void 0:S.height)??0,D=r+(o!=="center"?"-"+o:""),U=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},B=Array.isArray(d)?d:[d],L=B.length>0,H={padding:U,boundary:B.filter(mf),altBoundary:L},{refs:R,floatingStyles:O,placement:j,isPositioned:z,middlewareData:P}=Qh({strategy:"fixed",placement:D,whileElementsMounted:(...Ae)=>zh(...Ae,{animationFrame:m==="always"}),elements:{reference:p.anchor},middleware:[Zh({mainAxis:s+N,alignmentAxis:i}),l&&ef({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?tf():void 0,...H}),l&&nf({...H}),rf({...H,apply:({elements:Ae,rects:Me,availableWidth:at,availableHeight:Fe})=>{const{width:Bt,height:Ze}=Me.reference,ue=Ae.floating.style;ue.setProperty("--radix-popper-available-width",`${at}px`),ue.setProperty("--radix-popper-available-height",`${Fe}px`),ue.setProperty("--radix-popper-anchor-width",`${Bt}px`),ue.setProperty("--radix-popper-anchor-height",`${Ze}px`)}}),_&&of({element:_,padding:a}),gf({arrowWidth:I,arrowHeight:N}),h&&sf({strategy:"referenceHidden",...H})]}),[$,te]=Ja(j),F=hn(y);Nn(()=>{z&&(F==null||F())},[z,F]);const Q=(M=P.arrow)==null?void 0:M.x,X=(q=P.arrow)==null?void 0:q.y,W=((de=P.arrow)==null?void 0:de.centerOffset)!==0,[E,A]=g.useState();return Nn(()=>{b&&A(window.getComputedStyle(b).zIndex)},[b]),c.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:z?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:E,"--radix-popper-transform-origin":[(fe=P.transformOrigin)==null?void 0:fe.x,(Xe=P.transformOrigin)==null?void 0:Xe.y].join(" "),...((De=P.hide)==null?void 0:De.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:c.jsx(hf,{scope:t,placedSide:$,onArrowChange:C,arrowX:Q,arrowY:X,shouldHideArrow:W,children:c.jsx(ce.div,{"data-side":$,"data-align":te,...v,ref:w,style:{...v.style,animation:z?void 0:"none"}})})})});Ka.displayName=eo;var Ga="PopperArrow",pf={top:"bottom",right:"left",bottom:"top",left:"right"},Va=g.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,o=ff(Ga,r),i=pf[o.placedSide];return c.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:c.jsx(lf,{...s,ref:t,style:{...s.style,display:"block"}})})});Va.displayName=Ga;function mf(n){return n!==null}var gf=n=>({name:"transformOrigin",options:n,fn(e){var p,b,x;const{placement:t,rects:r,middlewareData:s}=e,i=((p=s.arrow)==null?void 0:p.centerOffset)!==0,a=i?0:n.arrowWidth,l=i?0:n.arrowHeight,[d,u]=Ja(t),f={start:"0%",center:"50%",end:"100%"}[u],h=(((b=s.arrow)==null?void 0:b.x)??0)+a/2,m=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let y="",v="";return d==="bottom"?(y=i?f:`${h}px`,v=`${-l}px`):d==="top"?(y=i?f:`${h}px`,v=`${r.floating.height+l}px`):d==="right"?(y=`${-l}px`,v=i?f:`${m}px`):d==="left"&&(y=`${r.floating.width+l}px`,v=i?f:`${m}px`),{data:{x:y,y:v}}}});function Ja(n){const[e,t="center"]=n.split("-");return[e,t]}var yf=Wa,vf=Ka,bf=Va,[Tr,kv]=Fn("Tooltip",[qa]),to=qa(),Ya="TooltipProvider",wf=700,Yo="tooltip.open",[xf,Qa]=Tr(Ya),Xa=n=>{const{__scopeTooltip:e,delayDuration:t=wf,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=n,[i,a]=g.useState(!0),l=g.useRef(!1),d=g.useRef(0);return g.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),c.jsx(xf,{scope:e,isOpenDelayed:i,delayDuration:t,onOpen:g.useCallback(()=>{window.clearTimeout(d.current),a(!1)},[]),onClose:g.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:o})};Xa.displayName=Ya;var Za="Tooltip",[Sv,Pr]=Tr(Za),ks="TooltipTrigger",_f=g.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Pr(ks,t),o=Qa(ks,t),i=to(t),a=g.useRef(null),l=Ie(e,a,s.onTriggerChange),d=g.useRef(!1),u=g.useRef(!1),f=g.useCallback(()=>d.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),c.jsx(yf,{asChild:!0,...i,children:c.jsx(ce.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:ne(n.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:ne(n.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:ne(n.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ne(n.onFocus,()=>{d.current||s.onOpen()}),onBlur:ne(n.onBlur,s.onClose),onClick:ne(n.onClick,s.onClose)})})});_f.displayName=ks;var Cf="TooltipPortal",[Tv,kf]=Tr(Cf,{forceMount:void 0}),pn="TooltipContent",el=g.forwardRef((n,e)=>{const t=kf(pn,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...o}=n,i=Pr(pn,n.__scopeTooltip);return c.jsx(vr,{present:r||i.open,children:i.disableHoverableContent?c.jsx(tl,{side:s,...o,ref:e}):c.jsx(Sf,{side:s,...o,ref:e})})}),Sf=g.forwardRef((n,e)=>{const t=Pr(pn,n.__scopeTooltip),r=Qa(pn,n.__scopeTooltip),s=g.useRef(null),o=Ie(e,s),[i,a]=g.useState(null),{trigger:l,onClose:d}=t,u=s.current,{onPointerInTransitChange:f}=r,h=g.useCallback(()=>{a(null),f(!1)},[f]),m=g.useCallback((y,v)=>{const p=y.currentTarget,b={x:y.clientX,y:y.clientY},x=Af(b,p.getBoundingClientRect()),w=jf(b,x),_=Nf(v.getBoundingClientRect()),C=Of([...w,..._]);a(C),f(!0)},[f]);return g.useEffect(()=>()=>h(),[h]),g.useEffect(()=>{if(l&&u){const y=p=>m(p,u),v=p=>m(p,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",v)}}},[l,u,m,h]),g.useEffect(()=>{if(i){const y=v=>{const p=v.target,b={x:v.clientX,y:v.clientY},x=(l==null?void 0:l.contains(p))||(u==null?void 0:u.contains(p)),w=!Rf(b,i);x?h():w&&(h(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,i,d,h]),c.jsx(tl,{...n,ref:o})}),[Tf,Pf]=Tr(Za,{isInside:!1}),tl=g.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...a}=n,l=Pr(pn,t),d=to(t),{onClose:u}=l;return g.useEffect(()=>(document.addEventListener(Yo,u),()=>document.removeEventListener(Yo,u)),[u]),g.useEffect(()=>{if(l.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),c.jsx(td,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:c.jsxs(vf,{"data-state":l.stateAttribute,...d,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(nd,{children:r}),c.jsx(Tf,{scope:t,isInside:!0,children:c.jsx(Od,{id:l.contentId,role:"tooltip",children:s||r})})]})})});el.displayName=pn;var nl="TooltipArrow",Ef=g.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=to(t);return Pf(nl,t).isInside?null:c.jsx(bf,{...s,...r,ref:e})});Ef.displayName=nl;function Af(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),o=Math.abs(e.left-n.x);switch(Math.min(t,r,s,o)){case o:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function jf(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function Nf(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function Rf(n,e){const{x:t,y:r}=n;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const a=e[o].x,l=e[o].y,d=e[i].x,u=e[i].y;l>r!=u>r&&t<(d-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function Of(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),If(e)}function If(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const o=e[e.length-1],i=e[e.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Lf=Xa,rl=el;const $f=Lf,Df=g.forwardRef(({className:n,sideOffset:e=4,...t},r)=>c.jsx(rl,{ref:r,sideOffset:e,className:ee("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));Df.displayName=rl.displayName;var Er=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ar=typeof window>"u"||"Deno"in globalThis;function Ne(){}function Mf(n,e){return typeof n=="function"?n(e):n}function Ff(n){return typeof n=="number"&&n>=0&&n!==1/0}function Uf(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Qo(n,e){return typeof n=="function"?n(e):n}function Bf(n,e){return typeof n=="function"?n(e):n}function Xo(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:o,queryKey:i,stale:a}=n;if(i){if(r){if(e.queryHash!==no(i,e.options))return!1}else if(!Ln(e.queryKey,i))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||o&&!o(e))}function Zo(n,e){const{exact:t,status:r,predicate:s,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(t){if(In(e.options.mutationKey)!==In(o))return!1}else if(!Ln(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function no(n,e){return((e==null?void 0:e.queryKeyHashFn)||In)(n)}function In(n){return JSON.stringify(n,(e,t)=>Ss(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Ln(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Ln(n[t],e[t])):!1}function sl(n,e){if(n===e)return n;const t=ei(n)&&ei(e);if(t||Ss(n)&&Ss(e)){const r=t?n:Object.keys(n),s=r.length,o=t?e:Object.keys(e),i=o.length,a=t?[]:{};let l=0;for(let d=0;d<i;d++){const u=t?d:o[d];(!t&&r.includes(u)||t)&&n[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=sl(n[u],e[u]),a[u]===n[u]&&n[u]!==void 0&&l++)}return s===i&&l===s?n:a}return e}function ei(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Ss(n){if(!ti(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!ti(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function ti(n){return Object.prototype.toString.call(n)==="[object Object]"}function qf(n){return new Promise(e=>{setTimeout(e,n)})}function zf(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?sl(n,e):e}function Hf(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Wf(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var ro=Symbol();function ol(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===ro?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Lt,vt,nn,Ii,Kf=(Ii=class extends Er{constructor(){super();Z(this,Lt);Z(this,vt);Z(this,nn);J(this,nn,e=>{if(!Ar&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){k(this,vt)||this.setEventListener(k(this,nn))}onUnsubscribe(){var e;this.hasListeners()||((e=k(this,vt))==null||e.call(this),J(this,vt,void 0))}setEventListener(e){var t;J(this,nn,e),(t=k(this,vt))==null||t.call(this),J(this,vt,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){k(this,Lt)!==e&&(J(this,Lt,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof k(this,Lt)=="boolean"?k(this,Lt):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Lt=new WeakMap,vt=new WeakMap,nn=new WeakMap,Ii),il=new Kf,rn,bt,sn,Li,Gf=(Li=class extends Er{constructor(){super();Z(this,rn,!0);Z(this,bt);Z(this,sn);J(this,sn,e=>{if(!Ar&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){k(this,bt)||this.setEventListener(k(this,sn))}onUnsubscribe(){var e;this.hasListeners()||((e=k(this,bt))==null||e.call(this),J(this,bt,void 0))}setEventListener(e){var t;J(this,sn,e),(t=k(this,bt))==null||t.call(this),J(this,bt,e(this.setOnline.bind(this)))}setOnline(e){k(this,rn)!==e&&(J(this,rn,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return k(this,rn)}},rn=new WeakMap,bt=new WeakMap,sn=new WeakMap,Li),hr=new Gf;function Vf(){let n,e;const t=new Promise((s,o)=>{n=s,e=o});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function Jf(n){return Math.min(1e3*2**n,3e4)}function al(n){return(n??"online")==="online"?hr.isOnline():!0}var ll=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function ns(n){return n instanceof ll}function cl(n){let e=!1,t=0,r=!1,s;const o=Vf(),i=v=>{var p;r||(h(new ll(v)),(p=n.abort)==null||p.call(n))},a=()=>{e=!0},l=()=>{e=!1},d=()=>il.isFocused()&&(n.networkMode==="always"||hr.isOnline())&&n.canRun(),u=()=>al(n.networkMode)&&n.canRun(),f=v=>{var p;r||(r=!0,(p=n.onSuccess)==null||p.call(n,v),s==null||s(),o.resolve(v))},h=v=>{var p;r||(r=!0,(p=n.onError)==null||p.call(n,v),s==null||s(),o.reject(v))},m=()=>new Promise(v=>{var p;s=b=>{(r||d())&&v(b)},(p=n.onPause)==null||p.call(n)}).then(()=>{var v;s=void 0,r||(v=n.onContinue)==null||v.call(n)}),y=()=>{if(r)return;let v;const p=t===0?n.initialPromise:void 0;try{v=p??n.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(f).catch(b=>{var S;if(r)return;const x=n.retry??(Ar?0:3),w=n.retryDelay??Jf,_=typeof w=="function"?w(t,b):w,C=x===!0||typeof x=="number"&&t<x||typeof x=="function"&&x(t,b);if(e||!C){h(b);return}t++,(S=n.onFail)==null||S.call(n,t,b),qf(_).then(()=>d()?void 0:m()).then(()=>{e?h(b):y()})})};return{promise:o,cancel:i,continue:()=>(s==null||s(),o),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?y():m().then(y),o)}}function Yf(){let n=[],e=0,t=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const o=a=>{e?n.push(a):s(()=>{t(a)})},i=()=>{const a=n;n=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||i()}return l},batchCalls:a=>(...l)=>{o(()=>{a(...l)})},schedule:o,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var ve=Yf(),$t,$i,dl=($i=class{constructor(){Z(this,$t)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ff(this.gcTime)&&J(this,$t,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Ar?1/0:5*60*1e3))}clearGcTimeout(){k(this,$t)&&(clearTimeout(k(this,$t)),J(this,$t,void 0))}},$t=new WeakMap,$i),on,an,Pe,me,Dn,Dt,Re,tt,Di,Qf=(Di=class extends dl{constructor(e){super();Z(this,Re);Z(this,on);Z(this,an);Z(this,Pe);Z(this,me);Z(this,Dn);Z(this,Dt);J(this,Dt,!1),J(this,Dn,e.defaultOptions),this.setOptions(e.options),this.observers=[],J(this,Pe,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,J(this,on,Zf(this.options)),this.state=e.state??k(this,on),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=k(this,me))==null?void 0:e.promise}setOptions(e){this.options={...k(this,Dn),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&k(this,Pe).remove(this)}setData(e,t){const r=zf(this.state.data,e,this.options);return pe(this,Re,tt).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){pe(this,Re,tt).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=k(this,me))==null?void 0:r.promise;return(s=k(this,me))==null||s.cancel(e),t?t.then(Ne).catch(Ne):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(k(this,on))}isActive(){return this.observers.some(e=>Bf(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ro||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Uf(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=k(this,me))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=k(this,me))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),k(this,Pe).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(k(this,me)&&(k(this,Dt)?k(this,me).cancel({revert:!0}):k(this,me).cancelRetry()),this.scheduleGc()),k(this,Pe).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pe(this,Re,tt).call(this,{type:"invalidate"})}fetch(e,t){var l,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(k(this,me))return k(this,me).continueRetry(),k(this,me).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(J(this,Dt,!0),r.signal)})},o=()=>{const f=ol(this.options,t),h={queryKey:this.queryKey,meta:this.meta};return s(h),J(this,Dt,!1),this.options.persister?this.options.persister(f,h,this):f(h)},i={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};s(i),(l=this.options.behavior)==null||l.onFetch(i,this),J(this,an,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=i.fetchOptions)==null?void 0:d.meta))&&pe(this,Re,tt).call(this,{type:"fetch",meta:(u=i.fetchOptions)==null?void 0:u.meta});const a=f=>{var h,m,y,v;ns(f)&&f.silent||pe(this,Re,tt).call(this,{type:"error",error:f}),ns(f)||((m=(h=k(this,Pe).config).onError)==null||m.call(h,f,this),(v=(y=k(this,Pe).config).onSettled)==null||v.call(y,this.state.data,f,this)),this.scheduleGc()};return J(this,me,cl({initialPromise:t==null?void 0:t.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var h,m,y,v;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(p){a(p);return}(m=(h=k(this,Pe).config).onSuccess)==null||m.call(h,f,this),(v=(y=k(this,Pe).config).onSettled)==null||v.call(y,f,this.state.error,this),this.scheduleGc()},onError:a,onFail:(f,h)=>{pe(this,Re,tt).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{pe(this,Re,tt).call(this,{type:"pause"})},onContinue:()=>{pe(this,Re,tt).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),k(this,me).start()}},on=new WeakMap,an=new WeakMap,Pe=new WeakMap,me=new WeakMap,Dn=new WeakMap,Dt=new WeakMap,Re=new WeakSet,tt=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Xf(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return ns(s)&&s.revert&&k(this,an)?{...k(this,an),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),ve.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),k(this,Pe).notify({query:this,type:"updated",action:e})})},Di);function Xf(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:al(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Zf(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var qe,Mi,ep=(Mi=class extends Er{constructor(e={}){super();Z(this,qe);this.config=e,J(this,qe,new Map)}build(e,t,r){const s=t.queryKey,o=t.queryHash??no(s,t);let i=this.get(o);return i||(i=new Qf({cache:this,queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){k(this,qe).has(e.queryHash)||(k(this,qe).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=k(this,qe).get(e.queryHash);t&&(e.destroy(),t===e&&k(this,qe).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ve.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return k(this,qe).get(e)}getAll(){return[...k(this,qe).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Xo(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Xo(e,r)):t}notify(e){ve.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ve.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ve.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},qe=new WeakMap,Mi),ze,ye,Mt,He,ut,Fi,tp=(Fi=class extends dl{constructor(e){super();Z(this,He);Z(this,ze);Z(this,ye);Z(this,Mt);this.mutationId=e.mutationId,J(this,ye,e.mutationCache),J(this,ze,[]),this.state=e.state||np(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){k(this,ze).includes(e)||(k(this,ze).push(e),this.clearGcTimeout(),k(this,ye).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){J(this,ze,k(this,ze).filter(t=>t!==e)),this.scheduleGc(),k(this,ye).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){k(this,ze).length||(this.state.status==="pending"?this.scheduleGc():k(this,ye).remove(this))}continue(){var e;return((e=k(this,Mt))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,i,a,l,d,u,f,h,m,y,v,p,b,x,w,_,C,S,I;J(this,Mt,cl({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,D)=>{pe(this,He,ut).call(this,{type:"failed",failureCount:N,error:D})},onPause:()=>{pe(this,He,ut).call(this,{type:"pause"})},onContinue:()=>{pe(this,He,ut).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,ye).canRun(this)}));const t=this.state.status==="pending",r=!k(this,Mt).canStart();try{if(!t){pe(this,He,ut).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(s=k(this,ye).config).onMutate)==null?void 0:o.call(s,e,this));const D=await((a=(i=this.options).onMutate)==null?void 0:a.call(i,e));D!==this.state.context&&pe(this,He,ut).call(this,{type:"pending",context:D,variables:e,isPaused:r})}const N=await k(this,Mt).start();return await((d=(l=k(this,ye).config).onSuccess)==null?void 0:d.call(l,N,e,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,N,e,this.state.context)),await((m=(h=k(this,ye).config).onSettled)==null?void 0:m.call(h,N,null,this.state.variables,this.state.context,this)),await((v=(y=this.options).onSettled)==null?void 0:v.call(y,N,null,e,this.state.context)),pe(this,He,ut).call(this,{type:"success",data:N}),N}catch(N){try{throw await((b=(p=k(this,ye).config).onError)==null?void 0:b.call(p,N,e,this.state.context,this)),await((w=(x=this.options).onError)==null?void 0:w.call(x,N,e,this.state.context)),await((C=(_=k(this,ye).config).onSettled)==null?void 0:C.call(_,void 0,N,this.state.variables,this.state.context,this)),await((I=(S=this.options).onSettled)==null?void 0:I.call(S,void 0,N,e,this.state.context)),N}finally{pe(this,He,ut).call(this,{type:"error",error:N})}}finally{k(this,ye).runNext(this)}}},ze=new WeakMap,ye=new WeakMap,Mt=new WeakMap,He=new WeakSet,ut=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ve.batch(()=>{k(this,ze).forEach(r=>{r.onMutationUpdate(e)}),k(this,ye).notify({mutation:this,type:"updated",action:e})})},Fi);function np(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _e,Mn,Ui,rp=(Ui=class extends Er{constructor(e={}){super();Z(this,_e);Z(this,Mn);this.config=e,J(this,_e,new Map),J(this,Mn,Date.now())}build(e,t,r){const s=new tp({mutationCache:this,mutationId:++Kn(this,Mn)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){const t=Qn(e),r=k(this,_e).get(t)??[];r.push(e),k(this,_e).set(t,r),this.notify({type:"added",mutation:e})}remove(e){var r;const t=Qn(e);if(k(this,_e).has(t)){const s=(r=k(this,_e).get(t))==null?void 0:r.filter(o=>o!==e);s&&(s.length===0?k(this,_e).delete(t):k(this,_e).set(t,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const t=(r=k(this,_e).get(Qn(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!t||t===e}runNext(e){var r;const t=(r=k(this,_e).get(Qn(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){ve.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...k(this,_e).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Zo(t,r))}findAll(e={}){return this.getAll().filter(t=>Zo(e,t))}notify(e){ve.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ve.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ne))))}},_e=new WeakMap,Mn=new WeakMap,Ui);function Qn(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function ni(n){return{onFetch:(e,t)=>{var u,f,h,m,y;const r=e.options,s=(h=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,o=((m=e.state.data)==null?void 0:m.pages)||[],i=((y=e.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const d=async()=>{let v=!1;const p=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},b=ol(e.options,e.fetchOptions),x=async(w,_,C)=>{if(v)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const S={queryKey:e.queryKey,pageParam:_,direction:C?"backward":"forward",meta:e.options.meta};p(S);const I=await b(S),{maxPages:N}=e.options,D=C?Wf:Hf;return{pages:D(w.pages,I,N),pageParams:D(w.pageParams,_,N)}};if(s&&o.length){const w=s==="backward",_=w?sp:ri,C={pages:o,pageParams:i},S=_(r,C);a=await x(C,S,w)}else{const w=n??o.length;do{const _=l===0?i[0]??r.initialPageParam:ri(r,a);if(l>0&&_==null)break;a=await x(a,_),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var v,p;return(p=(v=e.options).persister)==null?void 0:p.call(v,d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function ri(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function sp(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var le,wt,xt,ln,cn,_t,dn,un,Bi,op=(Bi=class{constructor(n={}){Z(this,le);Z(this,wt);Z(this,xt);Z(this,ln);Z(this,cn);Z(this,_t);Z(this,dn);Z(this,un);J(this,le,n.queryCache||new ep),J(this,wt,n.mutationCache||new rp),J(this,xt,n.defaultOptions||{}),J(this,ln,new Map),J(this,cn,new Map),J(this,_t,0)}mount(){Kn(this,_t)._++,k(this,_t)===1&&(J(this,dn,il.subscribe(async n=>{n&&(await this.resumePausedMutations(),k(this,le).onFocus())})),J(this,un,hr.subscribe(async n=>{n&&(await this.resumePausedMutations(),k(this,le).onOnline())})))}unmount(){var n,e;Kn(this,_t)._--,k(this,_t)===0&&((n=k(this,dn))==null||n.call(this),J(this,dn,void 0),(e=k(this,un))==null||e.call(this),J(this,un,void 0))}isFetching(n){return k(this,le).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return k(this,wt).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=k(this,le).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),r=k(this,le).build(this,t);return n.revalidateIfStale&&r.isStaleByTime(Qo(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return k(this,le).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=k(this,le).get(r.queryHash),o=s==null?void 0:s.state.data,i=Mf(e,o);if(i!==void 0)return k(this,le).build(this,r).setData(i,{...t,manual:!0})}setQueriesData(n,e,t){return ve.batch(()=>k(this,le).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=k(this,le).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=k(this,le);ve.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=k(this,le),r={type:"active",...n};return ve.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},r=ve.batch(()=>k(this,le).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Ne).catch(Ne)}invalidateQueries(n={},e={}){return ve.batch(()=>{if(k(this,le).findAll(n).forEach(r=>{r.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=ve.batch(()=>k(this,le).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,t);return t.throwOnError||(o=o.catch(Ne)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Ne)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=k(this,le).build(this,e);return t.isStaleByTime(Qo(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Ne).catch(Ne)}fetchInfiniteQuery(n){return n.behavior=ni(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Ne).catch(Ne)}ensureInfiniteQueryData(n){return n.behavior=ni(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return hr.isOnline()?k(this,wt).resumePausedMutations():Promise.resolve()}getQueryCache(){return k(this,le)}getMutationCache(){return k(this,wt)}getDefaultOptions(){return k(this,xt)}setDefaultOptions(n){J(this,xt,n)}setQueryDefaults(n,e){k(this,ln).set(In(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...k(this,ln).values()];let t={};return e.forEach(r=>{Ln(n,r.queryKey)&&(t={...t,...r.defaultOptions})}),t}setMutationDefaults(n,e){k(this,cn).set(In(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...k(this,cn).values()];let t={};return e.forEach(r=>{Ln(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...k(this,xt).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=no(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===ro&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...k(this,xt).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){k(this,le).clear(),k(this,wt).clear()}},le=new WeakMap,wt=new WeakMap,xt=new WeakMap,ln=new WeakMap,cn=new WeakMap,_t=new WeakMap,dn=new WeakMap,un=new WeakMap,Bi),ip=g.createContext(void 0),ap=({client:n,children:e})=>(g.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),c.jsx(ip.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fr(){return fr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fr.apply(this,arguments)}var Ct;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ct||(Ct={}));const si="popstate";function lp(n){n===void 0&&(n={});function e(r,s){let{pathname:o,search:i,hash:a}=r.location;return Ts("",{pathname:o,search:i,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:hl(s)}return dp(e,t,null,n)}function xe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ul(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cp(){return Math.random().toString(36).substr(2,8)}function oi(n,e){return{usr:n.state,key:n.key,idx:e}}function Ts(n,e,t,r){return t===void 0&&(t=null),fr({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?jr(e):e,{state:t,key:e&&e.key||r||cp()})}function hl(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function jr(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function dp(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,a=Ct.Pop,l=null,d=u();d==null&&(d=0,i.replaceState(fr({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function f(){a=Ct.Pop;let p=u(),b=p==null?null:p-d;d=p,l&&l({action:a,location:v.location,delta:b})}function h(p,b){a=Ct.Push;let x=Ts(v.location,p,b);d=u()+1;let w=oi(x,d),_=v.createHref(x);try{i.pushState(w,"",_)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(_)}o&&l&&l({action:a,location:v.location,delta:1})}function m(p,b){a=Ct.Replace;let x=Ts(v.location,p,b);d=u();let w=oi(x,d),_=v.createHref(x);i.replaceState(w,"",_),o&&l&&l({action:a,location:v.location,delta:0})}function y(p){let b=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof p=="string"?p:hl(p);return x=x.replace(/ $/,"%20"),xe(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let v={get action(){return a},get location(){return n(s,i)},listen(p){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(si,f),l=p,()=>{s.removeEventListener(si,f),l=null}},createHref(p){return e(s,p)},createURL:y,encodeLocation(p){let b=y(p);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:m,go(p){return i.go(p)}};return v}var ii;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ii||(ii={}));function up(n,e,t){return t===void 0&&(t="/"),hp(n,e,t,!1)}function hp(n,e,t,r){let s=typeof e=="string"?jr(e):e,o=ml(s.pathname||"/",t);if(o==null)return null;let i=fl(n);fp(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let d=kp(o);a=_p(i[l],d,r)}return a}function fl(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(o,i,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};l.relativePath.startsWith("/")&&(xe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let d=en([r,l.relativePath]),u=t.concat(l);o.children&&o.children.length>0&&(xe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),fl(o.children,e,u,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:wp(d,o.index),routesMeta:u})};return n.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let l of pl(o.path))s(o,i,l)}),e}function pl(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=pl(r.join("/")),a=[];return a.push(...i.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...i),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function fp(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:xp(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const pp=/^:[\w-]+$/,mp=3,gp=2,yp=1,vp=10,bp=-2,ai=n=>n==="*";function wp(n,e){let t=n.split("/"),r=t.length;return t.some(ai)&&(r+=bp),e&&(r+=gp),t.filter(s=>!ai(s)).reduce((s,o)=>s+(pp.test(o)?mp:o===""?yp:vp),r)}function xp(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function _p(n,e,t){let{routesMeta:r}=n,s={},o="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],d=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",f=li({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},u),h=l.route;if(!f&&d&&t&&!r[r.length-1].route.index&&(f=li({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:en([o,f.pathname]),pathnameBase:Sp(en([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=en([o,f.pathnameBase]))}return i}function li(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Cp(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((d,u,f)=>{let{paramName:h,isOptional:m}=u;if(h==="*"){let v=a[f]||"";i=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[f];return m&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:n}}function Cp(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ul(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function kp(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ul(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function ml(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const en=n=>n.join("/").replace(/\/\/+/g,"/"),Sp=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/");function Tp(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const gl=["post","put","patch","delete"];new Set(gl);const Pp=["get",...gl];new Set(Pp);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pr(){return pr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pr.apply(this,arguments)}const Ep=g.createContext(null),Ap=g.createContext(null),yl=g.createContext(null),Nr=g.createContext(null),Rr=g.createContext({outlet:null,matches:[],isDataRoute:!1}),vl=g.createContext(null);function so(){return g.useContext(Nr)!=null}function bl(){return so()||xe(!1),g.useContext(Nr).location}function jp(n,e){return Np(n,e)}function Np(n,e,t,r){so()||xe(!1);let{navigator:s}=g.useContext(yl),{matches:o}=g.useContext(Rr),i=o[o.length-1],a=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let d=bl(),u;if(e){var f;let p=typeof e=="string"?jr(e):e;l==="/"||(f=p.pathname)!=null&&f.startsWith(l)||xe(!1),u=p}else u=d;let h=u.pathname||"/",m=h;if(l!=="/"){let p=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(p.length).join("/")}let y=up(n,{pathname:m}),v=$p(y&&y.map(p=>Object.assign({},p,{params:Object.assign({},a,p.params),pathname:en([l,s.encodeLocation?s.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?l:en([l,s.encodeLocation?s.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),o,t,r);return e&&v?g.createElement(Nr.Provider,{value:{location:pr({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ct.Pop}},v):v}function Rp(){let n=Up(),e=Tp(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),t?g.createElement("pre",{style:s},t):null,null)}const Op=g.createElement(Rp,null);class Ip extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(Rr.Provider,{value:this.props.routeContext},g.createElement(vl.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Lp(n){let{routeContext:e,match:t,children:r}=n,s=g.useContext(Ep);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Rr.Provider,{value:e},r)}function $p(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let u=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||xe(!1),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,d=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:h,errors:m}=t,y=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,f,h)=>{let m,y=!1,v=null,p=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||Op,l&&(d<0&&h===0?(y=!0,p=null):d===h&&(y=!0,p=f.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,h+1)),x=()=>{let w;return m?w=v:y?w=p:f.route.Component?w=g.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=u,g.createElement(Lp,{match:f,routeContext:{outlet:u,matches:b,isDataRoute:t!=null},children:w})};return t&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?g.createElement(Ip,{location:t.location,revalidation:t.revalidation,component:v,error:m,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var Ps=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Ps||{});function Dp(n){let e=g.useContext(Ap);return e||xe(!1),e}function Mp(n){let e=g.useContext(Rr);return e||xe(!1),e}function Fp(n){let e=Mp(),t=e.matches[e.matches.length-1];return t.route.id||xe(!1),t.route.id}function Up(){var n;let e=g.useContext(vl),t=Dp(Ps.UseRouteError),r=Fp(Ps.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Es(n){xe(!1)}function Bp(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Ct.Pop,navigator:o,static:i=!1,future:a}=n;so()&&xe(!1);let l=e.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:l,navigator:o,static:i,future:pr({v7_relativeSplatPath:!1},a)}),[l,a,o,i]);typeof r=="string"&&(r=jr(r));let{pathname:u="/",search:f="",hash:h="",state:m=null,key:y="default"}=r,v=g.useMemo(()=>{let p=ml(u,l);return p==null?null:{location:{pathname:p,search:f,hash:h,state:m,key:y},navigationType:s}},[l,u,f,h,m,y,s]);return v==null?null:g.createElement(yl.Provider,{value:d},g.createElement(Nr.Provider,{children:t,value:v}))}function qp(n){let{children:e,location:t}=n;return jp(As(e),t)}new Promise(()=>{});function As(n,e){e===void 0&&(e=[]);let t=[];return g.Children.forEach(n,(r,s)=>{if(!g.isValidElement(r))return;let o=[...e,s];if(r.type===g.Fragment){t.push.apply(t,As(r.props.children,o));return}r.type!==Es&&xe(!1),!r.props.index||!r.props.children||xe(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=As(r.props.children,o)),t.push(i)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const zp="6";try{window.__reactRouterVersion=zp}catch{}const Hp="startTransition",ci=_d[Hp];function Wp(n){let{basename:e,children:t,future:r,window:s}=n,o=g.useRef();o.current==null&&(o.current=lp({window:s,v5Compat:!0}));let i=o.current,[a,l]=g.useState({action:i.action,location:i.location}),{v7_startTransition:d}=r||{},u=g.useCallback(f=>{d&&ci?ci(()=>l(f)):l(f)},[l,d]);return g.useLayoutEffect(()=>i.listen(u),[i,u]),g.createElement(Bp,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i,future:r})}var di;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(di||(di={}));var ui;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(ui||(ui={}));const Kp=Ks("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ae=g.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},o)=>{const i=r?fs:"button";return c.jsx(i,{className:ee(Kp({variant:e,size:t,className:n})),ref:o,...s})});ae.displayName="Button";const Ke=g.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Ke.displayName="Card";const Ge=g.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("flex flex-col space-y-1.5 p-6",n),...e}));Ge.displayName="CardHeader";const Ve=g.forwardRef(({className:n,...e},t)=>c.jsx("h3",{ref:t,className:ee("text-2xl font-semibold leading-none tracking-tight",n),...e}));Ve.displayName="CardTitle";const Jt=g.forwardRef(({className:n,...e},t)=>c.jsx("p",{ref:t,className:ee("text-sm text-muted-foreground",n),...e}));Jt.displayName="CardDescription";const Je=g.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("p-6 pt-0",n),...e}));Je.displayName="CardContent";const Yt=g.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("flex items-center p-6 pt-0",n),...e}));Yt.displayName="CardFooter";const Nt=[{id:1,title:"Python Fundamentals",description:"Learn the basics of Python programming"},{id:2,title:"Control Flow & Logic",description:"Master decision making and program flow in Python"},{id:3,title:"Functions & Modules",description:"Create reusable code and organize your programs"},{id:4,title:"Data Structures",description:"Work with complex data using Python's built-in structures"},{id:5,title:"File & Data Handling",description:"Read, write, and process data from various sources"},{id:6,title:"Object-Oriented Programming",description:"Design programs using classes and objects"},{id:7,title:"Error Handling & Debugging",description:"Write robust code that handles exceptions gracefully"},{id:8,title:"Libraries & Packages",description:"Leverage Python's powerful ecosystem of libraries"},{id:9,title:"Data Science Basics",description:"Analyze and visualize data with Python"},{id:10,title:"Advanced Python Modules",description:"Explore web scraping, machine learning, and more"}],We=[{id:"1-1",chapterId:1,title:"Your First Print Statement",description:"Learn to make Python speak with the print() function",difficulty:1,content:{introduction:`Welcome to Python! Every programming journey begins with a simple "Hello, World!" Let's make your computer talk.`,concept:"The print() function is Python's way of displaying text on the screen. Think of it as Python's voice - whatever you put inside the parentheses, Python will say out loud.",example:{code:'print("Hello, World!")',explanation:'This line tells Python to display the text "Hello, World!" on the screen. Notice the quotation marks - they tell Python this is text, not a command.',output:"Hello, World!"},exercise:{instruction:'Try changing the message to say "Hello, Python!" instead.',starterCode:'print("Hello, World!")',expectedOutput:"Hello, Python!"}}},{id:"1-2",chapterId:1,title:"Using Variables",description:"Store information in variables like containers",difficulty:1,content:{introduction:'Variables are like labeled boxes where you can store information. Just like you might write "goals = 24" on a box to remember how many goals your team scored.',concept:"Variables let you store data and use it later. You create a variable by giving it a name and assigning it a value with the = sign.",example:{code:`goals = 24
print(goals)`,explanation:'First we create a variable called "goals" and store the number 24 in it. Then we print the value stored in that variable.',output:"24"},exercise:{instruction:'Create a variable called "score" with the value 42, then print it.',starterCode:`# Create your variable here
# Print it here`,expectedOutput:"42"}}},{id:"1-3",chapterId:1,title:"Numbers and Math",description:"Let Python be your calculator",difficulty:1,content:{introduction:"Python is great at math! You can use it like a super-powered calculator to add, subtract, multiply, and divide.",concept:"Python uses familiar math symbols: + for addition, - for subtraction, * for multiplication, and / for division.",example:{code:`result = 10 + 5
print(result)`,explanation:'Python calculates 10 + 5 = 15, stores it in the variable "result", then prints the answer.',output:"15"},exercise:{instruction:'Calculate 7 * 6 and store the result in a variable called "answer", then print it.',starterCode:`# Calculate 7 * 6 here
# Print the answer`,expectedOutput:"42"}}},{id:"1-4",chapterId:1,title:"Working with Text",description:"Combine and manipulate text strings",difficulty:2,content:{introduction:'Text in Python is called a "string". You can combine strings, repeat them, and do all sorts of fun things with text.',concept:'You can join strings together using the + operator, just like adding numbers. This is called "concatenation".',example:{code:`name = "Python"
greeting = "Hello, " + name + "!"
print(greeting)`,explanation:'We combine "Hello, " with the name "Python" and "!" to create a personalized greeting.',output:"Hello, Python!"},exercise:{instruction:'Create a variable "language" with value "Python" and combine it with "I love " to make "I love Python".',starterCode:`# Create your variables and combine them
# Print the result`,expectedOutput:"I love Python"}}},{id:"1-5",chapterId:1,title:"Getting User Input",description:"Make your programs interactive",difficulty:2,content:{introduction:"Real programs interact with users! The input() function lets you ask questions and get answers from whoever is using your program.",concept:"The input() function pauses your program and waits for the user to type something. Whatever they type gets stored as text.",example:{code:`name = input("What's your name? ")
print("Nice to meet you, " + name + "!")`,explanation:'This asks the user for their name, stores it in the "name" variable, then creates a personalized greeting.',output:`What's your name? [User types: Alice]
Nice to meet you, Alice!`},exercise:{instruction:`Ask the user "What's your favorite color?" and respond with "That's a beautiful color!"`,starterCode:`# Ask for favorite color
# Print a nice response`,expectedOutput:`What's your favorite color? [User input]
That's a beautiful color!`}}},{id:"1-6",chapterId:1,title:"Making Decisions with If",description:"Teach your program to make choices",difficulty:2,content:{introduction:'Programs need to make decisions! The "if" statement lets your program choose different actions based on conditions, just like you decide whether to bring an umbrella based on the weather.',concept:"An if statement checks if something is true. If it is, Python runs the code that's indented underneath. If not, it skips that code.",example:{code:`age = 18
if age >= 18:
    print("You can vote!")
else:
    print("Not old enough yet.")`,explanation:'This checks if the age is 18 or older. Since 18 >= 18 is true, it prints "You can vote!"',output:"You can vote!"},exercise:{instruction:`Create a variable "temperature" set to 75. If it's over 70, print "It's warm!", otherwise print "It's cool!"`,starterCode:`# Set temperature to 75
# Add your if statement`,expectedOutput:"It's warm!"}}},{id:"1-7",chapterId:1,title:"Lists - Collections of Data",description:"Store multiple items in one place",difficulty:3,content:{introduction:"Sometimes you need to store more than one piece of information. Lists are like containers that can hold multiple items in order.",concept:"Lists are created with square brackets and items separated by commas. You can access individual items using their position (starting from 0).",example:{code:`fruits = ["apple", "banana", "orange"]
print(fruits[0])
print(fruits[1])`,explanation:"This creates a list of fruits. fruits[0] gets the first item (apple), and fruits[1] gets the second item (banana).",output:`apple
banana`},exercise:{instruction:'Create a list called "colors" with "red", "blue", "green" and print the second color.',starterCode:`# Create your list of colors
# Print the second color`,expectedOutput:"blue"}}},{id:"1-8",chapterId:1,title:"Loops - Repeating Actions",description:"Let Python do repetitive tasks for you",difficulty:3,content:{introduction:"Loops are one of programming's superpowers! Instead of writing the same code over and over, you can tell Python to repeat actions automatically.",concept:`A "for" loop repeats code for each item in a list or range. It's like saying "for each thing in this collection, do this action".`,example:{code:`for i in range(3):
    print("Hello number", i)`,explanation:"This loop runs 3 times (0, 1, 2) and prints a message each time with the current number.",output:`Hello number 0
Hello number 1
Hello number 2`},exercise:{instruction:'Create a loop that prints "Python is fun!" 3 times.',starterCode:"# Create your loop here",expectedOutput:`Python is fun!
Python is fun!
Python is fun!`}}},{id:"1-9",chapterId:1,title:"Functions - Reusable Code",description:"Create your own commands that Python can follow",difficulty:4,content:{introduction:"Functions are like creating your own mini-programs within your program. Once you define a function, you can use it over and over again!",concept:'Functions are defined with "def" followed by a name and parentheses. They can take inputs (parameters) and give back outputs (return values).',example:{code:`def greet(name):
    return "Hello, " + name + "!"

message = greet("Alice")
print(message)`,explanation:'This creates a function called "greet" that takes a name and returns a greeting. We call it with "Alice" and print the result.',output:"Hello, Alice!"},exercise:{instruction:'Create a function called "double" that takes a number and returns it multiplied by 2. Test it with the number 5.',starterCode:`# Define your function here
# Test it with 5`,expectedOutput:"10"}}},{id:"1-10",chapterId:1,title:"Putting It All Together",description:"Build a complete mini program using everything you've learned",difficulty:5,content:{introduction:"Congratulations! You've learned the fundamentals of Python. Now let's combine everything into a complete program that showcases your new skills.",concept:"Real programs combine variables, functions, loops, conditionals, and user interaction to create useful applications.",example:{code:`def calculate_grade(score):
    if score >= 90:
        return "A"
    elif score >= 80:
        return "B"
    else:
        return "C"

scores = [95, 87, 92]
for score in scores:
    grade = calculate_grade(score)
    print(f"Score: {score}, Grade: {grade}")`,explanation:"This program defines a function to calculate letter grades, then processes a list of scores and displays each score with its corresponding grade.",output:`Score: 95, Grade: A
Score: 87, Grade: B
Score: 92, Grade: A`},exercise:{instruction:"Create a program that asks for the user's name and age, then tells them how many years until they turn 100.",starterCode:`# Ask for name and age
# Calculate years until 100
# Print a personalized message`,expectedOutput:"[Personalized message based on user input]"}}},{id:"2-1",chapterId:2,title:"If-Elif-Else Statements",description:"Create multi-way decision branches in your code",difficulty:2,content:{introduction:"Real-world decisions often have more than two options. Python's if-elif-else structure lets you handle multiple conditions elegantly.",concept:'The elif (short for "else if") statement lets you check multiple conditions in sequence. Python checks each condition until one is True, then executes that code block. The final `else` block is optional and runs if no preceding `if` or `elif` condition was met.',example:{code:`score = 85
if score >= 90:
    print("Grade: A")
elif score >= 80:
    print("Grade: B")
elif score >= 70:
    print("Grade: C")
elif score >= 60:
    print("Grade: D")
else:
    print("Grade: F")`,explanation:'This code checks the score against multiple thresholds. Since 85 is between 80 and 90 (specifically, `score >= 80` is true after `score >= 90` is false), it prints "Grade: B".',output:"Grade: B"},exercise:{instruction:'Create a program that categorizes temperature: "Cold" if below 50, "Cool" if 50-69 (inclusive), "Warm" if 70-85 (inclusive), and "Hot" if above 85. Test with temperature 75.',starterCode:`temperature = 75
# Write your if-elif-else structure here`,expectedOutput:"Warm"}}},{id:"2-2",chapterId:2,title:"Logical Operators",description:"Combine conditions with AND, OR, and NOT",difficulty:2,content:{introduction:"Sometimes you need to check multiple conditions at once. Logical operators let you combine conditions to create complex decision logic.",concept:'Python uses "and", "or", and "not" to combine conditions. \n- `A and B` is True only if both A and B are True.\n- `A or B` is True if at least one of A or B is True.\n- `not A` is True if A is False, and False if A is True.',example:{code:`age = 25
income = 50000
if age >= 21 and income >= 40000:
    print("Eligible for premium credit card")
else:
    print("Not eligible for premium credit card")`,explanation:"This checks if both conditions are met: age at least 21 AND income at least 40000. Since both are True for the given values, the person is eligible.",output:"Eligible for premium credit card"},exercise:{instruction:"Create a program that checks if a number is divisible by both 2 and 3, OR if it's greater than 50. Test with the number 42. (Hint: `x % y == 0` checks if x is divisible by y)",starterCode:`number = 42
# Check the conditions using logical operators`,expectedOutput:"True"}}},{id:"2-3",chapterId:2,title:"While Loops",description:"Repeat actions until a condition changes",difficulty:3,content:{introduction:"While loops let you repeat code as long as a condition remains True. They're perfect for situations where you don't know in advance how many iterations you'll need, or when an action depends on an external state.",concept:"A while loop checks a condition before each iteration. If the condition is True, it executes the loop body; if False, it exits the loop and continues with the rest of the program. It's crucial to ensure the condition eventually becomes False to avoid infinite loops.",example:{code:`count = 5
while count > 0:
    print(count)
    count -= 1  # This line is crucial to eventually make count <= 0
print("Blast off!")`,explanation:"This creates a countdown from 5 to 1. After each iteration, `count` is decreased by 1. When `count` becomes 0, the condition `count > 0` is False, and the loop exits.",output:`5
4
3
2
1
Blast off!`},exercise:{instruction:"Create a while loop that adds numbers starting from 1 (1, then 1+2, then 1+2+3, etc.) until the sum exceeds 50. Print the final sum and how many numbers were added.",starterCode:`current_sum = 0
numbers_added = 0
next_number = 1
# Create your while loop here`,expectedOutput:"Sum: 55, Count: 10"}}},{id:"2-4",chapterId:2,title:"For Loops with Range",description:"Control exactly how your loops iterate",difficulty:2,content:{introduction:"The `range()` function gives you precise control over your `for` loops, letting you specify start, stop, and step values for numerical sequences.",concept:"`range()` can take up to three arguments: `range(start, stop, step)`.\n- `range(stop)`: Generates numbers from 0 up to (but not including) `stop`.\n- `range(start, stop)`: Generates numbers from `start` up to `stop`.\n- `range(start, stop, step)`: Generates numbers from `start` up to `stop`, incrementing by `step` each time.",example:{code:`# Count from 1 to 10
print("Counting from 1 to 10:")
for i in range(1, 11): # stop is 11 to include 10
    print(i)

# Even numbers from 2 to 10
print("\\nEven numbers from 2 to 10:")
for i in range(2, 11, 2):
    print(i)`,explanation:"The first loop goes from 1 to 10 (since `range(1, 11)` stops before 11). The second loop starts at 2, goes up to (but not including) 11, and increments by 2 each time, effectively giving even numbers up to 10.",output:`Counting from 1 to 10:
1
2
3
4
5
6
7
8
9
10

Even numbers from 2 to 10:
2
4
6
8
10`},exercise:{instruction:"Create a `for` loop that prints the multiples of 3 from 3 up to (and including) 30.",starterCode:"# Write your for loop with range() here",expectedOutput:`3
6
9
12
15
18
21
24
27
30`}}},{id:"2-5",chapterId:2,title:"Break and Continue",description:"Control the flow within loops",difficulty:3,content:{introduction:"Sometimes you need to exit a loop early or skip certain iterations without terminating the entire loop. The `break` and `continue` statements give you this fine-grained control over loop execution.",concept:"The `break` statement immediately exits the current (innermost) loop. The `continue` statement skips the rest of the code in the current iteration and proceeds to the next iteration of the loop.",example:{code:`# Using break
print("Using break:")
for i in range(1, 10):
    if i == 5:
        break
    print(i)

# Using continue
print("\\nUsing continue:")
for i in range(1, 10):
    if i % 2 == 0:  # Skip even numbers
        continue
    print(i)`,explanation:"The first loop prints numbers 1 through 4, then encounters `break` when `i` equals 5 and exits. The second loop skips even numbers (because of `continue`) and only prints odd numbers from 1 to 9.",output:`Using break:
1
2
3
4

Using continue:
1
3
5
7
9`},exercise:{instruction:"Create a loop that iterates from 1 to 50. Find the first number that is divisible by 7, print it, and then exit the loop.",starterCode:"# Write your loop with a break statement here",expectedOutput:"7"}}},{id:"2-6",chapterId:2,title:"Nested Loops",description:"Loops within loops for complex iterations",difficulty:3,content:{introduction:"Nested loops  placing one loop inside another  are powerful tools for working with multi-dimensional data (like grids or tables) or generating complex patterns.",concept:"In a nested loop, the inner loop completes all its iterations for each single iteration of the outer loop. This creates a multiplicative effect on the total number of operations performed.",example:{code:`# Multiplication table for numbers 1-3
for i in range(1, 4):
    for j in range(1, 4):
        print(f"{i}  {j} = {i*j}")`,explanation:"The outer loop iterates through values 1, 2, and 3 for `i`. For each value of `i`, the inner loop iterates through 1, 2, and 3 for `j`, calculating and printing the product each time.",output:`1  1 = 1
1  2 = 2
1  3 = 3
2  1 = 2
2  2 = 4
2  3 = 6
3  1 = 3
3  2 = 6
3  3 = 9`},exercise:{instruction:"Create nested loops to print a simple 33 pattern of asterisks, where each row is on a new line.",starterCode:"# Write your nested loops here",expectedOutput:`***
***
***`}}},{id:"2-7",chapterId:2,title:"Conditional Expressions",description:"Write compact if-else statements in a single line",difficulty:3,content:{introduction:"Python offers a compact way to write simple if-else statements in a single line. This is known as a conditional expression or, informally, a ternary operator.",concept:"The syntax is: `value_if_true if condition else value_if_false`. This creates an expression that evaluates to one of two values based on the truthiness of the `condition`. It's useful for assignments or simple return values.",example:{code:`age = 20
status = "adult" if age >= 18 else "minor"
print(f"Status based on age {age}: {status}")

# Compare to regular if-else for clarity
if age >= 18:
    status_verbose = "adult"
else:
    status_verbose = "minor"
print(f"Verbose status: {status_verbose}")`,explanation:'Both approaches achieve the same result of assigning "adult" or "minor" to `status`. The conditional expression is more concise for such simple cases.',output:`Status based on age 20: adult
Verbose status: adult`},exercise:{instruction:'Create a conditional expression that sets a variable `message` to "Even" or "Odd" based on whether a given number is divisible by 2. Test with the number 7.',starterCode:"number = 7\n# Write your conditional expression here to set `message`\n# print(message)",expectedOutput:"Odd"}}},{id:"2-8",chapterId:2,title:"Boolean Logic Deep Dive",description:"Understand truth tables and complex conditions",difficulty:3,content:{introduction:"Boolean logic forms the foundation of decision-making in programming. Understanding how logical operators (`and`, `or`, `not`) combine and their order of evaluation is essential for writing correct and complex conditions.",concept:"Boolean expressions evaluate to either `True` or `False`. Complex expressions follow the rules of Boolean algebra. Key truth tables:\n- `A and B`: True only if A and B are both True.\n- `A or B`: True if A is True, or B is True, or both are True.\n- `not A`: True if A is False; False if A is True.\nOperator precedence: `not` is highest, then `and`, then `or`. Parentheses can be used to control evaluation order.",example:{code:`a = True
b = False
print(f"a and b: {a and b}")
print(f"a or b: {a or b}")
print(f"not a: {not a}")
print(f"not b: {not b}")
# Example of XOR (exclusive or): (a or b) and not (a and b)
print(f"(a or b) and not (a and b): {(a or b) and not (a and b)}")`,explanation:'This demonstrates various combinations of Boolean operators. The last expression shows how to implement an "exclusive or" (XOR) operation, which is true if exactly one of `a` or `b` is true.',output:`a and b: False
a or b: True
not a: False
not b: True
(a or b) and not (a and b): True`},exercise:{instruction:"Create variables `x=True`, `y=False`, `z=True`. Evaluate and print the result of the expression: `(x or y) and (not z or not y)`. Work it out manually first to predict the outcome!",starterCode:`x = True
y = False
z = True
# Evaluate the expression here
# result = ...
# print(result)`,expectedOutput:"True"}}},{id:"2-9",chapterId:2,title:"Match-Case Statements (Python 3.10+)",description:"Use Python's modern structural pattern matching",difficulty:4,content:{introduction:"Introduced in Python 3.10, the `match-case` statement provides a powerful structural pattern matching feature. It's similar to switch statements in other languages but offers more capabilities, including matching based on object structure, types, and values.",concept:"The `match` statement evaluates a subject expression. Its value is then compared against successive patterns specified by `case` clauses. When a pattern matches, the associated code block is executed. The underscore `_` acts as a wildcard, matching anything not caught by previous cases.",example:{code:`def describe_value(value):
    match value:
        case 0:
            return "Zero"
        case int() if value > 0:
            return "Positive Integer"
        case int():
            return "Negative or Zero Integer (re-check logic if 0 is special)"
        case str() if len(value) < 5:
            return "Short String"
        case str():
            return "Long String"
        case list() if not value: # Empty list
            return "Empty List"
        case list() if len(value) == 1:
            return "List with one item"
        case _:
            return "Something else"

print(f"0: {describe_value(0)}")
print(f"42: {describe_value(42)}")
print(f"'hi': {describe_value('hi')}")
print(f"'hello_world': {describe_value('hello_world')}")
print(f"[]: {describe_value([])}")
print(f"[10]: {describe_value([10])}")
print(f"3.14: {describe_value(3.14)}")`,explanation:"This function uses `match-case` to describe different types of values. It demonstrates matching literal values, types (with optional guards like `if value > 0`), and using the wildcard `_`. Note: This example assumes Python 3.10+ environment for execution.",output:`0: Zero
42: Positive Integer
'hi': Short String
'hello_world': Long String
[]: Empty List
[10]: List with one item
3.14: Something else`},exercise:{instruction:`Create a function \`handle_command(command)\` that takes a command string. Using \`match-case\`, it should return:
- "Greeting received" for "hello"
- "Farewell acknowledged" for "goodbye"
- "Help is on the way" for "help"
- "Unknown command" for any other input.
Test it with "hello", "help", and "status".`,starterCode:`# Define your function handle_command(command) using match-case here
# Test calls:
# print(handle_command("hello"))
# print(handle_command("help"))
# print(handle_command("status"))`,expectedOutput:`Greeting received
Help is on the way
Unknown command`}}},{id:"2-10",chapterId:2,title:"Control Flow Mastery Challenge",description:"Solve complex problems using decision and loop structures",difficulty:5,content:{introduction:"Now that you've learned various control flow techniques, let's combine them to solve more complex problems that require careful logic, iteration, and decision-making. This is where your problem-solving skills truly shine!",concept:"Complex problems often require a combination of multiple control structures: loops (for, while) for iteration over data or repeating processes, conditionals (if-elif-else, match-case) for decision-making at various points, and sometimes early termination or skipping iterations (break, continue) for efficiency or specific logic.",example:{code:`def is_prime(n):
    """Check if a number n is prime."""
    if n <= 1:
        return False
    if n <= 3: # 2 and 3 are prime
        return True
    if n % 2 == 0 or n % 3 == 0: # Divisible by 2 or 3 (and not 2 or 3 itself)
        return False
    i = 5
    while i * i <= n: # Only need to check up to sqrt(n)
        if n % i == 0 or n % (i + 2) == 0:
            return False
        i += 6 # Optimization: check i and i+2, then jump 6
    return True

# Find and print prime numbers up to 20
primes_found = []
for num in range(1, 21):
    if is_prime(num):
        primes_found.append(num)
print(f"Prime numbers up to 20: {primes_found}")`,explanation:"This example defines an optimized function `is_prime` to check if a number is prime. It uses conditionals for base cases and a `while` loop with specific checks. Then, a `for` loop iterates through numbers, using the `is_prime` function within a conditional to build a list of prime numbers.",output:"Prime numbers up to 20: [2, 3, 5, 7, 11, 13, 17, 19]"},exercise:{instruction:"Create a program that prints the Fibonacci sequence up to (and including the first number greater than or equal to) 100. The Fibonacci sequence starts 0, 1, and each subsequent number is the sum of the two preceding ones (e.g., 0, 1, 1, 2, 3, 5, 8, ...). Print the sequence as a comma-separated string.",starterCode:`# Write your Fibonacci sequence generator here
# It should print the sequence up to the first number >= 100`,expectedOutput:"0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144"}}},{id:"3-1",chapterId:3,title:"Function Basics: Define and Call",description:"Create and call your own custom functions",difficulty:2,content:{introduction:"Functions are the building blocks of reusable code. They let you package a sequence of statements into a logical unit that can be called (executed) whenever needed, potentially multiple times, from different parts of your program.",concept:"A function is defined using the `def` keyword, followed by the function name, parentheses `()` which may contain parameters, and a colon `:`. The indented block of code below the `def` line is the function body. Functions can optionally include a `return` statement to send a value back to the caller.",example:{code:`def greet(name):
    """This function greets the person passed in as a parameter."""
    message = f"Hello, {name}!"
    return message

# Call the function
greeting_for_alice = greet("Alice")
print(greeting_for_alice)

# Call it again with a different argument
print(greet("Bob"))`,explanation:"We define a function called `greet` that takes one parameter (`name`) and returns a formatted greeting string. We then call this function twice, once storing the result in a variable and printing it, and once printing the result directly.",output:`Hello, Alice!
Hello, Bob!`},exercise:{instruction:"Create a function called `square` that takes one number as a parameter and returns its square (the number multiplied by itself). Test it by calling the function with the number 7 and printing the result.",starterCode:`# Define your function \`square\` here

# Test it with 7 and print the result
# result = ...
# print(result)`,expectedOutput:"49"}}},{id:"3-2",chapterId:3,title:"Function Parameters and Arguments",description:"Learn different ways to pass data to functions",difficulty:3,content:{introduction:"Python offers several ways to define function parameters and pass arguments, giving you flexibility in how data is provided to your functions. Understanding these variations is key to writing versatile functions.",concept:"Functions can have:\n- **Positional parameters**: Required arguments passed in order.\n- **Default parameter values**: Parameters that take a default value if no argument is supplied for them.\n- **Keyword arguments**: Arguments passed using `parameter_name=value` syntax, allowing them to be out of order.\n- **Variable-length arguments**: `*args` (for non-keyworded variable number of arguments) and `**kwargs` (for keyworded variable number of arguments).",example:{code:`# Function with default parameter value
def greet(name, greeting="Hello"):
    return f"{greeting}, {name}!"

print(greet("Alice"))  # Uses default greeting
print(greet("Bob", "Hi"))  # Overrides default greeting

# Calling with keyword arguments
print(greet(greeting="Howdy", name="Charlie"))  # Order doesn't matter
print(greet(name="Diana")) # Can use keyword for one, default for other

# Function with *args
def print_all(*items):
    for item in items:
        print(item)
print_all("apple", "banana", 123)`,explanation:"The `greet` function has a default value for `greeting`. We demonstrate calling it with and without overriding the default, and using keyword arguments. The `print_all` function uses `*args` to accept any number of positional arguments, which are then available as a tuple named `items` inside the function.",output:`Hello, Alice!
Hi, Bob!
Howdy, Charlie!
Hello, Diana!
apple
banana
123`},exercise:{instruction:"Create a function `calculate_total` that takes a `price` (required) and an optional `tax_rate` (defaulting to 0.1, i.e., 10%). The function should return the price plus tax. Test it by calling it with `price=100` (using default tax) and with `price=100, tax_rate=0.05`.",starterCode:`# Define your function \`calculate_total\` here

# Test calls
# total1 = ...
# total2 = ...
# print(f"Total 1: {total1}")
# print(f"Total 2: {total2}")`,expectedOutput:`Total 1: 110.0
Total 2: 105.0`}}},{id:"3-3",chapterId:3,title:"Return Values from Functions",description:"Send data back from your functions to the caller",difficulty:2,content:{introduction:"Functions often compute a result or find some information. The `return` statement allows a function to send data (its result) back to the part of the code that called it.",concept:"The `return` statement immediately exits the function and passes the specified value (or values) back to the caller. A function can return any type of Python object: numbers, strings, lists, dictionaries, other functions, etc. If a function doesn't have an explicit `return` statement, or has a `return` statement without a value, it implicitly returns `None`. A function can also return multiple values, which are packed into a tuple.",example:{code:`def divide(a, b):
    if b == 0:
        print("Error: Division by zero!")
        return None # Explicitly return None on error
    return a / b

result1 = divide(10, 2)
result2 = divide(10, 0)

print(f"10 / 2 = {result1}")
print(f"10 / 0 = {result2}")

# Function returning multiple values (as a tuple)
def get_coordinates():
    return 10, 20 # Returns the tuple (10, 20)

x, y = get_coordinates() # Unpacking the returned tuple
print(f"Coordinates: x={x}, y={y}")`,explanation:"The `divide` function returns the result of division or `None` if division by zero occurs. The `get_coordinates` function returns two values, which are automatically packed into a tuple. The caller can then unpack this tuple into separate variables.",output:`10 / 2 = 5.0
Error: Division by zero!
10 / 0 = None
Coordinates: x=10, y=20`},exercise:{instruction:"Create a function `get_min_max(numbers)` that takes a list of numbers and returns both the minimum and maximum numbers in that list. Test it with the list `[5, 3, 8, 1, 7]` and print the results.",starterCode:`# Define your function \`get_min_max\` here

# Test it
# data = [5, 3, 8, 1, 7]
# min_val, max_val = ...
# print(f"Minimum: {min_val}, Maximum: {max_val}")`,expectedOutput:"Minimum: 1, Maximum: 8"}}},{id:"3-4",chapterId:3,title:"Variable Scope (LEGB Rule)",description:"Understand where variables are accessible in your code",difficulty:3,content:{introduction:"Variable scope determines the accessibility of a variable in different parts of your code. Understanding Python's scope rules (often summarized by the LEGB rule: Local, Enclosing function locals, Global, Built-in) is crucial for avoiding bugs and writing functions that interact correctly with their environment.",concept:`- **Local scope**: Variables defined inside a function are local to that function and cannot be accessed outside it.
- **Global scope**: Variables defined at the top level of a script or module are global.
- To modify a global variable from inside a function, you must use the \`global\` keyword.
- If a variable is assigned a value anywhere within the functions body, its assumed to be a local unless explicitly declared as global.`,example:{code:`global_var = 100 # Global variable

def my_function():
    local_var = 10 # Local variable
    print(f"Inside function: local_var = {local_var}")
    print(f"Inside function: global_var (accessed) = {global_var}")

def modify_global():
    global global_var # Declare intent to modify global_var
    global_var = 200
    print(f"Inside modify_global: global_var (modified) = {global_var}")

my_function()
modify_global()
print(f"Outside function: global_var = {global_var}")
# print(local_var) # This would cause a NameError because local_var is not defined globally`,explanation:"`global_var` is accessible inside `my_function` for reading. To change its value, `modify_global` uses the `global` keyword. `local_var` is only known within `my_function`. Attempting to access `local_var` outside `my_function` would result in an error.",output:`Inside function: local_var = 10
Inside function: global_var (accessed) = 100
Inside modify_global: global_var (modified) = 200
Outside function: global_var = 200`},exercise:{instruction:"Initialize a global variable `total_score` to 0. Create a function `add_points(points)` that adds the given `points` to `total_score`. Call this function three times with different point values (e.g., 10, 20, 5) and then print the final `total_score`.",starterCode:`total_score = 0 # Global variable

# Define your function \`add_points\` here

# Call the function multiple times

# Print the final total_score`,expectedOutput:"Final total_score: 35"}}},{id:"3-5",chapterId:3,title:"Lambda Functions (Anonymous Functions)",description:"Create small, single-expression anonymous functions",difficulty:3,content:{introduction:"Lambda functions, also known as anonymous functions, are small, restricted functions that are not bound to a name (i.e., they don't need `def`). They are useful for short, simple operations where a full function definition would be overly verbose, often used with functions like `map()`, `filter()`, or as arguments to other functions.",concept:"A lambda function is defined using the `lambda` keyword. It can take any number of arguments but can only have one expression. The expression is evaluated and its result is returned when the lambda function is called. Syntax: `lambda arguments: expression`",example:{code:`# Regular function for squaring
def square_def(x):
    return x * x

# Equivalent lambda function
square_lambda = lambda x: x * x

print(f"Using def: square(5) = {square_def(5)}")
print(f"Using lambda: square_lambda(5) = {square_lambda(5)}")

# Lambda with multiple arguments
sum_lambda = lambda x, y: x + y
print(f"sum_lambda(3, 4) = {sum_lambda(3, 4)}")

# Using lambda with sorting (e.g., sort a list of tuples by the second element)
points = [(1, 5), (3, 2), (2, 8)]
points.sort(key=lambda point: point[1]) # Sort by the y-coordinate
print(f"Sorted points by y-coordinate: {points}")`,explanation:"We define and use lambda functions for simple operations like squaring and summing. In the last example, a lambda function is used as the `key` for the `sort` method to specify custom sorting logic (sorting by the second element of each tuple).",output:`Using def: square(5) = 25
Using lambda: square_lambda(5) = 25
sum_lambda(3, 4) = 7
Sorted points by y-coordinate: [(3, 2), (1, 5), (2, 8)]`},exercise:{instruction:'You have a list of strings: `words = ["apple", "banana", "cherry", "date"]`. Use the `filter()` function along with a lambda function to create a new list containing only the words that have more than 5 characters.',starterCode:`words = ["apple", "banana", "cherry", "date"]
# Use filter() with a lambda function here
# long_words = ...
# print(list(long_words))`,expectedOutput:"['banana', 'cherry']"}}},{id:"3-6",chapterId:3,title:"Modules and the Import Statement",description:"Use code from Python's standard library and other files",difficulty:2,content:{introduction:"Modules are Python files (`.py`) containing definitions and statements (functions, classes, variables) that you can use in other Python programs. Python comes with a rich standard library of modules for common tasks, and you can create your own.",concept:"You bring the functionality of a module into your current program using the `import` statement. There are several ways to import:\n- `import module_name`: Imports the entire module. Access items via `module_name.item`.\n- `from module_name import item1, item2`: Imports specific items directly into the current namespace.\n- `from module_name import *`: Imports all items (generally discouraged for clarity).\n- `import module_name as alias`: Imports a module under a different name (alias).",example:{code:`# Import entire module
import math
print(f"Square root of 16: {math.sqrt(16)}")
print(f"Value of pi: {math.pi}")

# Import specific functions from a module
from random import randint, choice
print(f"Random integer (1-10): {randint(1, 10)}")
print(f"Random choice from list: {choice(['apple', 'banana', 'cherry'])}")

# Import a module with an alias
import datetime as dt
current_time = dt.datetime.now()
print(f"Current date: {current_time.strftime('%Y-%m-%d')}")`,explanation:"We demonstrate importing and using functions and constants from the `math`, `random`,and `datetime` modules from Python's standard library. The `as` keyword is used to create a shorter alias for `datetime`.",output:`Square root of 16: 4.0
Value of pi: 3.141592653589793
Random integer (1-10): [A random integer between 1 and 10]
Random choice from list: [A random fruit from the list]
Current date: [Current date in YYYY-MM-DD format]`},exercise:{instruction:"Import the `statistics` module from Python's standard library. Given the list of numbers `data = [4, 2, 7, 5, 5, 6, 8, 9, 4]`, use functions from the `statistics` module to calculate and print its mean, median, and mode.",starterCode:`# Import the statistics module here

data = [4, 2, 7, 5, 5, 6, 8, 9, 4]
# Calculate and print mean, median, and mode
# mean_val = ...
# median_val = ...
# mode_val = ...
# print(f"Mean: {mean_val}, Median: {median_val}, Mode: {mode_val}")`,expectedOutput:"Mean: 5.555..., Median: 5, Mode: 4"}}},{id:"3-7",chapterId:3,title:"Creating Your Own Modules",description:"Organize your code into reusable custom modules",difficulty:4,content:{introduction:"As your programs grow in size and complexity, organizing your code into separate modules becomes essential for maintainability and reusability. You can create your own modules to group related functions, classes, and variables.",concept:"A module in Python is simply a `.py` file. Any Python file can be a module. You can import from your own modules just like you import from the standard library, provided the module file is in a location Python can find (e.g., the same directory, or a directory in `sys.path`).",example:{code:`// Imagine this code is in a file named "my_utils.py"
// File: my_utils.py
// def count_words(text):
//     return len(text.split())
// 
// def reverse_string(text):
//     return text[::-1]

// Now, in your main program file (e.g., main.py), you would do:
// import my_utils
// 
// sample_text = "Python is fun and powerful"
// word_count = my_utils.count_words(sample_text)
// reversed_text = my_utils.reverse_string("Hello")
// 
// print(f"Word count in '{sample_text}': {word_count}")
// print(f"\\'Hello\\' reversed: {reversed_text}")

// For this example, we simulate the output as if it ran:
print("Word count in 'Python is fun and powerful': 5")
print("'Hello' reversed: olleH")`,explanation:"We first conceptualize a module `my_utils.py` with two utility functions. Then, we show how a main program (`main.py`) would import and use these functions. This separation helps organize code and makes the utility functions reusable across different parts of a larger project or even in different projects.",output:`Word count in 'Python is fun and powerful': 5
'Hello' reversed: olleH`},exercise:{instruction:"1. Describe the content of a Python file named `geometry_calculator.py` that contains two functions: `circle_area(radius)` and `rectangle_area(length, width)`.\n2. Show how you would import and use these functions in another Python script to calculate the area of a circle with radius 5 and a rectangle with length 4 and width 6. Print both results.",starterCode:`// Step 1: Describe geometry_calculator.py content (as comments)

// Step 2: Show import and usage in another script (as comments or simulated print)
// print("Simulated output:")
// print(f"Area of circle (radius 5): {78.539...}") 
// print(f"Area of rectangle (4x6): {24.0}")`,expectedOutput:`Simulated output:
Area of circle (radius 5): 78.53981633974483
Area of rectangle (4x6): 24.0`}}},{id:"3-8",chapterId:3,title:"Function Decorators",description:"Modify or enhance functions with elegant wrappers",difficulty:4,content:{introduction:"Decorators are a powerful and expressive feature in Python that allow you to modify or enhance functions or methods in a clean, readable way. They are a form of metaprogramming, where part of the program tries to modify another part of the program at compile time. Common uses include logging, timing function execution, access control, and instrumentation.",concept:"A decorator is essentially a function that takes another function (the decorated function) as an argument, adds some functionality to it (without explicitly modifying the original function's code), and returns the modified (decorated) function. The `@decorator_name` syntax placed above a function definition is syntactic sugar for applying the decorator.",example:{code:`import time

def timer_decorator(func):
    """A decorator that prints the execution time of the decorated function."""
    def wrapper_function(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs) # Call the original function
        end_time = time.time()
        print(f"Function '{func.__name__}' took {end_time - start_time:.4f} seconds to execute.")
        return result
    return wrapper_function

@timer_decorator
def slow_function(delay_seconds):
    """A function that simulates a slow operation."""
    print(f"slow_function called with delay: {delay_seconds}")
    time.sleep(delay_seconds)
    return "Operation complete!"

result_message = slow_function(1) # Call the decorated function
print(result_message)`,explanation:"We define `timer_decorator` which takes a function `func` as input. It defines an inner `wrapper_function` that records time, calls `func`, records time again, prints the duration, and returns `func`'s result. The `@timer_decorator` syntax applies this to `slow_function`. When `slow_function(1)` is called, it's actually `wrapper_function(1)` that executes.",output:`slow_function called with delay: 1
Function 'slow_function' took 1.00xx seconds to execute.
Operation complete!`},exercise:{instruction:"Create a decorator called `debug_args` that prints the function name, its positional arguments (`*args`), and its keyword arguments (`**kwargs`) before calling the actual function. Apply this decorator to a simple function, for example, one that adds two numbers, and call the decorated function with both positional and keyword arguments.",starterCode:`# Define your \`debug_args\` decorator here

# Define a simple function and decorate it
# @debug_args
# def add_numbers(a, b, c=0):
#     return a + b + c

# Call the decorated function
# print(f"Result: {add_numbers(3, 4, c=5)}")
# print(f"Result: {add_numbers(10, 20)}")`,expectedOutput:`Calling add_numbers with args=(3, 4), kwargs={'c': 5}
Result: 12
Calling add_numbers with args=(10, 20), kwargs={}
Result: 30`}}},{id:"3-9",chapterId:3,title:"Recursion: Functions Calling Themselves",description:"Write elegant solutions for problems with recursive structures",difficulty:4,content:{introduction:"Recursion is a powerful programming technique where a function calls itself to solve smaller instances of the same problem. It's particularly well-suited for problems that can be broken down into self-similar subproblems, such as tree traversals, certain mathematical calculations (like factorials or Fibonacci numbers), and some sorting algorithms.",concept:`A recursive function must have two key components:
1. **Base Case(s)**: One or more conditions that provide a direct, non-recursive answer for the simplest inputs, stopping the recursion.
2. **Recursive Step**: The part of the function where it calls itself with modified arguments, moving closer to a base case.`,example:{code:`def factorial(n):
    """Calculate the factorial of n using recursion (n!)."""
    # Base case: factorial of 0 or 1 is 1
    if n == 0 or n == 1:
        return 1
    # Recursive step: n * factorial of (n-1)
    else:
        return n * factorial(n - 1)

print(f"Factorial of 5: {factorial(5)}") # 5! = 5 * 4 * 3 * 2 * 1 = 120

def fibonacci(n):
    """Calculate the nth Fibonacci number using recursion."""
    if n <= 0:
        return 0 # Or raise an error for invalid input
    elif n == 1:
        return 0 # Sequence: 0, 1, 1, 2, 3... (F0=0, F1=1)
    elif n == 2:
        return 1
    else:
        return fibonacci(n - 1) + fibonacci(n - 2)

print(f"7th Fibonacci number (F7): {fibonacci(7)}") # F1=0, F2=1, F3=1, F4=2, F5=3, F6=5, F7=8`,explanation:"We implement two classic recursive algorithms: `factorial` and `fibonacci`. Each has clearly defined base cases to stop the recursion and a recursive step that breaks the problem down. Note: The recursive Fibonacci shown is inefficient for large `n` due to re-computation, but illustrates the concept well.",output:`Factorial of 5: 120
7th Fibonacci number (F7): 8`},exercise:{instruction:"Write a recursive function `sum_digits(n)` that calculates the sum of the digits in a non-negative integer `n`. For example, `sum_digits(123)` should return `1 + 2 + 3 = 6`. (Hint: `n % 10` gives the last digit, `n // 10` removes the last digit).",starterCode:`# Define your recursive function \`sum_digits(n)\` here

# Test cases
# print(f"Sum of digits in 123: {sum_digits(123)}")
# print(f"Sum of digits in 9876: {sum_digits(9876)}")
# print(f"Sum of digits in 0: {sum_digits(0)}")`,expectedOutput:`Sum of digits in 123: 6
Sum of digits in 9876: 30
Sum of digits in 0: 0`}}},{id:"3-10",chapterId:3,title:"Functional Programming Tools: Map, Filter, Reduce",description:"Use map, filter, and reduce for powerful data processing",difficulty:4,content:{introduction:"Python supports several functional programming paradigms that allow you to process data in a more declarative style. Built-in functions like `map()`, `filter()`, and `functools.reduce()` enable concise and powerful data transformations on iterables.",concept:"Functional programming emphasizes applying functions to data, often avoiding explicit loops and mutable state.\n- **`map(function, iterable)`**: Applies `function` to every item of `iterable` and returns an iterator of the results.\n- **`filter(function, iterable)`**: Constructs an iterator from elements of `iterable` for which `function` returns true.\n- **`functools.reduce(function, iterable[, initializer])`**: Applies `function` of two arguments cumulatively to the items of `iterable`, from left to right, so as to reduce the iterable to a single value.",example:{code:`from functools import reduce # reduce is in functools module

numbers = [1, 2, 3, 4, 5]

# Map: Apply a function (e.g., square) to each item
squared_numbers = list(map(lambda x: x**2, numbers))
print(f"Original numbers: {numbers}")
print(f"Squared numbers (map): {squared_numbers}")

# Filter: Keep only items that satisfy a condition (e.g., even numbers)
even_numbers = list(filter(lambda x: x % 2 == 0, numbers))
print(f"Even numbers (filter): {even_numbers}")

# Reduce: Aggregate items using a function (e.g., sum all numbers)
sum_of_all = reduce(lambda x, y: x + y, numbers)
product_of_all = reduce(lambda x, y: x * y, numbers, 1) # Initializer 1 for product
print(f"Sum of all (reduce): {sum_of_all}")
print(f"Product of all (reduce): {product_of_all}")`,explanation:"We use `map()` to square each number in a list, `filter()` to select only the even numbers, and `reduce()` to calculate both the sum and product of all numbers. These functions often lead to more compact and readable code for data transformations compared to explicit loops.",output:`Original numbers: [1, 2, 3, 4, 5]
Squared numbers (map): [1, 4, 9, 16, 25]
Even numbers (filter): [2, 4]
Sum of all (reduce): 15
Product of all (reduce): 120`},exercise:{instruction:"Given a list of numbers: `data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]`. Use a combination of `filter()`, `map()`, and `reduce()` (or `sum()`) to find the sum of the squares of only the even numbers in this list.",starterCode:`from functools import reduce
data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

# 1. Filter for even numbers
# 2. Map to get their squares
# 3. Reduce (or sum) to get the total sum
# result = ...
# print(f"Sum of squares of even numbers: {result}")`,expectedOutput:"Sum of squares of even numbers: 220"}}},{id:"4-1",chapterId:4,title:"Lists In-Depth: Methods and Operations",description:"Master Python's versatile list data structure and its methods",difficulty:2,content:{introduction:"Lists are one of Python's most fundamental and versatile data structures. They are ordered, mutable (changeable) collections of items, which can be of different types. This lesson explores common list methods and operations beyond basic creation and indexing.",concept:"Lists support a wide range of methods for manipulation: `append()`, `extend()`, `insert()`, `remove()`, `pop()`, `clear()`, `index()`, `count()`, `sort()`, `reverse()`. They also support slicing for sublist extraction and modification, and operators like `+` (concatenation) and `*` (repetition).",example:{code:`# Creating and accessing lists
fruits = ["apple", "banana", "cherry", "date"]
print(f"Original fruits: {fruits}")
print(f"First item: {fruits[0]}, Last item: {fruits[-1]}")

# Slicing
print(f"Slice (items 1-2): {fruits[1:3]}") # items at index 1 and 2

# List methods
fruits.append("elderberry")  # Add to end
print(f"After append: {fruits}")
fruits.insert(2, "blueberry")  # Insert "blueberry" at index 2
print(f"After insert: {fruits}")
fruits.remove("banana")  # Remove first occurrence of "banana"
print(f"After remove: {fruits}")
popped_item = fruits.pop()  # Remove and return last item
print(f"Popped item: {popped_item}, List after pop: {fruits}")

# Sorting
numbers = [3, 1, 4, 1, 5, 9, 2, 6]
numbers.sort()  # In-place sort (modifies original list)
print(f"Sorted numbers: {numbers}")
# sorted() function returns a new sorted list without modifying original
original_numbers = [3, 1, 4]
sorted_copy = sorted(original_numbers)
print(f"Original: {original_numbers}, Sorted copy: {sorted_copy}")

# List comprehension (recap)
squares = [x**2 for x in range(1, 6)]
print(f"Squares (comprehension): {squares}")`,explanation:"We demonstrate various list operations: creating, accessing elements by index, slicing to get sublists, common list methods like `append`, `insert`, `remove`, `pop`, and `sort`. We also differentiate between in-place sorting with `.sort()` and creating a sorted copy with `sorted()`. List comprehensions are briefly recapped.",output:`Original fruits: ['apple', 'banana', 'cherry', 'date']
First item: apple, Last item: date
Slice (items 1-2): ['banana', 'cherry']
After append: ['apple', 'banana', 'cherry', 'date', 'elderberry']
After insert: ['apple', 'banana', 'blueberry', 'cherry', 'date', 'elderberry']
After remove: ['apple', 'blueberry', 'cherry', 'date', 'elderberry']
Popped item: elderberry, List after pop: ['apple', 'blueberry', 'cherry', 'date']
Sorted numbers: [1, 1, 2, 3, 4, 5, 6, 9]
Original: [3, 1, 4], Sorted copy: [1, 3, 4]
Squares (comprehension): [1, 4, 9, 16, 25]`},exercise:{instruction:`Start with the list \`my_list = [10, 20, 30, 40, 50]\`.
1. Append the number 60 to \`my_list\`.
2. Insert the number 25 at index 2.
3. Remove the number 30 from the list.
4. Reverse the list in-place.
Print the list after each step and the final list.`,starterCode:`my_list = [10, 20, 30, 40, 50]
print(f"Initial list: {my_list}")

# Step 1: Append 60

# Step 2: Insert 25 at index 2

# Step 3: Remove 30

# Step 4: Reverse the list

# print(f"Final list: {my_list}")`,expectedOutput:`Initial list: [10, 20, 30, 40, 50]
After append: [10, 20, 30, 40, 50, 60]
After insert: [10, 20, 25, 30, 40, 50, 60]
After remove: [10, 20, 25, 40, 50, 60]
Final list: [60, 50, 40, 25, 20, 10]`}}},{id:"4-2",chapterId:4,title:"Dictionaries: Key-Value Stores",description:"Store and retrieve data efficiently using key-value pairs",difficulty:3,content:{introduction:"Dictionaries are Python's built-in mapping type, allowing you to store data as collections of key-value pairs. They are incredibly useful for representing structured data and provide fast lookups, insertions, and deletions based on keys.",concept:"A dictionary maps unique, immutable keys (like strings, numbers, or tuples) to values (which can be any Python object). Dictionaries are unordered (prior to Python 3.7, though insertion order is remembered in CPython 3.6+ and guaranteed in Python 3.7+). They are created with curly braces `{}` or the `dict()` constructor.",example:{code:`# Creating dictionaries
student = {
    "name": "Alice",
    "age": 22,
    "courses": ["Math", "Computer Science", "Physics"],
    "is_graduated": False
}
print(f"Student data: {student}")

# Accessing values
print(f"Name: {student['name']}") # Access via key
print(f"Age using .get(): {student.get('age')}")  # Safe access with .get()
print(f"Grade (with default): {student.get('grade', 'N/A')}") # .get() can provide a default if key is missing

# Modifying dictionaries
student["age"] = 23  # Update value for an existing key
student["major"] = "Computer Science"  # Add a new key-value pair
print(f"Updated student: {student}")
del student["is_graduated"]  # Remove a key-value pair
print(f"After deleting 'is_graduated': {student}")

# Dictionary methods
print(f"Keys: {list(student.keys())}")
print(f"Values: {list(student.values())}")
print(f"Items (key-value pairs): {list(student.items())}")

# Dictionary comprehension
squares_dict = {x: x**2 for x in range(1, 6)}
print(f"Squares dictionary: {squares_dict}")`,explanation:"We demonstrate creating a dictionary, accessing its values using keys (both directly and with the safer `.get()` method), modifying it by updating existing keys or adding new ones, and deleting entries. Common dictionary methods like `.keys()`, `.values()`, and `.items()` are shown, along with a dictionary comprehension example.",output:`Student data: {'name': 'Alice', 'age': 22, 'courses': ['Math', 'Computer Science', 'Physics'], 'is_graduated': False}
Name: Alice
Age using .get(): 22
Grade (with default): N/A
Updated student: {'name': 'Alice', 'age': 23, 'courses': ['Math', 'Computer Science', 'Physics'], 'is_graduated': False, 'major': 'Computer Science'}
After deleting 'is_graduated': {'name': 'Alice', 'age': 23, 'courses': ['Math', 'Computer Science', 'Physics'], 'major': 'Computer Science'}
Keys: ['name', 'age', 'courses', 'major']
Values: ['Alice', 23, ['Math', 'Computer Science', 'Physics'], 'Computer Science']
Items (key-value pairs): [('name', 'Alice'), ('age', 23), ('courses', ['Math', 'Computer Science', 'Physics']), ('major', 'Computer Science')]
Squares dictionary: {1: 1, 2: 4, 3: 9, 4: 16, 5: 25}`},exercise:{instruction:'Create a dictionary that maps the names of at least 5 countries to their respective capitals (e.g., "France": "Paris"). Then, write code that prompts the user to enter a country name and prints its capital, or a message if the country is not in your dictionary.',starterCode:`# Create your country-capital dictionary here
capitals = {}

# Get input from the user
# country_name = input("Enter a country name: ")

# Check if the country is in the dictionary and print the capital or a message
# For testing, simulate input:
country_name = "Germany" # Test with a country in your dict
# country_name = "Brazil" # Test with a country NOT in your dict (if applicable)

# if country_name in capitals:
#     print(f"The capital of {country_name} is {capitals[country_name]}.")
# else:
#     print(f"Sorry, the capital of {country_name} is not in our records.")`,expectedOutput:"The capital of Germany is Berlin."}}},{id:"4-3",chapterId:4,title:"Tuples: Immutable Sequences",description:"Use immutable sequences for fixed collections of data",difficulty:2,content:{introduction:"Tuples are ordered, immutable (unchangeable) sequences, similar to lists. Because they cannot be modified after creation, they are often used to represent fixed collections of items, like coordinates, database records, or items that should not be altered.",concept:"Tuples are created using parentheses `()` or by separating items with commas. A single-item tuple requires a trailing comma (e.g., `(42,)`). Since they are immutable, tuples are more memory-efficient than lists for fixed data and can be used as keys in dictionaries or elements in sets (as long as all their items are also immutable).",example:{code:`# Creating tuples
point_2d = (3, 4)  # Tuple with parentheses
rgb_color = 255, 128, 0  # Tuple without parentheses (comma-separated)
single_element_tuple = ("hello",)  # Note the trailing comma for a single-item tuple
empty_tuple = ()

print(f"2D Point: {point_2d}")
print(f"RGB Color: {rgb_color}")
print(f"Single element tuple: {single_element_tuple}")

# Accessing tuple elements (like lists)
print(f"X-coordinate: {point_2d[0]}, Y-coordinate: {point_2d[1]}")

# Unpacking a tuple
x, y = point_2d
print(f"Unpacked: x={x}, y={y}")

# Tuple methods (fewer than lists due to immutability)
tuple_with_duplicates = (1, 2, 2, 3, 4, 2, 2)
print(f"Count of 2s: {tuple_with_duplicates.count(2)}")
print(f"Index of first occurrence of 3: {tuple_with_duplicates.index(3)}")

# Immutability demonstration
try:
    point_2d[0] = 10  # This will raise a TypeError
except TypeError as e:
    print(f"Error when trying to modify tuple: {e}")

# Using tuples as dictionary keys (because they are hashable)
locations = {
    (40.7128, -74.0060): "New York City",
    (34.0522, -118.2437): "Los Angeles"
}
print(f"City at (40.7128, -74.0060): {locations[(40.7128, -74.0060)]}")`,explanation:"We demonstrate various ways to create tuples, including single-element tuples. Accessing elements and unpacking tuples are shown. We highlight tuple methods like `.count()` and `.index()`. The immutability of tuples is proven by attempting modification, which raises a `TypeError`. Finally, their use as dictionary keys is illustrated.",output:`2D Point: (3, 4)
RGB Color: (255, 128, 0)
Single element tuple: ('hello',)
X-coordinate: 3, Y-coordinate: 4
Unpacked: x=3, y=4
Count of 2s: 4
Index of first occurrence of 3: 3
Error when trying to modify tuple: 'tuple' object does not support item assignment
City at (40.7128, -74.006): New York City`},exercise:{instruction:'Create a list of tuples, where each tuple contains a student\'s name (string) and their exam score (integer). For example: `[("Alice", 92), ("Bob", 88), ("Charlie", 95)]`. Then, write code to iterate through this list and print the name of the student who has the highest score.',starterCode:`student_scores = [("Alice", 92), ("Bob", 88), ("Charlie", 95), ("Diana", 90)]

# Find the student with the highest score
# highest_score = -1
# top_student_name = ""
# for name, score in student_scores:
#     ...
# print(f"The student with the highest score is {top_student_name} with {highest_score}.")`,expectedOutput:"The student with the highest score is Charlie with 95."}}},{id:"4-4",chapterId:4,title:"Sets: Unordered Collections of Unique Elements",description:"Work with unordered collections of unique elements and perform set operations",difficulty:3,content:{introduction:"Sets are unordered collections of unique, immutable elements. They are highly optimized for membership testing (checking if an element is present), removing duplicates from a sequence, and performing mathematical set operations like union, intersection, difference, and symmetric difference.",concept:"Sets are created using curly braces `{}` (e.g., `{1, 2, 3}`) or the `set()` constructor (e.g., `set([1, 2, 2, 3])`). They do not maintain any specific order of elements and automatically discard duplicates. Elements in a set must be immutable (e.g., numbers, strings, tuples).",example:{code:`# Creating sets
set_from_list = set([1, 2, 2, 3, 1, 4]) # Duplicates are removed
print(f"Set from list: {set_from_list}")
literal_set = {"apple", "banana", "cherry", "apple"} # Duplicates removed
print(f"Literal set: {literal_set}") # Note: order is not guaranteed
empty_set = set() # Must use set() for an empty set, {} creates an empty dict

# Set operations
set_a = {1, 2, 3, 4, 5}
set_b = {4, 5, 6, 7, 8}

print(f"Set A: {set_a}, Set B: {set_b}")
print(f"Union (A | B): {set_a | set_b}")  # All unique elements from both sets
print(f"Intersection (A & B): {set_a & set_b}")  # Elements common to both sets
print(f"Difference (A - B): {set_a - set_b}")  # Elements in A but not in B
print(f"Symmetric Difference (A ^ B): {set_a ^ set_b}")  # Elements in A or B, but not in both

# Set methods
colors = {"red", "green", "blue"}
colors.add("yellow")  # Add a single element
print(f"After adding yellow: {colors}")
colors.update(["orange", "purple", "red"])  # Add multiple elements (duplicates ignored)
print(f"After update: {colors}")
colors.remove("green")  # Remove "green" (raises KeyError if not found)
colors.discard("black")  # Remove "black" if present (no error if not found)
print(f"After remove/discard: {colors}")

# Membership testing (very efficient)
print(f"Is 'blue' in colors? {'blue' in colors}")
print(f"Is 'green' in colors? {'green' not in colors}") // 'green' was removed`,explanation:"We demonstrate creating sets (from lists and literals), highlighting automatic duplicate removal and unordered nature. Key set operations (union, intersection, difference, symmetric difference) are shown using both operators and methods. Methods for adding (`add`, `update`) and removing (`remove`, `discard`) elements are also covered, along with efficient membership testing.",output:`Set from list: {1, 2, 3, 4}
Literal set: {'apple', 'cherry', 'banana'} (order may vary)
Set A: {1, 2, 3, 4, 5}, Set B: {4, 5, 6, 7, 8}
Union (A | B): {1, 2, 3, 4, 5, 6, 7, 8}
Intersection (A & B): {4, 5}
Difference (A - B): {1, 2, 3}
Symmetric Difference (A ^ B): {1, 2, 3, 6, 7, 8}
After adding yellow: {'green', 'blue', 'yellow', 'red'} (order may vary)
After update: {'green', 'blue', 'yellow', 'orange', 'purple', 'red'} (order may vary)
After remove/discard: {'blue', 'yellow', 'orange', 'purple', 'red'} (order may vary)
Is 'blue' in colors? True
Is 'green' in colors? True`},exercise:{instruction:`You have two lists of student names who attended different workshops:
\`workshop_A = ["Alice", "Bob", "Charlie", "David"]\`
\`workshop_B = ["Charlie", "David", "Eve", "Frank"]\`
Using sets, find and print:
1. A list of all unique students who attended at least one workshop.
2. A list of students who attended BOTH workshops.
3. A list of students who attended Workshop A but NOT Workshop B.`,starterCode:`workshop_A = ["Alice", "Bob", "Charlie", "David"]
workshop_B = ["Charlie", "David", "Eve", "Frank"]

# Convert lists to sets
# set_A = ...
# set_B = ...

# Perform set operations
# all_students = ...
# common_students = ...
# a_only_students = ...

# print(f"All unique students: {sorted(list(all_students))}")
# print(f"Students in both workshops: {sorted(list(common_students))}")
# print(f"Students in Workshop A only: {sorted(list(a_only_students))}")`,expectedOutput:`All unique students: ['Alice', 'Bob', 'Charlie', 'David', 'Eve', 'Frank']
Students in both workshops: ['Charlie', 'David']
Students in Workshop A only: ['Alice', 'Bob']`}}},{id:"4-5",chapterId:4,title:"Nested Data Structures",description:"Combine lists, dictionaries, tuples, and sets for complex data representation",difficulty:3,content:{introduction:"Real-world data is often hierarchical or structured in complex ways. Python's data structures can be nested within each other (e.g., a list of dictionaries, a dictionary where values are lists, etc.) to represent such intricate data, like JSON objects, XML trees, or database records.",concept:`You can freely nest Python's built-in data structures. For example:
- A list can contain other lists or dictionaries.
- A dictionary's values can be lists, other dictionaries, or any Python object.
- Tuples can contain lists (though the tuple itself remains immutable, its mutable elements like lists can be changed).
Accessing elements in nested structures involves chaining index or key lookups.`,example:{code:`# Example 1: List of Dictionaries (common for representing records)
students = [
    {"id": 101, "name": "Alice Wonderland", "grades": {"math": 90, "science": 85, "history": 95}},
    {"id": 102, "name": "Bob The Builder", "grades": {"math": 80, "science": 88, "history": 92}},
    {"id": 103, "name": "Charlie Brown", "grades": {"math": 95, "science": 91, "history": 89}}
]

# Accessing nested data
print(f"First student's name: {students[0]['name']}")
print(f"Bob's science grade: {students[1]['grades']['science']}")

# Example 2: Dictionary with Nested Structures
school_data = {
    "school_name": "Springfield High",
    "principal": {"name": "Seymour Skinner", "years_experience": 15},
    "departments": [
        {"name": "Mathematics", "head": "Dr. Hibbert", "courses": ["Algebra I", "Calculus AB", "Statistics"]},
        {"name": "Science", "head": "Prof. Frink", "courses": ["Biology 101", "Chemistry Lab", "Physics Mechanics"]}
    ]
}

# Accessing data from the school_data dictionary
print(f"School Name: {school_data['school_name']}")
print(f"Principal's Name: {school_data['principal']['name']}")
print(f"First department's name: {school_data['departments'][0]['name']}")
print(f"Science department courses: {school_data['departments'][1]['courses']}")
print(f"Second course in Science dept: {school_data['departments'][1]['courses'][1]}")`,explanation:"We demonstrate two common nested structures: a list of dictionaries (each dictionary representing a student record with nested grades) and a dictionary containing other dictionaries and lists (representing school information). Accessing elements requires chaining indexing for lists and key lookups for dictionaries.",output:`First student's name: Alice Wonderland
Bob's science grade: 88
School Name: Springfield High
Principal's Name: Seymour Skinner
First department's name: Mathematics
Science department courses: ['Biology 101', 'Chemistry Lab', 'Physics Mechanics']
Second course in Science dept: Chemistry Lab`},exercise:{instruction:`Create a nested data structure to represent a simple e-commerce inventory. It should be a dictionary where keys are category names (e.g., "Electronics", "Books"). Each category should map to a list of product dictionaries. Each product dictionary should have "name", "price", and "stock" (quantity). 
Populate it with at least two categories and two products per category. Then, write code to find and print the name of the most expensive product across all categories.`,starterCode:`inventory = {
    # "CategoryName": [
    #     {"name": "ProductName", "price": 0.0, "stock": 0},
    #     ...
    # ],
    # ...
}

# Populate your inventory here

# Find the most expensive product
# most_expensive_product_name = None
# highest_price = -1
# for category_products in inventory.values():
#     for product in category_products:
#         ...
# print(f"The most expensive product is: {most_expensive_product_name}")`,expectedOutput:"The most expensive product is: [Name of your most expensive product]"}}},{id:"4-6",chapterId:4,title:"Advanced List Comprehensions",description:"Master powerful one-line list creation with conditions and nesting",difficulty:3,content:{introduction:"List comprehensions are a concise and readable way to create lists in Python. Advanced comprehensions can include conditional logic (`if` clauses) for filtering elements, `if-else` expressions for conditional assignment, and even nested loops for more complex list generation.",concept:"A list comprehension follows the general syntax: `[expression for item in iterable if condition]`. \n- The `expression` is what each element of the new list will be.\n- `for item in iterable` is the loop part.\n- `if condition` (optional) filters items from the iterable.\n- You can also use an `if-else` directly in the `expression` part: `[value_if_true if condition else value_if_false for item in iterable]`. \n- Nested `for` loops are also possible for iterating over nested iterables.",example:{code:`# Basic list comprehension (recap)
numbers = [1, 2, 3, 4, 5, 6]
squares = [x**2 for x in numbers]
print(f"Squares: {squares}")

# List comprehension with an 'if' condition (filtering)
even_squares = [x**2 for x in numbers if x % 2 == 0]
print(f"Squares of even numbers: {even_squares}")

# List comprehension with an 'if-else' in the expression
parity_labels = ["even" if x % 2 == 0 else "odd" for x in numbers]
print(f"Parity labels: {parity_labels}")

# Nested list comprehension (e.g., flatten a list of lists)
matrix = [[1, 2, 3], [4, 5], [6, 7, 8, 9]]
flattened_list = [element for row in matrix for element in row]
print(f"Flattened matrix: {flattened_list}")

# Transpose a matrix (list of lists) using nested comprehension
original_matrix = [[1, 2, 3], [4, 5, 6]] # 2x3 matrix
transposed_matrix = [[row[i] for row in original_matrix] for i in range(len(original_matrix[0]))]
print(f"Original Matrix: {original_matrix}")
print(f"Transposed Matrix: {transposed_matrix}") # Should be 3x2`,explanation:"We demonstrate various forms of list comprehensions: basic squaring, filtering for even numbers before squaring, using an `if-else` in the expression to assign labels, flattening a list of lists, and transposing a matrix. These show the power and conciseness of list comprehensions.",output:`Squares: [1, 4, 9, 16, 25, 36]
Squares of even numbers: [4, 16, 36]
Parity labels: ['odd', 'even', 'odd', 'even', 'odd', 'even']
Flattened matrix: [1, 2, 3, 4, 5, 6, 7, 8, 9]
Original Matrix: [[1, 2, 3], [4, 5, 6]]
Transposed Matrix: [[1, 4], [2, 5], [3, 6]]`},exercise:{instruction:'Given a list of strings: `words = ["apple", "Banana", "Cherry", "date", "Elderberry"]`. Use a list comprehension to create a new list containing only the words that start with an uppercase letter AND have a length greater than 5. Convert these selected words to lowercase in the new list.',starterCode:`words = ["apple", "Banana", "Cherry", "date", "Elderberry"]
# Use a list comprehension with multiple conditions and transformation
# selected_words = [... for word in words if ... and ...]
# print(selected_words)`,expectedOutput:"['banana', 'cherry', 'elderberry']"}}},{id:"4-7",chapterId:4,title:"Dictionary and Set Comprehensions",description:"Create dictionaries and sets with concise, expressive syntax",difficulty:3,content:{introduction:"Similar to list comprehensions, Python also offers concise syntax for creating dictionaries and sets. These comprehensions make your code more readable and often more efficient for constructing these data structures from iterables.",concept:"- **Dictionary Comprehension**: Syntax ` {key_expression: value_expression for item in iterable if condition} `. Creates a dictionary.\n- **Set Comprehension**: Syntax ` {expression for item in iterable if condition} `. Creates a set (automatically handles uniqueness). \nBoth can include conditional filtering and transformations on the items from the iterable.",example:{code:`# Dictionary comprehension: map numbers to their squares
numbers_list = [1, 2, 3, 4, 5]
squares_dictionary = {x: x**2 for x in numbers_list}
print(f"Squares dictionary: {squares_dictionary}")

# Dictionary comprehension with a condition
even_num_squares = {x: x**2 for x in numbers_list if x % 2 == 0}
print(f"Even number squares dictionary: {even_num_squares}")

# Creating a dictionary from two lists (using zip)
fruits = ["apple", "banana", "cherry"]
prices = [1.20, 0.50, 2.50]
fruit_price_dict = {fruit: price for fruit, price in zip(fruits, prices) if price < 2.0}
print(f"Affordable fruit prices: {fruit_price_dict}")

# Set comprehension: create a set of unique characters from a string
text = "hello world hello python"
unique_chars_set = {char for char in text if char.isalpha()} # only letters
print(f"Unique alphabetic characters: {sorted(list(unique_chars_set))}") # Sorted for consistent output

# Set comprehension with condition
numbers_set = {x**2 for x in range(10) if x % 2 != 0} # Squares of odd numbers < 10
print(f"Squares of odd numbers set: {numbers_set}")`,explanation:"We demonstrate dictionary comprehensions for creating dictionaries from lists (mapping numbers to squares, filtering, using `zip`). Set comprehensions are shown for extracting unique characters from a string and for creating a set based on a condition. These comprehensions provide a compact and Pythonic way to build dictionaries and sets.",output:`Squares dictionary: {1: 1, 2: 4, 3: 9, 4: 16, 5: 25}
Even number squares dictionary: {2: 4, 4: 16}
Affordable fruit prices: {'apple': 1.2, 'banana': 0.5}
Unique alphabetic characters: ['d', 'e', 'h', 'l', 'n', 'o', 'p', 'r', 't', 'w', 'y']
Squares of odd numbers set: {1, 9, 25, 49, 81}`},exercise:{instruction:'Given a list of words: `word_list = ["apple", "banana", "apple", "cherry", "banana", "date"]`. Use a dictionary comprehension to create a dictionary where keys are the unique words from the list and values are the lengths of these words.',starterCode:`word_list = ["apple", "banana", "apple", "cherry", "banana", "date"]
# Use a dictionary comprehension. Hint: you might want to get unique words first (e.g., using a set).
# word_lengths_dict = {word: len(word) for word in set(word_list)}
# print(word_lengths_dict)`,expectedOutput:"{'apple': 5, 'banana': 6, 'cherry': 6, 'date': 4}"}}},{id:"4-8",chapterId:4,title:"NamedTuples and DataClasses",description:"Create structured, readable data objects with named fields",difficulty:4,content:{introduction:"For creating more structured data objects than plain tuples or dictionaries, Python offers `collections.namedtuple` and (since Python 3.7) `dataclasses`. These provide ways to create simple classes for storing data with named fields, improving code readability and maintainability.",concept:"- **`collections.namedtuple`**: A factory function for creating tuple subclasses with named fields. Instances are immutable, lightweight, and accessible by name or index.\n- **`@dataclasses.dataclass`**: A decorator that automatically generates methods like `__init__()`, `__repr__()`, `__eq__()`, etc., for classes primarily used to store data. Fields are defined using type hints. Instances are mutable by default but can be made immutable (`frozen=True`).",example:{code:`# Using collections.namedtuple
from collections import namedtuple

# Define a named tuple type called "Point"
Point = namedtuple("Point", ["x", "y", "z"])

# Create instances
origin = Point(0, 0, 0)
pt1 = Point(x=1, y=2, z=3)

print(f"Origin: {origin}")
print(f"Point 1: x={pt1.x}, y={pt1.y}, z={pt1.z}")
print(f"Access by index: pt1[1] = {pt1[1]}") # pt1.y

# Using dataclasses (Python 3.7+)
from dataclasses import dataclass, field

@dataclass(frozen=False) # frozen=True makes it immutable
class InventoryItem:
    name: str
    unit_price: float
    quantity_on_hand: int = 0 # Default value
    tags: list[str] = field(default_factory=list) # Default for mutable types

    def total_value(self) -> float:
        return self.unit_price * self.quantity_on_hand

item1 = InventoryItem("Laptop", 999.99, 5, tags=["electronics", "computer"])
item2 = InventoryItem("Mouse", 25.50)
item2.quantity_on_hand = 10

print(f"\\nItem 1: {item1}")
print(f"Item 1 Name: {item1.name}, Total Value: \${item1.total_value():.2f}")
print(f"Item 2 Tags: {item2.tags}")`,explanation:"We first demonstrate `namedtuple` by creating a `Point` type. Instances are created and fields are accessed by name or index. Then, we use the `@dataclass` decorator to create an `InventoryItem` class. This automatically provides an initializer, string representation, etc. We show default values for fields and a custom method `total_value()`. `field(default_factory=list)` is used for mutable default values like lists.",output:`Origin: Point(x=0, y=0, z=0)
Point 1: x=1, y=2, z=3
Access by index: pt1[1] = 2

Item 1: InventoryItem(name='Laptop', unit_price=999.99, quantity_on_hand=5, tags=['electronics', 'computer'])
Item 1 Name: Laptop, Total Value: $4999.95
Item 2 Tags: []`},exercise:{instruction:"1. Define a `namedtuple` called `Book` with fields: `title`, `author`, and `isbn`.\n2. Create an instance of `Book`.\n3. Define a `dataclass` called `Movie` with fields: `title` (str), `director` (str), `year` (int), and `rating` (float, with a default of 0.0).\n4. Create an instance of `Movie`.\nPrint both instances.",starterCode:`# Import namedtuple and dataclass

# 1. Define and create Book instance
# Book = ...
# my_book = ...

# 2. Define and create Movie instance
# @dataclass
# class Movie:
#     ...
# my_movie = ...

# print(my_book)
# print(my_movie)`,expectedOutput:`Book(title='Sample Book', author='Author Name', isbn='1234567890')
Movie(title='Sample Movie', director='Director Name', year=2023, rating=0.0)`}}},{id:"4-9",chapterId:4,title:"The `collections` Module: Specialized Containers",description:"Explore advanced container datatypes like Counter, defaultdict, and deque",difficulty:4,content:{introduction:"Python's `collections` module provides specialized container datatypes that offer alternatives to the general-purpose built-ins (dict, list, set, tuple). These are useful for specific tasks and can often lead to more efficient or cleaner code.",concept:"Key data structures in `collections` include:\n- **`Counter`**: A dict subclass for counting hashable objects. Elements are stored as dictionary keys and their counts are stored as dictionary values.\n- **`defaultdict`**: A dict subclass that calls a factory function to supply missing values. If a key is accessed and not found, the factory function is called to create a default value for it.\n- **`deque`** (double-ended queue): A list-like container with fast appends and pops from both ends.\n- **`OrderedDict`**: A dict subclass that remembers the order entries were added (less critical since Python 3.7+ where standard dicts also remember insertion order).",example:{code:`from collections import Counter, defaultdict, deque, OrderedDict

# Counter: Count occurrences of items in a list
word_list = ["apple", "banana", "apple", "cherry", "apple", "banana", "orange"]
word_counts = Counter(word_list)
print(f"Word counts: {word_counts}")
print(f"Most common word: {word_counts.most_common(1)}")
print(f"Count of 'apple': {word_counts['apple']}")

# defaultdict: Group items (e.g., by first letter)
names = ["Alice", "Bob", "Anna", "Charlie", "Ben"]
names_by_letter = defaultdict(list) # Default factory is list, so new keys get []
for name in names:
    names_by_letter[name[0]].append(name)
print(f"\\nNames grouped by first letter: {dict(names_by_letter)}") # Convert to dict for cleaner print
print(f"Names starting with Z (default): {names_by_letter['Z']}")

# deque: Efficient appends and pops from both ends
queue = deque([1, 2, 3])
queue.append(4)       # Append to the right: deque([1, 2, 3, 4])
queue.appendleft(0)   # Append to the left: deque([0, 1, 2, 3, 4])
print(f"\\nDeque after appends: {queue}")
right_popped = queue.pop()      # Pop from the right: 4
left_popped = queue.popleft() # Pop from the left: 0
print(f"Deque after pops (right:{right_popped}, left:{left_popped}): {queue}")

# OrderedDict (maintains insertion order - standard dicts do this since Python 3.7)
ordered_data = OrderedDict()
ordered_data['first'] = 1
ordered_data['second'] = 2
ordered_data['third'] = 3
print(f"\\nOrderedDict: {ordered_data}")`,explanation:"We demonstrate `Counter` for frequency counting, `defaultdict` for grouping items without checking if a key exists, `deque` for efficient queue/stack operations from both ends, and `OrderedDict` which preserves insertion order (though standard Python dictionaries now also do this since version 3.7).",output:`Word counts: Counter({'apple': 3, 'banana': 2, 'cherry': 1, 'orange': 1})
Most common word: [('apple', 3)]
Count of 'apple': 3

Names grouped by first letter: {'A': ['Alice', 'Anna'], 'B': ['Bob', 'Ben'], 'C': ['Charlie']}
Names starting with Z (default): []

Deque after appends: deque([0, 1, 2, 3, 4])
Deque after pops (right:4, left:0): deque([1, 2, 3])

OrderedDict: OrderedDict([('first', 1), ('second', 2), ('third', 3)])`},exercise:{instruction:'1. Use `Counter` to find the frequency of each character in the string "abracadabra".\n2. Use `defaultdict(int)` to count word frequencies in the sentence "the quick brown fox jumps over the lazy dog". The default factory `int` will initialize counts to 0 for new words.',starterCode:`# Import Counter and defaultdict

# 1. Character frequency
# text1 = "abracadabra"
# char_counts = ...
# print(f"Character counts: {char_counts}")

# 2. Word frequency
# text2 = "the quick brown fox jumps over the lazy dog"
# word_freq = defaultdict(int)
# for word in text2.split():
#     ...
# print(f"Word frequencies: {dict(word_freq)}")`,expectedOutput:`Character counts: Counter({'a': 5, 'b': 2, 'r': 2, 'c': 1, 'd': 1})
Word frequencies: {'the': 2, 'quick': 1, 'brown': 1, 'fox': 1, 'jumps': 1, 'over': 1, 'lazy': 1, 'dog': 1}`}}},{id:"4-10",chapterId:4,title:"Working with JSON Data",description:"Parse (load) and create (dump) JSON data structures in Python",difficulty:3,content:{introduction:"JSON (JavaScript Object Notation) is a lightweight, text-based data interchange format. It's easy for humans to read and write, and easy for machines to parse and generate. Python has excellent built-in support for JSON via the `json` module, making it straightforward to work with web APIs, configuration files, and data exchange between different systems.",concept:"The `json` module provides two main functions:\n- **`json.dumps(obj, indent=None)`**: Serializes a Python object `obj` (like dicts, lists, strings, numbers, booleans, None) into a JSON formatted string. `indent` can be used for pretty-printing.\n- **`json.loads(s)`**: Deserializes a JSON formatted string `s` into a Python object.\nJSON objects map to Python dictionaries, JSON arrays map to Python lists, JSON strings to Python strings, etc.",example:{code:`import json

# Python dictionary (similar to a JSON object)
python_data = {
    "name": "Alice Wonderland",
    "age": 30,
    "is_active_user": True,
    "skills": ["Python", "Data Analysis", "SQL"],
    "contact": {
        "email": "alice@example.com",
        "phone": None # None becomes null in JSON
    }
}

# 1. Serialize Python object to JSON string (json.dumps)
json_string = json.dumps(python_data, indent=2) # indent for pretty printing
print("JSON String:")
print(json_string)

# 2. Deserialize JSON string back to Python object (json.loads)
parsed_python_data = json.loads(json_string)
print("\\nParsed Python Data (from JSON string):")
print(parsed_python_data)
print(f"Name from parsed data: {parsed_python_data['name']}")
print(f"First skill: {parsed_python_data['skills'][0]}")
print(f"Email: {parsed_python_data['contact']['email']}")

# Example of a JSON string you might receive
incoming_json_string = '{"id": 123, "productName": "Wireless Mouse", "price": 29.99, "tags": ["electronics", "computer accessory"]}'
product_object = json.loads(incoming_json_string)
print(f"\\nProduct Name: {product_object['productName']}")`,explanation:"We start with a Python dictionary `python_data`. `json.dumps()` converts this into a JSON formatted string, `json_string`, with an indent of 2 for readability. Then, `json.loads()` parses this `json_string` back into an equivalent Python dictionary, `parsed_python_data`. We also show parsing an example JSON string directly.",output:`JSON String:
{
  "name": "Alice Wonderland",
  "age": 30,
  "is_active_user": true,
  "skills": [
    "Python",
    "Data Analysis",
    "SQL"
  ],
  "contact": {
    "email": "alice@example.com",
    "phone": null
  }
}

Parsed Python Data (from JSON string):
{'name': 'Alice Wonderland', 'age': 30, 'is_active_user': True, 'skills': ['Python', 'Data Analysis', 'SQL'], 'contact': {'email': 'alice@example.com', 'phone': None}}
Name from parsed data: Alice Wonderland
First skill: Python
Email: alice@example.com

Product Name: Wireless Mouse`},exercise:{instruction:`1. Create a Python dictionary representing a configuration with at least three settings (e.g., \`{"theme": "dark", "fontSize": 14, "autoSave": True}\`).
2. Convert this dictionary to a JSON string with an indent of 4.
3. Print the JSON string.
4. Now, take the JSON string \`data_str = '{"book_title": "The Great Gatsby", "author": "F. Scott Fitzgerald", "year_published": 1925}'\` and convert it back into a Python dictionary. Print the author's name from the resulting dictionary.`,starterCode:`import json

# 1. Create Python dictionary for configuration
# config_dict = ...

# 2. Convert to JSON string
# config_json_string = ...

# 3. Print JSON string
# print("Configuration JSON:")
# print(config_json_string)

# 4. Parse given JSON string and print author
# data_str = '{"book_title": "The Great Gatsby", "author": "F. Scott Fitzgerald", "year_published": 1925}'
# book_dict = ...
# print(f"\\nAuthor from parsed data: {book_dict['author']}")`,expectedOutput:`Configuration JSON:
{
    "theme": "dark",
    "fontSize": 14,
    "autoSave": true
}

Author from parsed data: F. Scott Fitzgerald`}}}],Gp=100,Vp=100,Jp=500,wl=g.createContext(void 0),Yp=({children:n})=>{const[e,t]=g.useState(new Set),[r,s]=g.useState(0),[o,i]=g.useState(1);g.useEffect(()=>{const m=localStorage.getItem("pythonProgress");if(m)try{const y=JSON.parse(m);y&&Array.isArray(y.completed)&&typeof y.userXp=="number"&&typeof y.userLevel=="number"?(t(new Set(y.completed)),s(y.userXp),i(y.userLevel)):(console.warn("Malformed progress data in localStorage. Resetting progress."),localStorage.removeItem("pythonProgress"))}catch(y){console.error("Failed to parse progress from localStorage. Resetting progress.",y),localStorage.removeItem("pythonProgress")}},[]),g.useEffect(()=>{localStorage.setItem("pythonProgress",JSON.stringify({completed:Array.from(e),userXp:r,userLevel:o}))},[e,r,o]);const a=m=>{if(!e.has(m)){const y=new Set(e);y.add(m),t(y);const v=r+Vp;s(v);const p=Math.floor(v/Jp)+1;i(p)}},l=m=>e.has(m),d=()=>e.size/Gp*100,u=m=>We.filter(y=>y.chapterId===m),f=m=>u(m).length,h=m=>{const y=u(m),v=y.length;if(v===0)return{completed:0,total:0,percentage:0};const p=y.filter(b=>e.has(b.id)).length;return{completed:p,total:v,percentage:p/v*100}};return c.jsx(wl.Provider,{value:{completedLessons:e,xp:r,level:o,completeLesson:a,isLessonCompleted:l,getOverallProgress:d,getChapterProgress:h,getTotalLessonsInChapter:f},children:n})},Or=()=>{const n=g.useContext(wl);if(n===void 0)throw new Error("useProgress must be used within a ProgressProvider. Ensure your component tree is wrapped correctly.");return n},Qp=({id:n,title:e,description:t,difficulty:r,isLocked:s,onClick:o})=>{const{isLessonCompleted:i}=Or(),a=i(n);return c.jsxs(Ke,{className:`
        relative overflow-hidden transition-all duration-300 cursor-pointer
        ${s?"bg-gray-800/50 border-gray-700 opacity-60":a?"bg-gradient-to-br from-green-900/50 to-cyan-900/50 border-green-500/50 hover:border-green-400":"bg-gradient-to-br from-gray-800 to-gray-900 border-cyan-500/30 hover:border-cyan-400 hover:shadow-lg hover:shadow-cyan-500/20"}
      `,onClick:s?void 0:o,children:[c.jsx(Ge,{className:"pb-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Ve,{className:`text-lg ${s?"text-gray-500":a?"text-green-400":"text-cyan-400"}`,children:e}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex",children:Array.from({length:r},(l,d)=>c.jsx(rd,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"},d))}),s?c.jsx(zi,{className:"h-5 w-5 text-gray-500"}):a?c.jsx(Hi,{className:"h-5 w-5 text-green-400"}):null]})]})}),c.jsxs(Je,{children:[c.jsx("p",{className:`text-sm ${s?"text-gray-500":"text-gray-300"} mb-4`,children:t}),!s&&c.jsx(ae,{variant:"ghost",className:`w-full ${a?"text-green-400 hover:text-green-300 hover:bg-green-500/10":"text-cyan-400 hover:text-cyan-300 hover:bg-cyan-500/10"}`,children:a?"Review Lesson":"Start Lesson"})]}),a&&c.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})},Xp=100,rs=500,Zp=()=>{const{completedLessons:n,xp:e,level:t,getOverallProgress:r}=Or(),s=r(),o=n.size,i=(t-1)*rs,a=e-i,l=a/rs*100,d=t+1;return c.jsxs("div",{className:"space-y-6 p-6 bg-gray-800/50 border border-cyan-500/30 rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Wi,{className:"h-8 w-8 text-yellow-400"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-400",children:"Current Level"}),c.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:t})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm text-gray-400",children:"Total XP"}),c.jsx("p",{className:"text-2xl font-bold text-green-400",children:e})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsxs("span",{className:"text-sm font-medium text-cyan-300 flex items-center",children:[c.jsx(sd,{className:"h-4 w-4 mr-2"}),"Overall Progress"]}),c.jsxs("span",{className:"text-sm font-medium text-cyan-300",children:[o," / ",Xp," Lessons"]})]}),c.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:c.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-500 h-2.5 rounded-full transition-all duration-500 ease-out",style:{width:`${s}%`}})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsxs("span",{className:"text-sm font-medium text-green-300 flex items-center",children:[c.jsx(od,{className:"h-4 w-4 mr-2"}),"XP to Level ",d]}),c.jsxs("span",{className:"text-sm font-medium text-green-300",children:[a," / ",rs," XP"]})]}),c.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:c.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2.5 rounded-full transition-all duration-500 ease-out",style:{width:`${l}%`}})})]})]})},xl=g.createContext(void 0),_l=({children:n})=>{const[e,t]=g.useState("dark");g.useEffect(()=>{const s=localStorage.getItem("theme");s&&t(s)},[]),g.useEffect(()=>{localStorage.setItem("theme",e),document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(e)},[e]);const r=()=>{t(s=>s==="dark"?"light":"dark")};return c.jsx(xl.Provider,{value:{theme:e,toggleTheme:r},children:n})},em=()=>{const n=g.useContext(xl);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n},tm=()=>{const{theme:n,toggleTheme:e}=em();return c.jsx(ae,{onClick:e,variant:"ghost",size:"sm",className:"text-cyan-400 hover:text-cyan-300 hover:bg-cyan-500/10",children:n==="dark"?c.jsx(id,{className:"h-4 w-4"}):c.jsx(ad,{className:"h-4 w-4"})})};function nm(n,e=[]){let t=[];function r(o,i){const a=g.createContext(i),l=t.length;t=[...t,i];function d(f){const{scope:h,children:m,...y}=f,v=(h==null?void 0:h[n][l])||a,p=g.useMemo(()=>y,Object.values(y));return c.jsx(v.Provider,{value:p,children:m})}function u(f,h){const m=(h==null?void 0:h[n][l])||a,y=g.useContext(m);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const s=()=>{const o=t.map(i=>g.createContext(i));return function(a){const l=(a==null?void 0:a[n])||o;return g.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[r,rm(s,...e)]}function rm(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:d})=>{const f=l(o)[`__scope${d}`];return{...a,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return t.scopeName=e.scopeName,t}var sm=g.createContext(void 0);function oo(n){const e=g.useContext(sm);return n||e||"ltr"}var ss="rovingFocusGroup.onEntryFocus",om={bubbles:!1,cancelable:!0},Ir="RovingFocusGroup",[js,Cl,im]=qs(Ir),[am,kl]=nm(Ir,[im]),[lm,cm]=am(Ir),Sl=g.forwardRef((n,e)=>c.jsx(js.Provider,{scope:n.__scopeRovingFocusGroup,children:c.jsx(js.Slot,{scope:n.__scopeRovingFocusGroup,children:c.jsx(dm,{...n,ref:e})})}));Sl.displayName=Ir;var dm=g.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=n,h=g.useRef(null),m=Ie(e,h),y=oo(o),[v=null,p]=gn({prop:i,defaultProp:a,onChange:l}),[b,x]=g.useState(!1),w=hn(d),_=Cl(t),C=g.useRef(!1),[S,I]=g.useState(0);return g.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(ss,w),()=>N.removeEventListener(ss,w)},[w]),c.jsx(lm,{scope:t,orientation:r,dir:y,loop:s,currentTabStopId:v,onItemFocus:g.useCallback(N=>p(N),[p]),onItemShiftTab:g.useCallback(()=>x(!0),[]),onFocusableItemAdd:g.useCallback(()=>I(N=>N+1),[]),onFocusableItemRemove:g.useCallback(()=>I(N=>N-1),[]),children:c.jsx(ce.div,{tabIndex:b||S===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...n.style},onMouseDown:ne(n.onMouseDown,()=>{C.current=!0}),onFocus:ne(n.onFocus,N=>{const D=!C.current;if(N.target===N.currentTarget&&D&&!b){const U=new CustomEvent(ss,om);if(N.currentTarget.dispatchEvent(U),!U.defaultPrevented){const B=_().filter(j=>j.focusable),L=B.find(j=>j.active),H=B.find(j=>j.id===v),O=[L,H,...B].filter(Boolean).map(j=>j.ref.current);El(O,u)}}C.current=!1}),onBlur:ne(n.onBlur,()=>x(!1))})})}),Tl="RovingFocusGroupItem",Pl=g.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:o,...i}=n,a=br(),l=o||a,d=cm(Tl,t),u=d.currentTabStopId===l,f=Cl(t),{onFocusableItemAdd:h,onFocusableItemRemove:m}=d;return g.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),c.jsx(js.ItemSlot,{scope:t,id:l,focusable:r,active:s,children:c.jsx(ce.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...i,ref:e,onMouseDown:ne(n.onMouseDown,y=>{r?d.onItemFocus(l):y.preventDefault()}),onFocus:ne(n.onFocus,()=>d.onItemFocus(l)),onKeyDown:ne(n.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=fm(y,d.orientation,d.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=f().filter(x=>x.focusable).map(x=>x.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const x=b.indexOf(y.currentTarget);b=d.loop?pm(b,x+1):b.slice(x+1)}setTimeout(()=>El(b))}})})})});Pl.displayName=Tl;var um={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hm(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function fm(n,e,t){const r=hm(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return um[r]}function El(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function pm(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var mm=Sl,gm=Pl,io="Tabs",[ym,Pv]=Fn(io,[kl]),Al=kl(),[vm,ao]=ym(io),jl=g.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:a,activationMode:l="automatic",...d}=n,u=oo(a),[f,h]=gn({prop:r,onChange:s,defaultProp:o});return c.jsx(vm,{scope:t,baseId:br(),value:f,onValueChange:h,orientation:i,dir:u,activationMode:l,children:c.jsx(ce.div,{dir:u,"data-orientation":i,...d,ref:e})})});jl.displayName=io;var Nl="TabsList",Rl=g.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,o=ao(Nl,t),i=Al(t);return c.jsx(mm,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:c.jsx(ce.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});Rl.displayName=Nl;var Ol="TabsTrigger",Il=g.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...o}=n,i=ao(Ol,t),a=Al(t),l=Dl(i.baseId,r),d=Ml(i.baseId,r),u=r===i.value;return c.jsx(gm,{asChild:!0,...a,focusable:!s,active:u,children:c.jsx(ce.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...o,ref:e,onMouseDown:ne(n.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:ne(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:ne(n.onFocus,()=>{const f=i.activationMode!=="manual";!u&&!s&&f&&i.onValueChange(r)})})})});Il.displayName=Ol;var Ll="TabsContent",$l=g.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:o,...i}=n,a=ao(Ll,t),l=Dl(a.baseId,r),d=Ml(a.baseId,r),u=r===a.value,f=g.useRef(u);return g.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),c.jsx(vr,{present:s||u,children:({present:h})=>c.jsx(ce.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:d,tabIndex:0,...i,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:h&&o})})});$l.displayName=Ll;function Dl(n,e){return`${n}-trigger-${e}`}function Ml(n,e){return`${n}-content-${e}`}var bm=jl,Fl=Rl,Ul=Il,Bl=$l;const ql=bm,lo=g.forwardRef(({className:n,...e},t)=>c.jsx(Fl,{ref:t,className:ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));lo.displayName=Fl.displayName;const pt=g.forwardRef(({className:n,...e},t)=>c.jsx(Ul,{ref:t,className:ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));pt.displayName=Ul.displayName;const mt=g.forwardRef(({className:n,...e},t)=>c.jsx(Bl,{ref:t,className:ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));mt.displayName=Bl.displayName;const hi=({initialCode:n,expectedOutput:e,onRun:t})=>{const[r,s]=g.useState(n),[o,i]=g.useState(!1),[a,l]=g.useState("Ready to run Python code..."),[d,u]=g.useState(!1),f=g.useRef(0),h=()=>{if(!r.trim()){l("Please enter some Python code to execute.");return}u(!0),l("Running...");const v=++f.current;try{const p=document.createElement("div");p.id=`py-output-${v}`,p.style.display="none",document.body.appendChild(p);const b=document.createElement("script");b.type="py";const x=`
import sys
import io
from contextlib import redirect_stdout
from pyscript import document

output_buffer = io.StringIO()
try:
    with redirect_stdout(output_buffer):
${r.split(`
`).map(w=>"        "+w).join(`
`)}
    
    result = output_buffer.getvalue()
    output_div = document.querySelector("#py-output-${v}")
    if output_div:
        if result.strip():
            output_div.innerText = result.strip()
        else:
            output_div.innerText = "Code executed successfully"
except Exception as e:
    output_div = document.querySelector("#py-output-${v}")
    if output_div:
        output_div.innerText = f"Error: {str(e)}"
`;b.textContent=x,document.body.appendChild(b),setTimeout(()=>{const w=document.getElementById(`py-output-${v}`);w?(l(w.innerText||"No output"),w.remove()):l("Execution completed"),b.remove(),u(!1)},1e3),t==null||t(r)}catch(p){l(`Error: ${p}`),u(!1)}},m=async()=>{try{await navigator.clipboard.writeText(r),i(!0),setTimeout(()=>i(!1),1500)}catch(v){console.error("Failed to copy code:",v)}},y=v=>{if((v.ctrlKey||v.metaKey)&&v.key==="Enter"&&(v.preventDefault(),h()),v.key==="Tab"){v.preventDefault();const p=v.target,b=p.selectionStart,x=p.selectionEnd,w=r.substring(0,b)+"    "+r.substring(x);s(w),setTimeout(()=>{p.selectionStart=p.selectionEnd=b+4},0)}};return c.jsxs("div",{className:"bg-gray-900 dark:bg-gray-950 rounded-lg overflow-hidden border border-cyan-500/30 shadow-lg",children:[c.jsxs("div",{className:"flex items-center justify-between bg-gray-800 dark:bg-gray-900 px-4 py-2 border-b border-cyan-500/30",children:[c.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"Python Editor"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ae,{onClick:m,variant:"ghost",size:"sm",className:"text-cyan-400 hover:text-cyan-300 hover:bg-cyan-500/10",children:o?c.jsx(ld,{className:"h-4 w-4"}):c.jsx(cd,{className:"h-4 w-4"})}),c.jsxs(ae,{onClick:h,variant:"ghost",size:"sm",className:"text-green-400 hover:text-green-300 hover:bg-green-500/10",disabled:d,children:[c.jsx(dd,{className:"h-4 w-4 mr-1"}),d?"Running...":"Run"]})]})]}),c.jsx("div",{className:"p-4",children:c.jsx("textarea",{value:r,onChange:v=>s(v.target.value),onKeyDown:y,className:"w-full h-32 bg-transparent text-white font-mono text-sm resize-none outline-none leading-relaxed",spellCheck:!1,placeholder:"Write your Python code here... (Ctrl+Enter to run)",style:{tabSize:4}})}),c.jsxs("div",{className:"border-t border-cyan-500/30 bg-gray-800 dark:bg-gray-900",children:[c.jsxs("div",{className:"px-4 py-2 text-green-400 font-mono text-sm flex items-center justify-between",children:[c.jsx("span",{children:"Output:"}),e&&c.jsxs("span",{className:"text-xs text-gray-400",children:["Expected: ",c.jsx("code",{className:"bg-gray-700 px-1 rounded",children:e})]})]}),c.jsx("div",{className:"px-4 pb-4 min-h-[2rem]",children:c.jsx("div",{className:`font-mono text-sm whitespace-pre-wrap ${a.includes("Error:")?"text-red-400":a.includes("Running")?"text-yellow-400":"text-green-400"}`,children:a})})]})]})},wm=({lessonId:n,chapterId:e,onBack:t,setSelectedLesson:r})=>{const{completeLesson:s,isLessonCompleted:o}=Or(),[i,a]=g.useState(!1),l=g.useMemo(()=>We.find(w=>w.id===n),[n]),d=g.useMemo(()=>Nt.find(w=>w.id===e),[e]),u=g.useMemo(()=>We.filter(w=>w.chapterId===e),[e]),f=g.useMemo(()=>u.findIndex(w=>w.id===n),[n,u]),h=g.useMemo(()=>We.findIndex(w=>w.id===n),[n]),m=g.useMemo(()=>h>0?We[h-1].id:null,[h]),y=g.useMemo(()=>h<We.length-1?We[h+1].id:null,[h]);if(!l||!d)return c.jsx("div",{className:"text-white p-8",children:"Lesson or Chapter not found. Please go back."});const v=o(n),p=()=>{s(n)},b=()=>{m&&r(m)},x=()=>{y&&r(y)};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white",children:c.jsxs("div",{className:"container mx-auto px-4 py-6",children:[c.jsxs("div",{className:"mb-2 text-sm text-gray-400",children:[c.jsx("span",{onClick:t,className:"cursor-pointer hover:text-cyan-400",children:"Python Quest"})," / ",c.jsx("span",{onClick:t,className:"cursor-pointer hover:text-cyan-400",children:d.title})," / ",c.jsx("span",{className:"text-white",children:l.title})]}),c.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-3xl font-bold text-cyan-400 mb-1",children:l.title}),c.jsxs("p",{className:"text-gray-300 text-lg",children:["Chapter ",d.id,": ",d.title]}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l.description})]}),c.jsxs("div",{className:"flex flex-col items-start md:items-end gap-2 w-full md:w-auto",children:[v&&c.jsxs("div",{className:"flex items-center gap-2 text-green-400 self-start md:self-end",children:[c.jsx(Hi,{className:"h-5 w-5"}),c.jsx("span",{children:"Completed"})]}),c.jsxs(ae,{onClick:t,variant:"ghost",size:"sm",className:"text-cyan-400 hover:text-cyan-300 hover:bg-cyan-500/10",children:[c.jsx(ud,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]})]}),c.jsxs("div",{className:"flex items-center justify-between mb-8 p-4 bg-gray-800/50 border border-cyan-500/20 rounded-lg",children:[c.jsxs(ae,{onClick:b,disabled:!m,variant:"outline",size:"sm",className:"border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/10",children:[c.jsx(hd,{className:"h-4 w-4 mr-1 md:mr-2"})," ",c.jsx("span",{className:"hidden md:inline",children:"Previous"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("p",{className:"text-sm text-gray-300",children:["Lesson ",f+1," of ",u.length," in this chapter"]}),u.length>0&&c.jsx("div",{className:"w-24 md:w-32 h-2 bg-gray-700 rounded-full overflow-hidden mx-auto mt-1",children:c.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${(f+1)/u.length*100}%`}})})]}),c.jsxs(ae,{onClick:x,disabled:!y,variant:"outline",size:"sm",className:"border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/10",children:[c.jsx("span",{className:"hidden md:inline",children:"Next"})," ",c.jsx(fd,{className:"h-4 w-4 ml-1 md:ml-2"})]})]}),c.jsxs(ql,{defaultValue:"learn",className:"space-y-6",children:[c.jsxs(lo,{className:"bg-gray-800 border border-cyan-500/30",children:[c.jsxs(pt,{value:"learn",className:"data-[state=active]:bg-cyan-500/20 data-[state=active]:text-cyan-400",children:[c.jsx(pd,{className:"h-4 w-4 mr-2"}),"Learn"]}),c.jsxs(pt,{value:"practice",className:"data-[state=active]:bg-cyan-500/20 data-[state=active]:text-cyan-400",children:[c.jsx(ps,{className:"h-4 w-4 mr-2"}),"Practice"]})]}),c.jsxs(mt,{value:"learn",className:"space-y-6",children:[c.jsxs(Ke,{className:"bg-gradient-to-br from-gray-800 to-gray-900 border-cyan-500/30",children:[c.jsx(Ge,{children:c.jsx(Ve,{className:"text-cyan-400",children:"Introduction"})}),c.jsx(Je,{children:c.jsx("p",{className:"text-gray-300 leading-relaxed",children:l.content.introduction})})]}),c.jsxs(Ke,{className:"bg-gradient-to-br from-gray-800 to-gray-900 border-cyan-500/30",children:[c.jsx(Ge,{children:c.jsx(Ve,{className:"text-cyan-400",children:"Concept"})}),c.jsxs(Je,{children:[c.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:l.content.concept}),c.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-cyan-500/30",children:[c.jsx("h4",{className:"text-cyan-400 font-semibold mb-2",children:"Example:"}),c.jsx(hi,{initialCode:l.content.example.code,expectedOutput:l.content.example.output}),c.jsx("p",{className:"text-gray-300 text-sm mt-3",children:l.content.example.explanation})]})]})]})]}),c.jsx(mt,{value:"practice",className:"space-y-6",children:c.jsxs(Ke,{className:"bg-gradient-to-br from-gray-800 to-gray-900 border-cyan-500/30",children:[c.jsx(Ge,{children:c.jsx(Ve,{className:"text-cyan-400",children:"Your Challenge"})}),c.jsxs(Je,{children:[c.jsx("p",{className:"text-gray-300 mb-4",children:l.content.exercise.instruction}),c.jsx(hi,{initialCode:l.content.exercise.starterCode,expectedOutput:l.content.exercise.expectedOutput}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-6 gap-4",children:[c.jsxs(ae,{onClick:()=>a(!i),variant:"outline",className:"border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/10 w-full sm:w-auto",children:[i?"Hide":"Show"," Hint"]}),c.jsxs(ae,{onClick:p,className:`
                      w-full sm:w-auto
                      ${v?"bg-green-600 hover:bg-green-700 cursor-not-allowed":"bg-gradient-to-r from-cyan-500 to-green-500 hover:from-cyan-600 hover:to-green-600"}
                    `,disabled:v,children:[c.jsx(md,{className:"h-4 w-4 mr-2"}),v?"Lesson Completed!":"Mark as Complete"]})]}),i&&c.jsx("div",{className:"mt-4 p-4 bg-yellow-900/20 border border-yellow-500/30 rounded-lg",children:c.jsxs("p",{className:"text-yellow-400 text-sm",children:["Expected output: ",c.jsx("code",{className:"bg-gray-800 px-2 py-1 rounded",children:l.content.exercise.expectedOutput})]})})]})]})})]})]})})},xm="modulepreload",_m=function(n,e){return new URL(n,e).href},fi={},Bn=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(d=>{if(d=_m(d,r),d in fi)return;fi[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(!!r)for(let y=i.length-1;y>=0;y--){const v=i[y];if(v.href===d&&(!u||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${f}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":xm,u||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},Cm=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Bn(async()=>{const{default:r}=await Promise.resolve().then(()=>wn);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class co extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class km extends co{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Sm extends co{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Tm extends co{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ns;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Ns||(Ns={}));var Pm=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(a,l)}d((r=r.apply(n,e||[])).next())})};class Em{constructor(e,{headers:t={},customFetch:r,region:s=Ns.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=Cm(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Pm(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let d;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(a["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(a["Content-Type"]="application/json",d=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(y=>{throw new km(y)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new Sm(u);if(!u.ok)throw new Tm(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield u.json():h==="application/octet-stream"?m=yield u.blob():h==="text/event-stream"?m=u:h==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var we={},uo={},Lr={},qn={},$r={},Dr={},Am=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mn=Am();const jm=mn.fetch,zl=mn.fetch.bind(mn),Hl=mn.Headers,Nm=mn.Request,Rm=mn.Response,wn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Hl,Request:Nm,Response:Rm,default:zl,fetch:jm},Symbol.toStringTag,{value:"Module"})),Om=Cd(wn);var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});let Im=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Mr.default=Im;var Wl=Ee&&Ee.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Dr,"__esModule",{value:!0});const Lm=Wl(Om),$m=Wl(Mr);let Dm=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Lm.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,a,l;let d=null,u=null,f=null,h=o.status,m=o.statusText;if(o.ok){if(this.method!=="HEAD"){const b=await o.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=b:u=JSON.parse(b))}const v=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),p=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await o.text();try{d=JSON.parse(v),Array.isArray(d)&&o.status===404&&(u=[],d=null,h=200,m="OK")}catch{o.status===404&&v===""?(h=204,m="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((l=d==null?void 0:d.details)===null||l===void 0)&&l.includes("0 rows"))&&(d=null,h=200,m="OK"),d&&this.shouldThrowOnError)throw new $m.default(d)}return{error:d,data:u,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,a,l;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};Dr.default=Dm;var Mm=Ee&&Ee.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($r,"__esModule",{value:!0});const Fm=Mm(Dr);let Um=class extends Fm.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${l};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};$r.default=Um;var Bm=Ee&&Ee.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qn,"__esModule",{value:!0});const qm=Bm($r);let zm=class extends qm.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};qn.default=zm;var Hm=Ee&&Ee.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Lr,"__esModule",{value:!0});const kn=Hm(qn);let Wm=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let o=!1;const i=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new kn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),t&&o.push(`count=${t}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const i=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(i.length>0){const a=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new kn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:o=!0}={}){const i="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new kn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new kn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new kn.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Lr.default=Wm;var Fr={},Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.version=void 0;Ur.version="0.0.0-automated";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.DEFAULT_HEADERS=void 0;const Km=Ur;Fr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Km.version}`};var Kl=Ee&&Ee.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(uo,"__esModule",{value:!0});const Gm=Kl(Lr),Vm=Kl(qn),Jm=Fr;let Ym=class Gl{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Jm.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Gm.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Gl(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:o}={}){let i;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(i=r?"HEAD":"GET",Object.entries(t).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{a.searchParams.append(u,f)})):(i="POST",l=t);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new Vm.default({method:i,url:a,headers:d,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};uo.default=Ym;var xn=Ee&&Ee.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(we,"__esModule",{value:!0});we.PostgrestError=we.PostgrestBuilder=we.PostgrestTransformBuilder=we.PostgrestFilterBuilder=we.PostgrestQueryBuilder=we.PostgrestClient=void 0;const Vl=xn(uo);we.PostgrestClient=Vl.default;const Jl=xn(Lr);we.PostgrestQueryBuilder=Jl.default;const Yl=xn(qn);we.PostgrestFilterBuilder=Yl.default;const Ql=xn($r);we.PostgrestTransformBuilder=Ql.default;const Xl=xn(Dr);we.PostgrestBuilder=Xl.default;const Zl=xn(Mr);we.PostgrestError=Zl.default;var Qm=we.default={PostgrestClient:Vl.default,PostgrestQueryBuilder:Jl.default,PostgrestFilterBuilder:Yl.default,PostgrestTransformBuilder:Ql.default,PostgrestBuilder:Xl.default,PostgrestError:Zl.default};const{PostgrestClient:Xm,PostgrestQueryBuilder:Ov,PostgrestFilterBuilder:Iv,PostgrestTransformBuilder:Lv,PostgrestBuilder:$v,PostgrestError:Dv}=Qm;let Rs;typeof window>"u"?Rs=require("ws"):Rs=window.WebSocket;const Zm=Rs,eg="2.11.10",tg={"X-Client-Info":`realtime-js/${eg}`},ng="1.0.0",ec=1e4,rg=1e3;var tn;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(tn||(tn={}));var ge;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ge||(ge={}));var Oe;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Oe||(Oe={}));var Os;(function(n){n.websocket="websocket"})(Os||(Os={}));var It;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(It||(It={}));class sg{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),o=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+s));i=i+s;const l=r.decode(e.slice(i,i+o));i=i+o;const d=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:l,payload:d}}}class tc{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var se;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(se||(se={}));const pi=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,i)=>(o[i]=og(i,n,e,s),o),{})},og=(n,e,t,r)=>{const s=e.find(a=>a.name===n),o=s==null?void 0:s.type,i=t[n];return o&&!r.includes(o)?nc(o,i):Is(i)},nc=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return cg(e,t)}switch(n){case se.bool:return ig(e);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return ag(e);case se.json:case se.jsonb:return lg(e);case se.timestamp:return dg(e);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return Is(e);default:return Is(e)}},Is=n=>n,ig=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},ag=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},lg=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},cg=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const i=n.slice(1,t);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>nc(e,a))}return n},dg=n=>typeof n=="string"?n.replace(" ","T"):n,rc=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class os{constructor(e,t,r={},s=ec){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var mi;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(mi||(mi={}));class En{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=En.syncState(this.state,s,o,i),this.pendingDiffs.forEach(l=>{this.state=En.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=En.syncDiff(this.state,s,o,i),a())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const o=this.cloneDeep(e),i=this.transformState(t),a={},l={};return this.map(o,(d,u)=>{i[d]||(l[d]=u)}),this.map(i,(d,u)=>{const f=o[d];if(f){const h=u.map(p=>p.presence_ref),m=f.map(p=>p.presence_ref),y=u.filter(p=>m.indexOf(p.presence_ref)<0),v=f.filter(p=>h.indexOf(p.presence_ref)<0);y.length>0&&(a[d]=y),v.length>0&&(l[d]=v)}else a[d]=u}),this.syncDiff(o,{joins:a,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:o,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(a,l)=>{var d;const u=(d=e[a])!==null&&d!==void 0?d:[];if(e[a]=this.cloneDeep(l),u.length>0){const f=e[a].map(m=>m.presence_ref),h=u.filter(m=>f.indexOf(m.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(i,(a,l)=>{let d=e[a];if(!d)return;const u=l.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),e[a]=d,s(a,d,l),d.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gi;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(gi||(gi={}));var yi;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(yi||(yi={}));var rt;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(rt||(rt={}));class ho{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new os(this,Oe.join,this.params,this.timeout),this.rejoinTimer=new tc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ge.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Oe.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new En(this),this.broadcastEndpointURL=rc(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:i,private:a}}=this.params;this._onError(u=>e==null?void 0:e(rt.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(rt.CLOSED));const l={},d={broadcast:o,presence:i,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){e==null||e(rt.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,y=[];for(let v=0;v<m;v++){const p=h[v],{filter:{event:b,schema:x,table:w,filter:_}}=p,C=u&&u[v];if(C&&C.event===b&&C.schema===x&&C.table===w&&C.filter===_)y.push(Object.assign(Object.assign({},p),{id:C.id}));else{this.unsubscribe(),this.state=ge.errored,e==null||e(rt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(rt.SUBSCRIBED);return}}).receive("error",u=>{this.state=ge.errored,e==null||e(rt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(rt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ge.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Oe.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const s=new os(this,Oe.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(o),i}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new os(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,o;const i=e.toLocaleLowerCase(),{close:a,error:l,leave:d,join:u}=Oe;if(r&&[a,l,d,u].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var y,v,p;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((p=(v=m.filter)===null||v===void 0?void 0:v.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===i}).map(m=>m.callback(h,r)):(o=this.bindings[i])===null||o===void 0||o.filter(m=>{var y,v,p,b,x,w;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const _=m.id,C=(y=m.filter)===null||y===void 0?void 0:y.event;return _&&((v=t.ids)===null||v===void 0?void 0:v.includes(_))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const _=(x=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:v,table:p,commit_timestamp:b,type:x,errors:w}=y;h=Object.assign(Object.assign({},{schema:v,table:p,commit_timestamp:b,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(y))}m.callback(h,r)})}_isClosed(){return this.state===ge.closed}_isJoined(){return this.state===ge.joined}_isJoining(){return this.state===ge.joining}_isLeaving(){return this.state===ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),o={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ho.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Oe.close,{},e)}_onError(e){this._on(Oe.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=pi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=pi(e.columns,e.old_record)),t}}const vi=()=>{},ug=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hg{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=tg,this.params={},this.timeout=ec,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vi,this.ref=0,this.logger=vi,this.conn=null,this.sendBuffer=[],this.serializer=new sg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...a)=>Bn(async()=>{const{default:l}=await Promise.resolve().then(()=>wn);return{default:l}},void 0,import.meta.url).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${e}/${Os.websocket}`,this.httpEndpoint=rc(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(o,i)=>i(JSON.stringify(o)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new tc(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Zm),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new fg(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ng}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case tn.connecting:return It.Connecting;case tn.open:return It.Open;case tn.closing:return It.Closing;default:return It.Closed}}isConnected(){return this.connectionState()===It.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new ho(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:r,payload:s,ref:o}=e,i=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Oe.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(rg,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:o,ref:i}=t;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Oe.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([ug],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class fg{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=tn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class fo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function he(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class pg extends fo{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ls extends fo{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var mg=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(a,l)}d((r=r.apply(n,e||[])).next())})};const sc=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Bn(async()=>{const{default:r}=await Promise.resolve().then(()=>wn);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},gg=()=>mg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bn(()=>Promise.resolve().then(()=>wn),void 0,import.meta.url)).Response:Response}),$s=n=>{if(Array.isArray(n))return n.map(t=>$s(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=$s(r)}),e};var Ut=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(a,l)}d((r=r.apply(n,e||[])).next())})};const is=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),yg=(n,e,t)=>Ut(void 0,void 0,void 0,function*(){const r=yield gg();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{e(new pg(is(s),n.status||500))}).catch(s=>{e(new Ls(is(s),s))}):e(new Ls(is(n),n))}),vg=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),t))};function zn(n,e,t,r,s,o){return Ut(this,void 0,void 0,function*(){return new Promise((i,a)=>{n(t,vg(e,r,s,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>yg(l,a,r))})})}function mr(n,e,t,r){return Ut(this,void 0,void 0,function*(){return zn(n,"GET",e,t,r)})}function ft(n,e,t,r,s){return Ut(this,void 0,void 0,function*(){return zn(n,"POST",e,r,s,t)})}function bg(n,e,t,r,s){return Ut(this,void 0,void 0,function*(){return zn(n,"PUT",e,r,s,t)})}function wg(n,e,t,r){return Ut(this,void 0,void 0,function*(){return zn(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function oc(n,e,t,r,s){return Ut(this,void 0,void 0,function*(){return zn(n,"DELETE",e,r,s,t)})}var be=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(a,l)}d((r=r.apply(n,e||[])).next())})};const xg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _g{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=sc(s)}uploadOrUpdate(e,t,r,s){return be(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},bi),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:o,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield f.json();return f.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(o){if(he(o))return{data:null,error:o};throw o}})}upload(e,t,r){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return be(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let l;const d=Object.assign({upsert:bi.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield f.json();return f.ok?{data:{path:o,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(he(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return be(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const o=yield ft(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new fo("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}update(e,t,r){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return be(this,void 0,void 0,function*(){try{return{data:yield ft(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}copy(e,t,r){return be(this,void 0,void 0,function*(){try{return{data:{path:(yield ft(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return be(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield ft(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return be(this,void 0,void 0,function*(){try{const s=yield ft(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}download(e,t){return be(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=o?`?${o}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield mr(this.fetch,`${this.url}/${s}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(he(a))return{data:null,error:a};throw a}})}info(e){return be(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield mr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:$s(r),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}exists(e){return be(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield wg(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(he(r)&&r instanceof Ls){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&s.push(o);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${d}`)}}}remove(e){return be(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}})}list(e,t,r){return be(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},xg),t),{prefix:e||""});return{data:yield ft(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Cg="2.7.1",kg={"X-Client-Info":`storage-js/${Cg}`};var Wt=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(a,l)}d((r=r.apply(n,e||[])).next())})};class Sg{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},kg),t),this.fetch=sc(r)}listBuckets(){return Wt(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(he(e))return{data:null,error:e};throw e}})}getBucket(e){return Wt(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Wt(this,void 0,void 0,function*(){try{return{data:yield ft(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Wt(this,void 0,void 0,function*(){try{return{data:yield bg(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Wt(this,void 0,void 0,function*(){try{return{data:yield ft(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Wt(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}})}}class Tg extends Sg{constructor(e,t={},r){super(e,t,r)}from(e){return new _g(this.url,this.headers,e,this.fetch)}}const Pg="2.50.0";let Tn="";typeof Deno<"u"?Tn="deno":typeof document<"u"?Tn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tn="react-native":Tn="node";const Eg={"X-Client-Info":`supabase-js-${Tn}/${Pg}`},Ag={headers:Eg},jg={schema:"public"},Ng={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Rg={};var Og=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(a,l)}d((r=r.apply(n,e||[])).next())})};const Ig=n=>{let e;return n?e=n:typeof fetch>"u"?e=zl:e=fetch,(...t)=>e(...t)},Lg=()=>typeof Headers>"u"?Hl:Headers,$g=(n,e,t)=>{const r=Ig(t),s=Lg();return(o,i)=>Og(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let d=new s(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},i),{headers:d}))})};var Dg=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(a,l)}d((r=r.apply(n,e||[])).next())})};function Mg(n){return n.endsWith("/")?n:n+"/"}function Fg(n,e){var t,r;const{db:s,auth:o,realtime:i,global:a}=n,{db:l,auth:d,realtime:u,global:f}=e,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),i),global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Dg(this,void 0,void 0,function*(){return""})};return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}const ic="2.70.0",Qt=30*1e3,Ds=3,as=Ds*Qt,Ug="http://localhost:9999",Bg="supabase.auth.token",qg={"X-Client-Info":`gotrue-js/${ic}`},Ms="X-Supabase-Api-Version",ac={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Hg=6e5;class po extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function K(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Wg extends po{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Kg(n){return K(n)&&n.name==="AuthApiError"}class lc extends po{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Et extends po{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class ht extends Et{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Gg(n){return K(n)&&n.name==="AuthSessionMissingError"}class Xn extends Et{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zn extends Et{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class er extends Et{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Vg(n){return K(n)&&n.name==="AuthImplicitGrantRedirectError"}class wi extends Et{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fs extends Et{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ls(n){return K(n)&&n.name==="AuthRetryableFetchError"}class xi extends Et{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class An extends Et{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const gr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_i=` 	
\r=`.split(""),Jg=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<_i.length;e+=1)n[_i[e].charCodeAt(0)]=-2;for(let e=0;e<gr.length;e+=1)n[gr[e].charCodeAt(0)]=e;return n})();function Ci(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(gr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(gr[r]),e.queuedBits-=6}}function cc(n,e,t){const r=Jg[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ki(n){const e=[],t=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{Xg(i,r,t)};for(let i=0;i<n.length;i+=1)cc(n.charCodeAt(i),s,o);return e.join("")}function Yg(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Qg(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}Yg(r,e)}}function Xg(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Zg(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)cc(n.charCodeAt(s),t,r);return new Uint8Array(e)}function ey(n){const e=[];return Qg(n,t=>e.push(t)),new Uint8Array(e)}function ty(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>Ci(s,t,r)),Ci(null,t,r),e.join("")}function ny(n){return Math.round(Date.now()/1e3)+n}function ry(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const je=()=>typeof window<"u"&&typeof document<"u",jt={tested:!1,writable:!1},jn=()=>{if(!je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jt.tested)return jt.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),jt.tested=!0,jt.writable=!0}catch{jt.tested=!0,jt.writable=!1}return jt.writable};function sy(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const dc=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Bn(async()=>{const{default:r}=await Promise.resolve().then(()=>wn);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},oy=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",uc=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},tr=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},nr=async(n,e)=>{await n.removeItem(e)};class Br{constructor(){this.promise=new Br.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Br.promiseConstructor=Promise;function cs(n){const e=n.split(".");if(e.length!==3)throw new An("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!zg.test(e[r]))throw new An("JWT not in base64url format");return{header:JSON.parse(ki(e[0])),payload:JSON.parse(ki(e[1])),signature:Zg(e[2]),raw:{header:e[0],payload:e[1]}}}async function iy(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function ay(n,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await n(o);if(!e(o,null,i)){r(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function ly(n){return("0"+n.toString(16)).substr(-2)}function cy(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let o=0;o<56;o++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,ly).join("")}async function dy(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function uy(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await dy(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kt(n,e,t=!1){const r=cy();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await uc(n,`${e}-code-verifier`,s);const o=await uy(r);return[o,r===o?"plain":"s256"]}const hy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fy(n){const e=n.headers.get(Ms);if(!e||!e.match(hy))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function py(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function my(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const gy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gt(n){if(!gy.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var yy=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Rt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),vy=[502,503,504];async function Si(n){var e;if(!oy(n))throw new Fs(Rt(n),0);if(vy.includes(n.status))throw new Fs(Rt(n),n.status);let t;try{t=await n.json()}catch(o){throw new lc(Rt(o),o)}let r;const s=fy(n);if(s&&s.getTime()>=ac["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new xi(Rt(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ht}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new xi(Rt(t),n.status,t.weak_password.reasons);throw new Wg(Rt(t),n.status||500,r)}const by=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Y(n,e,t,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[Ms]||(o[Ms]=ac["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await wy(n,e,t+a,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function wy(n,e,t,r,s,o){const i=by(e,r,s,o);let a;try{a=await n(t,Object.assign({},i))}catch(l){throw console.error(l),new Fs(Rt(l),0)}if(a.ok||await Si(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Si(l)}}function nt(n){var e;let t=null;ky(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=ny(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Ti(n){const e=nt(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function gt(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function xy(n){return{data:n,error:null}}function _y(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o}=n,i=yy(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function Cy(n){return n}function ky(n){return n.access_token&&n.refresh_token&&n.expires_in}const ds=["global","local","others"];var Sy=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class Ty{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=dc(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ds[0]){if(ds.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ds.join(", ")}`);try{return await Y(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Y(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:gt})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Sy(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Y(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:_y,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(K(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Y(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gt})}catch(t){if(K(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,o,i,a,l;try{const d={nextPage:null,lastPage:0,total:0},u=await Y(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Cy});if(u.error)throw u.error;const f=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(y.split(";")[1].split("=")[1]);d[`${p}Page`]=v}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(K(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Gt(e);try{return await Y(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gt})}catch(t){if(K(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Gt(e);try{return await Y(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:gt})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Gt(e);try{return await Y(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:gt})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Gt(e.userId);try{const{data:t,error:r}=await Y(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(K(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Gt(e.userId),Gt(e.id);try{return{data:await Y(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}}}const Py={getItem:n=>jn()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{jn()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{jn()&&globalThis.localStorage.removeItem(n)}};function Pi(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Ey(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vt={debug:!!(globalThis&&jn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ay extends hc{}async function jy(n,e,t){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Ay(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Vt.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Ey();const Ny={url:Ug,storageKey:Bg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ei(n,e,t){return await t()}class $n{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$n.nextInstanceID,$n.nextInstanceID+=1,this.instanceID>0&&je()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Ny),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ty({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=dc(s.fetch),this.lock=s.lock||Ei,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:je()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=jy:this.lock=Ei,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:jn()?this.storage=Py:(this.memoryStorage={},this.storage=Pi(this.memoryStorage)):(this.memoryStorage={},this.storage=Pi(this.memoryStorage)),je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ic}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=sy(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),je()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Vg(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return K(t)?{error:t}:{error:new lc("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const o=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:nt}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(K(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,s;try{let o;if("email"in e){const{email:u,password:f,options:h}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Kt(this.storage,this.storageKey)),o=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:f,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:y},xform:nt})}else if("phone"in e){const{phone:u,password:f,options:h}=e;o=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:nt})}else throw new Zn("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(K(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:i,options:a}=e;t=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ti})}else if("phone"in e){const{phone:o,password:i,options:a}=e;t=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ti})}else throw new Zn("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Xn}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(K(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,o,i,a,l,d,u,f,h,m;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:p,wallet:b,statement:x,options:w}=e;let _;if(je())if(typeof b=="object")_=b;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const C=new URL((t=w==null?void 0:w.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),x?{statement:x}:null));let I;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")I=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)I=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)y=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),v=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${C.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=S}}try{const{data:p,error:b}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:ty(v)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:nt});if(b)throw b;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Xn}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:b})}catch(p){if(K(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(e){const t=await tr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:o,error:i}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:nt});if(await nr(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Xn}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(K(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:o,nonce:i}=e,a=await Y(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:nt}),{data:l,error:d}=a;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Xn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(t){if(K(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,o,i;try{if("email"in e){const{email:a,options:l}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Kt(this.storage,this.storageKey));const{error:f}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:d,error:u}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Zn("You must provide either an email or phone number.")}catch(a){if(K(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let s,o;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await Y(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:nt});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,d=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Kt(this.storage,this.storageKey)),await Y(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:xy})}catch(o){if(K(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ht;const{error:s}=await Y(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(K(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:i}=await Y(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:i,error:a}=await Y(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new Zn("You must provide either an email or phone number and a type")}catch(t){if(K(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await tr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<as:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,u))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gt}):await this._useSession(async t=>{var r,s,o;const{data:i,error:a}=t;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ht}:await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:gt})})}catch(t){if(K(t))return Gg(t)&&(await this._removeSession(),await nr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new ht;const i=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Kt(this.storage,this.storageKey));const{data:d,error:u}=await Y(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:gt});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ht;const t=Date.now()/1e3;let r=t,s=!0,o=null;const{payload:i}=cs(e.access_token);if(i.exp&&(r=i.exp,s=r<=t),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(K(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:i,error:a}=t;if(a)throw a;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ht;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(K(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!je())throw new er("No browser detected.");if(e.error||e.error_description||e.error_code)throw new er(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new wi("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new er("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new wi("No code detected.");const{data:x,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:d}=e;if(!o||!a||!i||!d)throw new er("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(a);let h=u+f;l&&(h=parseInt(l));const m=h-u;m*1e3<=Qt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=h-f;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,u);const{data:v,error:p}=await this._getUser(o);if(p)throw p;const b={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:h,refresh_token:i,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(K(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await tr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{error:o};const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(Kg(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await nr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=ry(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:o},error:i}=t;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Kt(this.storage,this.storageKey,!0));try{return await Y(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(K(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async o=>{var i,a,l,d,u;const{data:f,error:h}=o;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Y(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return je()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(K(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:i}=t;if(i)throw i;return await Y(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(K(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await ay(async s=>(s>0&&await iy(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Y(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nt})),(s,o)=>{const i=200*Math.pow(2,s);return o&&ls(o)&&Date.now()+i-r<Qt})}catch(r){if(this._debug(t,"error",r),K(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),je()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await tr(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<as;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${as}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),ls(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Br;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new ht;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),K(o)){const i={session:null,error:o};return ls(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await uc(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await nr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&je()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Qt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Qt}ms, refresh threshold is ${Ds} ticks`),s<=Ds&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof hc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!je()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await Kt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await Y(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(K(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:d}=await Y(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(K(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:i,error:a}=await Y(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(t){if(K(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await Y(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(K(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=cs(s.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(i=>i.kid===e);if(r||(r=this.jwks.keys.find(i=>i.kid===e),r&&this.jwks_cached_at+Hg>Date.now()))return r;const{data:s,error:o}=await Y(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!s.keys||s.keys.length===0)throw new An("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(i=>i.kid===e),!r)throw new An("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:m,error:y}=await this.getSession();if(y||!m.session)return{data:null,error:y};r=m.session.access_token}const{header:s,payload:o,signature:i,raw:{header:a,payload:l}}=cs(r);if(py(o.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:o,header:s,signature:i},error:null}}const d=my(s.alg),u=await this.fetchJwk(s.kid,t),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,ey(`${a}.${l}`)))throw new An("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}}$n.nextInstanceID=0;const Ry=$n;class Oy extends Ry{constructor(e){super(e)}}var Iy=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(a,l)}d((r=r.apply(n,e||[])).next())})};class Ly{constructor(e,t,r){var s,o,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=Mg(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:jg,realtime:Rg,auth:Object.assign(Object.assign({},Ng),{storageKey:d}),global:Ag},f=Fg(r??{},u);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=$g(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Xm(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new Em(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Tg(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Iy(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:o,flowType:i,lock:a,debug:l},d,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Oy({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:i,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new hg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $y=(n,e,t)=>new Ly(n,e,t),Dy="https://mchzrmrvgemplhktdwls.supabase.co",My="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1jaHpybXJ2Z2VtcGxoa3Rkd2xzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0NDQ5ODksImV4cCI6MjA2NTAyMDk4OX0.ZTjK209qGwuvrcykuTHK-JsZGXn9NRhmSgVbKjU463Q",ke=$y(Dy,My,{auth:{autoRefreshToken:!0,persistSession:!0,storageKey:"pathToPython-auth-storage"}});if(!ke)throw console.error("Failed to initialize Supabase client"),new Error("Supabase client initialization failed");const rr="AES-GCM",Ai=256,ji=1e5,Fy="SHA-256",Ni={name:"ECDSA",namedCurve:"P-256"},Uy={name:"ECDSA",hash:{name:"SHA-256"}},Ri="2.0-ecdsa",Sn="pythonQuestAuth",us=n=>{let e="";const t=new Uint8Array(n),r=t.byteLength;for(let s=0;s<r;s++)e+=String.fromCharCode(t[s]);return window.btoa(e)},hs=n=>{const e=window.atob(n),t=e.length,r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=e.charCodeAt(s);return r.buffer},Oi=n=>Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join(""),fc=g.createContext(void 0),By=({children:n})=>{const[e,t]=g.useState("unauthenticated"),[r,s]=g.useState(null),[o,i]=g.useState(null),[a,l]=g.useState(null),[d,u]=g.useState(null),[f,h]=g.useState(null),[m,y]=g.useState(!0),[v,p]=g.useState(null),b=g.useCallback(()=>{var E;return e==="keystore"?"keystore":a?((E=a.app_metadata)==null?void 0:E.provider)==="anonymous"?"guest":"supabase":e==="guest"?"guest":"unauthenticated"},[e,a])(),x=b==="keystore"||b==="supabase",w=b==="guest",_=b==="keystore",C=b==="supabase";g.useEffect(()=>{console.debug("[AuthContext] Initializing keystore auth state from session storage...");try{const E=sessionStorage.getItem(Sn);if(E){const{mode:A,user:M}=JSON.parse(E);A==="keystore"&&M&&M.publicKeyHex?(t("keystore"),s(M),console.debug("[AuthContext] Keystore session restored (publicKey only).")):A==="guest"?(t("guest"),console.debug("[AuthContext] Guest session restored.")):t("unauthenticated")}else t("unauthenticated"),console.debug("[AuthContext] No session state found, defaulting to unauthenticated.")}catch(E){console.error("[AuthContext] Error initializing keystore auth state:",E),t("unauthenticated")}},[]),g.useEffect(()=>{if(!m){console.debug("[AuthContext] Persisting keystore auth state to session storage:",{keystoreAuthMode:e,currentUser:r});try{e==="keystore"&&r?sessionStorage.setItem(Sn,JSON.stringify({mode:e,user:r})):e==="guest"?sessionStorage.setItem(Sn,JSON.stringify({mode:e,user:null})):sessionStorage.removeItem(Sn)}catch(E){console.error("[AuthContext] Error persisting keystore auth state:",E)}}},[e,r,m]);const S=async()=>{console.debug("[AuthContext] Generating ECDSA P-256 key pair...");try{const E=await window.crypto.subtle.generateKey(Ni,!0,["sign","verify"]);return console.debug("[AuthContext] ECDSA key pair generated successfully."),E}catch(E){throw console.error("[AuthContext] Error generating ECDSA key pair:",E),E}},I=async(E,A)=>{console.debug("[AuthContext] Deriving encryption key from password using PBKDF2...");try{const M=await window.crypto.subtle.importKey("raw",new TextEncoder().encode(E),{name:"PBKDF2"},!1,["deriveKey"]),q=await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:A,iterations:ji,hash:Fy},M,{name:rr,length:Ai},!0,["encrypt","decrypt"]);return console.debug("[AuthContext] Encryption key derived successfully."),q}catch(M){throw console.error("[AuthContext] Error deriving key from password:",M),M}},N=async(E,A,M)=>{console.debug("[AuthContext] Encrypting private key (PKCS8)...");try{const q=await window.crypto.subtle.encrypt({name:rr,iv:M},E,A);return console.debug("[AuthContext] Private key encrypted successfully."),q}catch(q){throw console.error("[AuthContext] Error encrypting private key:",q),q}},D=async(E,A,M)=>{console.debug("[AuthContext] Decrypting private key...");try{const q=await window.crypto.subtle.decrypt({name:rr,iv:M},E,A);return console.debug("[AuthContext] Private key decrypted successfully."),q}catch(q){throw console.error("[AuthContext] Error decrypting private key (likely wrong password or corrupted data):",q),q}},U=async E=>{console.debug("[AuthContext] Exporting public key (SPKI)...");try{const A=await window.crypto.subtle.exportKey("spki",E);return console.debug("[AuthContext] Public key exported successfully."),A}catch(A){throw console.error("[AuthContext] Error exporting public key:",A),A}},B=async E=>{console.debug("[AuthContext] Exporting private key (PKCS8)...");try{const A=await window.crypto.subtle.exportKey("pkcs8",E);return console.debug("[AuthContext] Private key exported successfully."),A}catch(A){throw console.error("[AuthContext] Error exporting private key:",A),A}},L=async E=>{console.debug("[AuthContext] Importing ECDSA private key (PKCS8)...");try{const A=await window.crypto.subtle.importKey("pkcs8",E,Ni,!0,["sign"]);return console.debug("[AuthContext] ECDSA private key imported successfully."),A}catch(A){throw console.error("[AuthContext] Error importing ECDSA private key:",A),A}},H=g.useCallback(async E=>{y(!0),p(null),console.debug("[AuthContext] Starting account creation...");try{const A=await S();if(!A.publicKey||!A.privateKey)throw new Error("Key pair generation failed.");const M=await U(A.publicKey),q=await B(A.privateKey),de=Oi(M),fe=window.crypto.getRandomValues(new Uint8Array(16)),Xe=window.crypto.getRandomValues(new Uint8Array(12)),De=await I(E,fe),Ae=await N(De,q,Xe),Me={publicKeyHex:de,encryptedPrivateKey:us(Ae),salt:us(fe),iv:us(Xe),version:Ri,keyAlgorithm:"ECDSA-P256",encryptionAlgorithm:`${rr}-${Ai}`,pbkdf2Iterations:ji},at=JSON.stringify(Me,null,2),Fe=new Blob([at],{type:"application/json"}),Bt=URL.createObjectURL(Fe),Ze=document.createElement("a");Ze.href=Bt,Ze.download=`PythonQuest_Keystore_ECDSA_${de.substring(0,8)}.json`,document.body.appendChild(Ze),Ze.click(),document.body.removeChild(Ze),URL.revokeObjectURL(Bt),console.info("[AuthContext] Keystore file downloaded."),s({publicKeyHex:de}),t("keystore"),i(A.privateKey),console.info("[AuthContext] Account created successfully. User is now keystore authenticated.")}catch(A){console.error("[AuthContext] Error creating account:",A,A.stack),p(`Account creation failed: ${A.message||"Unknown cryptographic error"}`),t("unauthenticated"),s(null),i(null)}finally{y(!1)}},[]),R=g.useCallback(async(E,A)=>{y(!0),p(null),console.debug("[AuthContext] Starting login with keystore...");try{const M=await E.text(),q=JSON.parse(M);if(q.version!==Ri||q.keyAlgorithm!=="ECDSA-P256")throw console.warn("[AuthContext] Keystore version or algorithm mismatch.",q),new Error("Invalid or outdated keystore file. Please use a keystore generated with ECDSA P-256.");if(!q.publicKeyHex||!q.encryptedPrivateKey||!q.salt||!q.iv)throw new Error("Invalid or corrupted keystore file format.");const de=hs(q.salt),fe=hs(q.iv),Xe=hs(q.encryptedPrivateKey),De=await I(A,de),Ae=await D(De,Xe,fe),Me=await L(Ae);if(!Me)throw new Error("Failed to import decrypted private key.");const at={publicKeyHex:q.publicKeyHex};s(at),t("keystore"),i(Me),console.info("[AuthContext] Login successful. User is now keystore authenticated.")}catch(M){console.error("[AuthContext] Error logging in with keystore:",M,M.stack),M.name==="OperationError"||M.message&&(M.message.toLowerCase().includes("decryption failed")||M.message.toLowerCase().includes("tag doesn't match"))?p("Login failed: Invalid password or corrupted keystore."):p(`Login failed: ${M.message||"Unknown error during login"}`),t("unauthenticated"),s(null),i(null)}finally{y(!1)}},[]),O=g.useCallback(async E=>{if(!o||e!=="keystore"){const A="Not authenticated with a keystore to sign data.";return console.warn(`[AuthContext] ${A}`),p(A),null}console.debug("[AuthContext] Signing data...");try{const A=new TextEncoder().encode(E),M=await window.crypto.subtle.sign(Uy,o,A),q=Oi(M);return console.debug("[AuthContext] Data signed successfully. Signature (hex):",q),q}catch(A){return console.error("[AuthContext] Error signing data:",A,A.stack),p(`Signing failed: ${A.message||"Unknown cryptographic error during signing"}`),null}},[o,e]),j=g.useCallback(async E=>{try{const{data:A,error:M}=await ke.from("profiles").select("id, username, updated_at, created_at").eq("id",E).single();return M?(console.error("[AuthContext] Error fetching profile:",M),null):A}catch(A){return console.error("[AuthContext] Error in fetchProfile:",A),null}},[]);g.useEffect(()=>{(async()=>{y(!0);try{const{data:{session:M},error:q}=await ke.auth.getSession();if(q)throw q;if(M){const de=M.user,fe=await j(de.id);l(de),u(M),h(fe)}}catch(M){console.error("[AuthContext] Error initializing Supabase auth:",M)}finally{y(!1)}})();const{data:A}=ke.auth.onAuthStateChange(async(M,q)=>{if(console.log("[AuthContext] Supabase auth state changed:",M),M==="SIGNED_IN"&&q){const de=q.user,fe=await j(de.id);l(de),u(q),h(fe)}else(M==="SIGNED_OUT"||M==="USER_DELETED")&&(l(null),u(null),h(null))});return()=>{A.subscription.unsubscribe()}},[j]);const z=g.useCallback(async()=>{if(a)try{const E=await j(a.id);h(E)}catch(E){console.error("[AuthContext] Error refreshing profile:",E)}},[a,j]),P=g.useCallback(async()=>{y(!0),p(null);try{const{error:E}=await ke.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/`}});if(E)throw E}catch(E){console.error("[AuthContext] Error signing in with GitHub:",E),p(E.message||"Failed to sign in with GitHub")}finally{y(!1)}},[]),$=g.useCallback(async E=>{y(!0),p(null);try{const{error:A}=await ke.auth.signInWithOtp({email:E,options:{emailRedirectTo:`${window.location.origin}/`}});if(A)throw A;console.info("[AuthContext] Magic link sent successfully.")}catch(A){console.error("[AuthContext] Error sending magic link:",A),p(A.message||"Failed to send magic link")}finally{y(!1)}},[]),te=g.useCallback(async()=>{y(!0),p(null);try{const{error:E}=await ke.auth.signInAnonymously();if(E)throw E;console.info("[AuthContext] Anonymous sign-in successful.")}catch(E){console.error("[AuthContext] Error signing in anonymously:",E),p(E.message||"Failed to sign in as guest")}finally{y(!1)}},[]),F=g.useCallback(async E=>{if(!a){p("You must be logged in to update your username");return}y(!0),p(null);try{const{data:A,error:M}=await ke.from("profiles").select("username").eq("username",E).neq("id",a.id).maybeSingle();if(M)throw M;if(A)throw new Error("Username is already taken");const{error:q}=await ke.from("profiles").update({username:E,updated_at:new Date().toISOString()}).eq("id",a.id);if(q)throw q;await z(),console.info("[AuthContext] Username updated successfully.")}catch(A){console.error("[AuthContext] Error updating username:",A),p(A.message||"Failed to update username")}finally{y(!1)}},[a,z]),Q=g.useCallback(async()=>{y(!0),p(null),console.debug("[AuthContext] Logging out...");try{if(a){const{error:E}=await ke.auth.signOut();if(E)throw E}t("unauthenticated"),s(null),i(null),sessionStorage.removeItem(Sn),console.info("[AuthContext] User logged out successfully.")}catch(E){console.error("[AuthContext] Error logging out:",E),p(E.message||"Failed to log out")}finally{y(!1)}},[a]),X=g.useCallback(()=>{console.debug("[AuthContext] Switching to guest mode..."),te().catch(E=>{console.error("[AuthContext] Failed to use Supabase anonymous sign-in, falling back to local guest mode:",E),e==="keystore"&&(s(null),i(null)),t("guest"),p(null)}),console.info("[AuthContext] Switched to guest mode.")},[e,te]),W={authMode:b,isLoading:m,error:v,setError:p,isAuthenticated:x,isGuest:w,isKeystoreAuthenticated:_,isSupabaseAuthenticated:C,currentUser:r,createAccount:H,loginWithKeystore:R,signData:O,supabaseUser:a,supabaseSession:d,profile:f,signInWithGitHub:P,signInWithMagicLink:$,signInAnonymously:te,updateUsername:F,refreshProfile:z,logout:Q,switchToGuestMode:X};return c.jsx(fc.Provider,{value:W,children:n})},mo=()=>{const n=g.useContext(fc);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider. Make sure your component is wrapped by AuthProvider.");return n},yt=g.forwardRef(({className:n,type:e,...t},r)=>c.jsx("input",{type:e,className:ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));yt.displayName="Input";const qy=()=>{const{createAccount:n,loginWithKeystore:e,switchToGuestMode:t,isLoading:r,error:s,setError:o}=mo(),[i,a]=g.useState("login"),[l,d]=g.useState(""),[u,f]=g.useState(""),[h,m]=g.useState(null),[y,v]=g.useState(!1),[p,b]=g.useState(!1),[x,w]=g.useState(null),[_,C]=g.useState(""),[S,I]=g.useState(null),[N,D]=g.useState(!1),[U,B]=g.useState(""),[L,H]=g.useState(null),[R,O]=g.useState(!1),j=()=>{m(null),I(null),H(null),o&&o(null)},z=W=>{a(W),j(),d(""),f(""),w(null);const E=document.getElementById("keystoreFile");E&&(E.value=""),C(""),B(""),O(!1)},P=async W=>{if(W.preventDefault(),j(),l!==u){m("Passwords do not match.");return}if(l.length<8){m("Password must be at least 8 characters long.");return}await n(l)},$=async W=>{if(W.preventDefault(),j(),!x){I("Please select your keystore file.");return}if(!_){I("Please enter your password.");return}await e(x,_)},te=W=>{W.target.files&&W.target.files[0]?(w(W.target.files[0]),I(null)):w(null)},F=async()=>{j();try{const{data:W,error:E}=await ke.auth.signInAnonymously();if(E)throw E;t()}catch(W){o&&o(W.message||"Failed to sign in as guest")}},Q=async W=>{if(W.preventDefault(),j(),!U||!/^\S+@\S+\.\S+$/.test(U)){H("Please enter a valid email address.");return}try{const{data:E,error:A}=await ke.auth.signInWithOtp({email:U,options:{emailRedirectTo:window.location.origin}});if(A)throw A;O(!0)}catch(E){H(E.message||"Failed to send magic link")}},X=async()=>{j();try{const{data:W,error:E}=await ke.auth.signInWithOAuth({provider:"github",options:{redirectTo:window.location.origin}});if(E)throw E}catch(W){o&&o(W.message||"Failed to sign in with GitHub")}};return c.jsx(_l,{defaultTheme:"dark",storageKey:"python-quest-theme",children:c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white p-4 selection:bg-cyan-500 selection:text-white",children:[c.jsxs("header",{className:"text-center mb-8 animate-fadeIn",children:[c.jsx("div",{className:"inline-block p-3 bg-gradient-to-r from-cyan-500 to-green-500 rounded-xl mb-4 shadow-lg",children:c.jsx(Ki,{size:48,className:"text-white"})}),c.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-cyan-400 to-green-400 bg-clip-text text-transparent mb-2",children:"Welcome to Python Quest"}),c.jsx("p",{className:"text-lg md:text-xl text-gray-300",children:"Your Secure, Self-Custody Learning Journey."})]}),c.jsx("main",{className:"w-full max-w-md animate-slideUp",children:c.jsxs(ql,{value:i,onValueChange:z,className:"w-full",children:[c.jsxs(lo,{className:"grid w-full grid-cols-5 bg-gray-800/80 border border-gray-700/60 rounded-lg backdrop-blur-sm",children:[c.jsxs(pt,{value:"login",className:"data-[state=active]:bg-cyan-600/80 data-[state=active]:text-white text-gray-300 hover:text-white transition-colors duration-200",children:[c.jsx(Ao,{size:18,className:"mr-2"})," Login"]}),c.jsxs(pt,{value:"create",className:"data-[state=active]:bg-green-600/80 data-[state=active]:text-white text-gray-300 hover:text-white transition-colors duration-200",children:[c.jsx(ar,{size:18,className:"mr-2"})," Create"]}),c.jsxs(pt,{value:"guest",className:"data-[state=active]:bg-purple-600/80 data-[state=active]:text-white text-gray-300 hover:text-white transition-colors duration-200",children:[c.jsx(jo,{size:18,className:"mr-2"})," Guest"]}),c.jsxs(pt,{value:"magic",className:"data-[state=active]:bg-blue-600/80 data-[state=active]:text-white text-gray-300 hover:text-white transition-colors duration-200",children:[c.jsx(Gn,{size:18,className:"mr-2"})," Magic"]}),c.jsxs(pt,{value:"github",className:"data-[state=active]:bg-gray-600/80 data-[state=active]:text-white text-gray-300 hover:text-white transition-colors duration-200",children:[c.jsx(Gr,{size:18,className:"mr-2"})," GitHub"]})]}),c.jsx(mt,{value:"login",children:c.jsxs(Ke,{className:"bg-gray-800/70 border-cyan-500/30 backdrop-blur-sm shadow-xl",children:[c.jsxs(Ge,{children:[c.jsx(Ve,{className:"text-2xl text-cyan-400",children:"Login with Keystore"}),c.jsx(Jt,{className:"text-gray-400",children:"Access your account using your secure keystore file and password."})]}),c.jsxs("form",{onSubmit:$,children:[c.jsxs(Je,{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:"keystoreFile",className:"text-sm font-medium text-gray-300",children:"Keystore File (.json)"}),c.jsx(yt,{id:"keystoreFile",type:"file",accept:".json",onChange:te,className:"bg-gray-700 border-gray-600 text-white file:text-cyan-400 file:font-semibold file:mr-2 file:px-3 file:py-1.5 file:rounded-md file:border-0 file:bg-cyan-500/20 hover:file:bg-cyan-500/30 transition-colors duration-200",disabled:r})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:"loginPassword",className:"text-sm font-medium text-gray-300",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(yt,{id:"loginPassword",type:N?"text":"password",value:_,onChange:W=>{C(W.target.value),I(null),o&&o(null)},placeholder:"Enter your keystore password",className:"bg-gray-700 border-gray-600 text-white placeholder-gray-500 pr-10",disabled:r}),c.jsx(ae,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-400 hover:text-gray-200",onClick:()=>D(!N),"aria-pressed":N,"aria-label":N?"Hide password":"Show password",disabled:r,children:N?c.jsx(Vr,{className:"h-4 w-4"}):c.jsx(Jr,{className:"h-4 w-4"})})]})]}),S&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center pt-1",children:[c.jsx(At,{size:16,className:"mr-1 flex-shrink-0"}),S]}),s&&i==="login"&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center pt-1",children:[c.jsx(At,{size:16,className:"mr-1 flex-shrink-0"}),s]})]}),c.jsx(Yt,{children:c.jsxs(ae,{type:"submit",className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white font-semibold shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-200",disabled:r,children:[r?c.jsx(Ot,{className:"mr-2 h-4 w-4 animate-spin"}):c.jsx(Ao,{className:"mr-2 h-4 w-4"}),"Unlock Keystore"]})})]})]})}),c.jsx(mt,{value:"create",children:c.jsxs(Ke,{className:"bg-gray-800/70 border-green-500/30 backdrop-blur-sm shadow-xl",children:[c.jsxs(Ge,{children:[c.jsx(Ve,{className:"text-2xl text-green-400",children:"Create New Account"}),c.jsx(Jt,{className:"text-gray-400",children:"Secure your progress with a self-custody keystore. Choose a strong password."})]}),c.jsxs("form",{onSubmit:P,children:[c.jsxs(Je,{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:"createPassword",className:"text-sm font-medium text-gray-300",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(yt,{id:"createPassword",type:y?"text":"password",value:l,onChange:W=>{d(W.target.value),m(null),o&&o(null)},placeholder:"Choose a strong password (min. 8 characters)",className:"bg-gray-700 border-gray-600 text-white placeholder-gray-500 pr-10",disabled:r}),c.jsx(ae,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-400 hover:text-gray-200",onClick:()=>v(!y),"aria-pressed":y,"aria-label":y?"Hide password":"Show password",disabled:r,children:y?c.jsx(Vr,{className:"h-4 w-4"}):c.jsx(Jr,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-300",children:"Confirm Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(yt,{id:"confirmPassword",type:p?"text":"password",value:u,onChange:W=>{f(W.target.value),m(null),o&&o(null)},placeholder:"Confirm your password",className:"bg-gray-700 border-gray-600 text-white placeholder-gray-500 pr-10",disabled:r}),c.jsx(ae,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-400 hover:text-gray-200",onClick:()=>b(!p),"aria-pressed":p,"aria-label":p?"Hide password":"Show password",disabled:r,children:p?c.jsx(Vr,{className:"h-4 w-4"}):c.jsx(Jr,{className:"h-4 w-4"})})]})]}),h&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center pt-1",children:[c.jsx(At,{size:16,className:"mr-1 flex-shrink-0"}),h]}),s&&i==="create"&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center pt-1",children:[c.jsx(At,{size:16,className:"mr-1 flex-shrink-0"}),s]})]}),c.jsx(Yt,{children:c.jsxs(ae,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-200",disabled:r,children:[r?c.jsx(Ot,{className:"mr-2 h-4 w-4 animate-spin"}):c.jsx(ar,{className:"mr-2 h-4 w-4"}),"Create Account & Download Keystore"]})})]})]})}),c.jsx(mt,{value:"guest",children:c.jsxs(Ke,{className:"bg-gray-800/70 border-purple-500/30 backdrop-blur-sm shadow-xl",children:[c.jsxs(Ge,{children:[c.jsx(Ve,{className:"text-2xl text-purple-400",children:"Try Python Quest"}),c.jsx(Jt,{className:"text-gray-400",children:"Explore the platform as a guest. Your progress will be saved locally in this browser."})]}),c.jsx(Je,{children:c.jsx("p",{className:"text-sm text-gray-400 mb-4 leading-relaxed",children:"Click below to start learning immediately. If you enjoy Python Quest, you can create a secure account at any time from the main dashboard to save your progress permanently across devices."})}),c.jsx(Yt,{children:c.jsxs(ae,{onClick:F,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-200",disabled:r,children:[r?c.jsx(Ot,{className:"mr-2 h-4 w-4 animate-spin"}):c.jsx(jo,{className:"mr-2 h-4 w-4"}),"Continue as Guest"]})})]})}),c.jsx(mt,{value:"magic",children:c.jsxs(Ke,{className:"bg-gray-800/70 border-blue-500/30 backdrop-blur-sm shadow-xl",children:[c.jsxs(Ge,{children:[c.jsx(Ve,{className:"text-2xl text-blue-400",children:"Magic Link Sign In"}),c.jsx(Jt,{className:"text-gray-400",children:"Receive a sign-in link via email - no password needed."})]}),c.jsxs("form",{onSubmit:Q,children:[c.jsx(Je,{className:"space-y-4",children:R?c.jsxs("div",{className:"text-center py-4",children:[c.jsx(Gn,{className:"h-12 w-12 text-blue-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-blue-400 mb-2",children:"Check Your Email"}),c.jsx("p",{className:"text-gray-300 mb-2",children:"We've sent a magic link to:"}),c.jsx("p",{className:"font-semibold text-white mb-4",children:U}),c.jsx("p",{className:"text-sm text-gray-400",children:"Click the link in the email to sign in to Python Quest."})]}):c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:"magicLinkEmail",className:"text-sm font-medium text-gray-300",children:"Email Address"}),c.jsxs("div",{className:"relative",children:[c.jsx(Gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),c.jsx(yt,{id:"magicLinkEmail",type:"email",value:U,onChange:W=>{B(W.target.value),H(null)},placeholder:"Enter your email address",className:"bg-gray-700 border-gray-600 text-white placeholder-gray-500 pl-10",disabled:r})]}),L&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center pt-1",children:[c.jsx(At,{size:16,className:"mr-1 flex-shrink-0"}),L]}),s&&i==="magic"&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center pt-1",children:[c.jsx(At,{size:16,className:"mr-1 flex-shrink-0"}),s]})]})}),!R&&c.jsx(Yt,{children:c.jsxs(ae,{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-semibold shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-200",disabled:r,children:[r?c.jsx(Ot,{className:"mr-2 h-4 w-4 animate-spin"}):c.jsx(Gn,{className:"mr-2 h-4 w-4"}),"Send Magic Link"]})})]})]})}),c.jsx(mt,{value:"github",children:c.jsxs(Ke,{className:"bg-gray-800/70 border-gray-500/30 backdrop-blur-sm shadow-xl",children:[c.jsxs(Ge,{children:[c.jsx(Ve,{className:"text-2xl text-gray-300",children:"GitHub Sign In"}),c.jsx(Jt,{className:"text-gray-400",children:"Use your GitHub account to sign in quickly and securely."})]}),c.jsx(Je,{children:c.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[c.jsx(Gr,{className:"h-16 w-16 text-white mb-6"}),c.jsx("p",{className:"text-sm text-gray-400 mb-6 text-center",children:"Connect with your GitHub account to access Python Quest. Your GitHub email will be used for your account."}),s&&i==="github"&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center mb-4",children:[c.jsx(At,{size:16,className:"mr-1 flex-shrink-0"}),s]})]})}),c.jsx(Yt,{children:c.jsxs(ae,{onClick:X,className:"w-full bg-gradient-to-r from-gray-700 to-gray-900 hover:from-gray-800 hover:to-black text-white font-semibold shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-200",disabled:r,children:[r?c.jsx(Ot,{className:"mr-2 h-4 w-4 animate-spin"}):c.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Continue with GitHub"]})})]})})]})}),c.jsxs("footer",{className:"text-center mt-12 animate-fadeIn",style:{animationDelay:"0.5s"},children:[c.jsxs("div",{className:"flex items-center justify-center text-green-400 mb-2",children:[c.jsx(gd,{size:20,className:"mr-2"}),c.jsx("p",{className:"font-semibold",children:"Your Keys, Your Progress, Your Control."})]}),c.jsxs("p",{className:"text-xs text-gray-500 max-w-md mx-auto leading-relaxed",children:["Python Quest uses a self-custody keystore model. Your encrypted private key is generated and stored on your device, protected by your password. We never have access to your unencrypted keys or password.",c.jsx("a",{href:"https://github.com/Juniorduc44/pathToPython/blob/factorAI/keyStore_logins_00.md",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:underline ml-1 font-medium",children:"Learn more"}),"."]})]})]})})};var go="Collapsible",[zy,pc]=Fn(go),[Hy,yo]=zy(go),mc=g.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:r,defaultOpen:s,disabled:o,onOpenChange:i,...a}=n,[l=!1,d]=gn({prop:r,defaultProp:s,onChange:i});return c.jsx(Hy,{scope:t,disabled:o,contentId:br(),open:l,onOpenToggle:g.useCallback(()=>d(u=>!u),[d]),children:c.jsx(ce.div,{"data-state":bo(l),"data-disabled":o?"":void 0,...a,ref:e})})});mc.displayName=go;var gc="CollapsibleTrigger",yc=g.forwardRef((n,e)=>{const{__scopeCollapsible:t,...r}=n,s=yo(gc,t);return c.jsx(ce.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":bo(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:ne(n.onClick,s.onOpenToggle)})});yc.displayName=gc;var vo="CollapsibleContent",vc=g.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=yo(vo,n.__scopeCollapsible);return c.jsx(vr,{present:t||s.open,children:({present:o})=>c.jsx(Wy,{...r,ref:e,present:o})})});vc.displayName=vo;var Wy=g.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:r,children:s,...o}=n,i=yo(vo,t),[a,l]=g.useState(r),d=g.useRef(null),u=Ie(e,d),f=g.useRef(0),h=f.current,m=g.useRef(0),y=m.current,v=i.open||a,p=g.useRef(v),b=g.useRef();return g.useEffect(()=>{const x=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(x)},[]),Nn(()=>{const x=d.current;if(x){b.current=b.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const w=x.getBoundingClientRect();f.current=w.height,m.current=w.width,p.current||(x.style.transitionDuration=b.current.transitionDuration,x.style.animationName=b.current.animationName),l(r)}},[i.open,r]),c.jsx(ce.div,{"data-state":bo(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!v,...o,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...n.style},children:v&&s})});function bo(n){return n?"open":"closed"}var Ky=mc,Gy=yc,Vy=vc,it="Accordion",Jy=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[wo,Yy,Qy]=qs(it),[qr,Mv]=Fn(it,[Qy,pc]),xo=pc(),bc=T.forwardRef((n,e)=>{const{type:t,...r}=n,s=r,o=r;return c.jsx(wo.Provider,{scope:n.__scopeAccordion,children:t==="multiple"?c.jsx(tv,{...o,ref:e}):c.jsx(ev,{...s,ref:e})})});bc.displayName=it;var[wc,Xy]=qr(it),[xc,Zy]=qr(it,{collapsible:!1}),ev=T.forwardRef((n,e)=>{const{value:t,defaultValue:r,onValueChange:s=()=>{},collapsible:o=!1,...i}=n,[a,l]=gn({prop:t,defaultProp:r,onChange:s});return c.jsx(wc,{scope:n.__scopeAccordion,value:a?[a]:[],onItemOpen:l,onItemClose:T.useCallback(()=>o&&l(""),[o,l]),children:c.jsx(xc,{scope:n.__scopeAccordion,collapsible:o,children:c.jsx(_c,{...i,ref:e})})})}),tv=T.forwardRef((n,e)=>{const{value:t,defaultValue:r,onValueChange:s=()=>{},...o}=n,[i=[],a]=gn({prop:t,defaultProp:r,onChange:s}),l=T.useCallback(u=>a((f=[])=>[...f,u]),[a]),d=T.useCallback(u=>a((f=[])=>f.filter(h=>h!==u)),[a]);return c.jsx(wc,{scope:n.__scopeAccordion,value:i,onItemOpen:l,onItemClose:d,children:c.jsx(xc,{scope:n.__scopeAccordion,collapsible:!0,children:c.jsx(_c,{...o,ref:e})})})}),[nv,zr]=qr(it),_c=T.forwardRef((n,e)=>{const{__scopeAccordion:t,disabled:r,dir:s,orientation:o="vertical",...i}=n,a=T.useRef(null),l=Ie(a,e),d=Yy(t),f=oo(s)==="ltr",h=ne(n.onKeyDown,m=>{var N;if(!Jy.includes(m.key))return;const y=m.target,v=d().filter(D=>{var U;return!((U=D.ref.current)!=null&&U.disabled)}),p=v.findIndex(D=>D.ref.current===y),b=v.length;if(p===-1)return;m.preventDefault();let x=p;const w=0,_=b-1,C=()=>{x=p+1,x>_&&(x=w)},S=()=>{x=p-1,x<w&&(x=_)};switch(m.key){case"Home":x=w;break;case"End":x=_;break;case"ArrowRight":o==="horizontal"&&(f?C():S());break;case"ArrowDown":o==="vertical"&&C();break;case"ArrowLeft":o==="horizontal"&&(f?S():C());break;case"ArrowUp":o==="vertical"&&S();break}const I=x%b;(N=v[I].ref.current)==null||N.focus()});return c.jsx(nv,{scope:t,disabled:r,direction:s,orientation:o,children:c.jsx(wo.Slot,{scope:t,children:c.jsx(ce.div,{...i,"data-orientation":o,ref:l,onKeyDown:r?void 0:h})})})}),yr="AccordionItem",[rv,_o]=qr(yr),Cc=T.forwardRef((n,e)=>{const{__scopeAccordion:t,value:r,...s}=n,o=zr(yr,t),i=Xy(yr,t),a=xo(t),l=br(),d=r&&i.value.includes(r)||!1,u=o.disabled||n.disabled;return c.jsx(rv,{scope:t,open:d,disabled:u,triggerId:l,children:c.jsx(Ky,{"data-orientation":o.orientation,"data-state":Ac(d),...a,...s,ref:e,disabled:u,open:d,onOpenChange:f=>{f?i.onItemOpen(r):i.onItemClose(r)}})})});Cc.displayName=yr;var kc="AccordionHeader",Sc=T.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,s=zr(it,t),o=_o(kc,t);return c.jsx(ce.h3,{"data-orientation":s.orientation,"data-state":Ac(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:e})});Sc.displayName=kc;var Us="AccordionTrigger",Tc=T.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,s=zr(it,t),o=_o(Us,t),i=Zy(Us,t),a=xo(t);return c.jsx(wo.ItemSlot,{scope:t,children:c.jsx(Gy,{"aria-disabled":o.open&&!i.collapsible||void 0,"data-orientation":s.orientation,id:o.triggerId,...a,...r,ref:e})})});Tc.displayName=Us;var Pc="AccordionContent",Ec=T.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,s=zr(it,t),o=_o(Pc,t),i=xo(t);return c.jsx(Vy,{role:"region","aria-labelledby":o.triggerId,"data-orientation":s.orientation,...i,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});Ec.displayName=Pc;function Ac(n){return n?"open":"closed"}var sv=bc,ov=Cc,iv=Sc,jc=Tc,Nc=Ec;const av=sv,Rc=g.forwardRef(({className:n,...e},t)=>c.jsx(ov,{ref:t,className:ee("border-b",n),...e}));Rc.displayName="AccordionItem";const Oc=g.forwardRef(({className:n,children:e,...t},r)=>c.jsx(iv,{className:"flex",children:c.jsxs(jc,{ref:r,className:ee("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...t,children:[e,c.jsx(Gi,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Oc.displayName=jc.displayName;const Ic=g.forwardRef(({className:n,children:e,...t},r)=>c.jsx(Nc,{ref:r,className:ee("overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",n),...t,children:c.jsx("div",{className:"pb-4 pt-0",children:e})}));Ic.displayName=Nc.displayName;const lv=vd,cv=yd,dv=Yi,Lc=g.forwardRef(({className:n,...e},t)=>c.jsx(Vi,{ref:t,className:ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));Lc.displayName=Vi.displayName;const $c=g.forwardRef(({className:n,children:e,...t},r)=>c.jsxs(cv,{children:[c.jsx(Lc,{}),c.jsxs(Ji,{ref:r,className:ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,c.jsxs(Yi,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(qi,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$c.displayName=Ji.displayName;const Dc=({className:n,...e})=>c.jsx("div",{className:ee("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Dc.displayName="DialogHeader";const Mc=({className:n,...e})=>c.jsx("div",{className:ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});Mc.displayName="DialogFooter";const Fc=g.forwardRef(({className:n,...e},t)=>c.jsx(Qi,{ref:t,className:ee("text-lg font-semibold leading-none tracking-tight",n),...e}));Fc.displayName=Qi.displayName;const Uc=g.forwardRef(({className:n,...e},t)=>c.jsx(Xi,{ref:t,className:ee("text-sm text-muted-foreground",n),...e}));Uc.displayName=Xi.displayName;const uv=Ks("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Bc=g.forwardRef(({className:n,variant:e,...t},r)=>c.jsx("div",{ref:r,role:"alert",className:ee(uv({variant:e}),n),...t}));Bc.displayName="Alert";const qc=g.forwardRef(({className:n,...e},t)=>c.jsx("h5",{ref:t,className:ee("mb-1 font-medium leading-none tracking-tight",n),...e}));qc.displayName="AlertTitle";const zc=g.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("text-sm [&_p]:leading-relaxed",n),...e}));zc.displayName="AlertDescription";const hv=We.length,fv=()=>{const[n,e]=g.useState(null),{completedLessons:t,xp:r,level:s,getChapterProgress:o,isLessonCompleted:i}=Or(),{authMode:a,currentUser:l,supabaseUser:d,profile:u,logout:f,createAccount:h,isLoading:m,isGuest:y,isKeystoreAuthenticated:v,isSupabaseAuthenticated:p}=mo(),[b,x]=g.useState(Nt.length>0?`chapter-${Nt[0].id}`:void 0),[w,_]=g.useState(!1),[C,S]=g.useState(""),[I,N]=g.useState(""),[D,U]=g.useState(null),B=g.useMemo(()=>{const O={};return We.forEach(j=>{O[j.chapterId]||(O[j.chapterId]=[]),O[j.chapterId].push(j)}),O},[]),L=O=>{if(O===1)return!1;const j=O-1;if(!Nt.find($=>$.id===j))return!0;const P=B[j]||[];return P.length===0?!0:!P.every($=>i($.id))};g.useEffect(()=>{if(b){const O=b.replace("chapter-",""),j=parseInt(O,10);if(!isNaN(j)&&L(j)){const z=Nt.find(P=>!L(P.id));x(z?`chapter-${z.id}`:void 0)}}},[b,L,Nt]);const H=async O=>{if(O.preventDefault(),U(null),C!==I){U("Passwords do not match.");return}if(C.length<8){U("Password must be at least 8 characters long.");return}try{await h(C),_(!1),S(""),N("")}catch(j){U(j.message||"Failed to create account.")}};if(n){const O=We.find(j=>j.id===n);return O?c.jsx(wm,{lessonId:n,chapterId:O.chapterId,onBack:()=>e(null),setSelectedLesson:e}):(console.error(`Error: Lesson with ID "${n}" not found. Returning to dashboard.`),e(null),c.jsx("div",{className:"p-8 text-center text-red-500 text-lg",children:"Error: The requested lesson could not be found. Please try again."}))}const R=g.useMemo(()=>p&&(u!=null&&u.username)?u.username:p&&(d!=null&&d.email)?d.email.split("@")[0]:v&&(l!=null&&l.publicKeyHex)?`${l.publicKeyHex.substring(0,6)}...${l.publicKeyHex.slice(-4)}`:"Guest",[p,u,d,v,l]);return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white",children:[c.jsx("header",{className:"border-b border-cyan-500/30 bg-gray-900/50 backdrop-blur-sm sticky top-0 z-50",children:c.jsxs("div",{className:"container mx-auto px-4 py-3",children:[" ",c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-gradient-to-r from-cyan-500 to-green-500 rounded-lg",children:c.jsx(ps,{className:"h-6 w-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-cyan-400 to-green-400 bg-clip-text text-transparent",children:"Python Quest"}),c.jsx("p",{className:"text-xs md:text-sm text-gray-400",children:"Level up your coding skills"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[y&&c.jsxs(ae,{size:"sm",variant:"outline",className:"border-green-500 text-green-400 hover:bg-green-500/10 hover:text-green-300",onClick:()=>_(!0),children:[c.jsx(ar,{className:"h-4 w-4 mr-1 md:mr-2"})," Create Account"]}),(v||p)&&c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:"text-xs text-gray-400 hidden md:inline",children:["Welcome, ",c.jsx("span",{className:"font-semibold text-cyan-400",children:R})]}),c.jsxs(ae,{size:"sm",variant:"outline",onClick:f,className:"border-red-500 text-red-400 hover:bg-red-500/10 hover:text-red-300",children:[c.jsx(bd,{className:"h-4 w-4 mr-1 md:mr-2"})," Logout"]})]}),c.jsx(tm,{})]})]})]})}),y&&c.jsxs(Bc,{className:"container mx-auto mt-4 max-w-3xl bg-purple-900/30 border-purple-500/50 text-purple-300",children:[c.jsx(No,{className:"h-5 w-5 text-purple-400"}),c.jsx(qc,{className:"font-semibold text-purple-300",children:"You are in Guest Mode!"}),c.jsxs(zc,{className:"text-sm text-purple-400",children:["Your progress is saved locally in this browser. To secure your progress permanently and access it anywhere,",c.jsx(ae,{variant:"link",className:"p-0 h-auto text-green-400 hover:text-green-300 underline ml-1",onClick:()=>_(!0),children:"create a free Keystore Account"}),"."]})]}),c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsx("div",{className:"mb-8",children:c.jsx(Zp,{})}),c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-cyan-400 to-green-400 bg-clip-text text-transparent",children:"Master Python Programming"}),c.jsx("p",{className:"text-xl text-gray-300 mb-6 max-w-2xl mx-auto",children:"Learn Python through interactive lessons, hands-on coding challenges, and gamified progress tracking."}),c.jsxs("div",{className:"flex flex-wrap justify-center gap-x-8 gap-y-4 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(wd,{className:"h-5 w-5 text-cyan-400"}),c.jsx("span",{className:"text-gray-300",children:"Gamified Learning"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ps,{className:"h-5 w-5 text-green-400"}),c.jsx("span",{className:"text-gray-300",children:"Interactive Coding"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Wi,{className:"h-5 w-5 text-yellow-400"}),c.jsx("span",{className:"text-gray-300",children:"Low Latency"})]})]})]}),c.jsx("div",{className:"mb-12",children:c.jsx(av,{type:"single",collapsible:!0,className:"w-full space-y-4",value:b,onValueChange:x,children:Nt.map(O=>{const j=B[O.id]||[],z=o(O.id),P=L(O.id);return c.jsxs(Rc,{value:`chapter-${O.id}`,className:"bg-gray-800/70 border border-cyan-500/30 rounded-lg overflow-hidden",children:[c.jsx(Oc,{className:`px-6 py-4 hover:bg-cyan-500/10 transition-colors duration-200 ${P?"cursor-not-allowed opacity-70":""}`,disabled:P,onClick:()=>{P||x($=>$===`chapter-${O.id}`?void 0:`chapter-${O.id}`)},children:c.jsxs("div",{className:"flex items-center justify-between w-full",children:[c.jsxs("div",{className:"text-left",children:[c.jsxs("h3",{className:`text-xl font-semibold ${P?"text-gray-500":"text-cyan-400"}`,children:["Chapter ",O.id,": ",O.title]}),c.jsx("p",{className:`text-sm ${P?"text-gray-600":"text-gray-400"}`,children:O.description})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[P&&c.jsx(zi,{className:"h-5 w-5 text-gray-500"}),!P&&j.length>0&&c.jsxs("span",{className:"text-xs text-gray-300",children:[z.completed,"/",z.total," Lessons"]}),c.jsx(Gi,{className:`h-5 w-5 transition-transform duration-200 ${b===`chapter-${O.id}`&&!P?"rotate-180":""} ${P?"text-gray-600":"text-cyan-400"}`})]})]})}),c.jsx(Ic,{className:"px-6 py-6 border-t border-cyan-500/20 bg-gray-900/30",children:P?c.jsx("p",{className:"text-gray-500 text-center",children:"Complete previous chapters to unlock."}):j.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(($,te)=>{const F=te>0&&!i(j[te-1].id);return c.jsx(Qp,{id:$.id,title:$.title,description:$.description,difficulty:$.difficulty,isLocked:F,onClick:()=>e($.id)},$.id)})}):c.jsx("p",{className:"text-gray-400 text-center",children:"Lessons for this chapter are coming soon!"})})]},O.id)})})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-12",children:[c.jsxs("div",{className:"bg-gradient-to-br from-cyan-900/50 to-blue-900/50 border border-cyan-500/30 rounded-lg p-6 text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-cyan-400 mb-2",children:[t.size,"/",hv]}),c.jsx("div",{className:"text-gray-300",children:"Lessons Completed"})]}),c.jsxs("div",{className:"bg-gradient-to-br from-green-900/50 to-emerald-900/50 border border-green-500/30 rounded-lg p-6 text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:r}),c.jsx("div",{className:"text-gray-300",children:"XP Earned"})]}),c.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/50 to-orange-900/50 border border-yellow-500/30 rounded-lg p-6 text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:s}),c.jsx("div",{className:"text-gray-300",children:"Current Level"})]})]}),c.jsx("div",{className:"mt-16 text-center",children:c.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 border border-purple-500/30 rounded-lg p-8 max-w-md mx-auto",children:[c.jsx(Ro,{className:"h-8 w-8 text-pink-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-bold text-purple-400 mb-2",children:"Support Python Quest"}),c.jsx("p",{className:"text-gray-300 mb-4 text-sm",children:"Help us keep this platform free and continue adding new lessons and features!"}),c.jsxs(ae,{onClick:()=>window.open("https://pay.zaprite.com/pl_iT3k7W4JRo","_blank"),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold px-6 py-2",children:[c.jsx(Ro,{className:"h-4 w-4 mr-2"}),"Donate"]})]})})]}),c.jsx(lv,{open:w,onOpenChange:_,children:c.jsxs($c,{className:"bg-gray-800 border-green-500/50 text-white",children:[c.jsxs(Dc,{children:[c.jsxs(Fc,{className:"text-2xl text-green-400 flex items-center",children:[c.jsx(Ki,{className:"mr-2"})," Secure Your Progress"]}),c.jsx(Uc,{className:"text-gray-400",children:"Create a self-custody keystore account to save your current progress permanently. Choose a strong password."})]}),c.jsxs("form",{onSubmit:H,className:"space-y-4 pt-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"upgradePassword",className:"text-sm font-medium text-gray-300",children:"New Password"}),c.jsx(yt,{id:"upgradePassword",type:"password",value:C,onChange:O=>S(O.target.value),placeholder:"Min. 8 characters",className:"mt-1 bg-gray-700 border-gray-600 text-white placeholder-gray-500",disabled:m})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"upgradeConfirmPassword",className:"text-sm font-medium text-gray-300",children:"Confirm Password"}),c.jsx(yt,{id:"upgradeConfirmPassword",type:"password",value:I,onChange:O=>N(O.target.value),placeholder:"Confirm your new password",className:"mt-1 bg-gray-700 border-gray-600 text-white placeholder-gray-500",disabled:m})]}),D&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center",children:[c.jsx(No,{size:16,className:"mr-1"}),D]}),c.jsxs(Mc,{className:"sm:justify-start pt-2",children:[c.jsxs(ae,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white",disabled:m,children:[m?c.jsx(Ot,{className:"mr-2 h-4 w-4 animate-spin"}):c.jsx(ar,{className:"mr-2 h-4 w-4"}),"Create Account & Download Keystore"]}),c.jsx(dv,{asChild:!0,children:c.jsx(ae,{type:"button",variant:"outline",className:"w-full mt-2 sm:mt-0 border-gray-600 text-gray-300 hover:bg-gray-700",disabled:m,children:"Cancel"})})]})]})]})})]})},pv=()=>{const{authMode:n,isLoading:e}=mo();return e?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:c.jsx(Ot,{className:"h-12 w-12 animate-spin text-cyan-400"})}):n==="unauthenticated"?c.jsx(qy,{}):c.jsx(Yp,{children:c.jsx(fv,{})})},mv=()=>c.jsx(By,{children:c.jsx(_l,{defaultTheme:"dark",storageKey:"python-quest-ui-theme",children:c.jsx(pv,{})})}),gv=()=>{const n=bl();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),c.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),c.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},yv=new op,vv=()=>c.jsx(ap,{client:yv,children:c.jsxs($f,{children:[c.jsx(Ou,{}),c.jsx(lh,{}),c.jsx(Wp,{children:c.jsxs(qp,{children:[c.jsx(Es,{path:"/",element:c.jsx(mv,{})}),c.jsx(Es,{path:"*",element:c.jsx(gv,{})})]})})]})});Zi(document.getElementById("root")).render(c.jsx(vv,{}));
